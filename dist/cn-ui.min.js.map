{"version":3,"sources":["cn-ui.js","_cn-ui.module.js","cn-checkbox.directive.js","cn-country-select.directive.js","cn-csv-upload.directive.js","cn-currency.directive.js","cn-file-upload.directive.js","cn-filters.js","cn-header.directive.js","cn-ui.min.js","cn-iframe-height.directive.js","cn-link-to-fb.directive.js","cn-loading-bar.directive.js","cn-media-upload.directive.js","cn-modal.js","cn-number.directive.js","cn-onerror.directive.js","cn-pagination.directive.js","cn-parent-width.directive.js","cn-percentage.directive.js","cn-progress-bar.directive.js","cn-radio.directive.js","cn-responsive-height.directive.js","cn-schedule.directive.js","cn-select-or.directive.js","cn-shelf.component.js","cn-toast.js","cn-toggle-switch.directive.js","cn-truncate.directive.js","cn-url.directive.js"],"names":["_classCallCheck","instance","Constructor","TypeError","angular","module","directive","restrict","link","$scope","elem","cnCheckboxTag","__tag","prop","after","find","scope","countrySelectTag","template","id","ngModel","csvUpload","cnUploadPath","Link","controller","Upload","controllerAs","bindToController","attrs","ctrl","csvUploadTag","$watch","newVal","prevVal","onChange","$value","$parent","$setValidity","form","required","_","isEmpty","vm","equals","$setDirty","$q","$http","$sce","cfpLoadingBar","$rootScope","EVENTS","uploadFile","$files","dfr","defer","promise","then","setModelValue","setError","formData","FormData","append","$","ajax","url","headers","defaults","common","data","processData","contentType","type","success","resolve","error","reject","start","response","complete","rawResp","JSON","parse","responseText","$broadcast","httpError","status","errors","this","$inject","cnCurrencyFormat","cnCurrencyFormatTag","activate","placeholder","formatVal","attr","on","handleBlur","$parsers","unshift","parseVal","$formatters","val","el","test","value","overflow","match","parsed","parseFloat","replace","format","multiply","floor","cnCurrencyPlaceholder","$on","off","require","btnStyle","cnDisabled","iconStyle","callback","inputId","btnText","accept","compile","uniqueId","disabled","fileUploadTag","handleClick","file","click","btn","onFileSelect","cnFilter","$filter","array","expression","hasCustomToString","obj","isFunction","toString","Object","prototype","actual","expected","isUndefined","isObject","lowercase","split","each","str","indexOf","titleCase","s","undefined","toLowerCase","ch","toUpperCase","range","input","end","toDateObject","dateString","Date","moment","toISOString","trustAs","trustAsHtml","selectedItems","list","selected","length","filter","item","forEach","compare","key","tmp","childKey","momentjs","formatString","m","out","isValid","calendar","percent","multiplier","numericInput","Math","round","camelCase","SPECIAL_CHARS_REGEXP","MOZ_HACK_REGEXP","separator","letter","offset","sortBy","sortKey","direction","keys","push","getBySortKey","sort","a","b","truncate","chars","breakOnWord","isNaN","substring","charAt","substr","lastspace","lastIndexOf","toNumber","string","num","Number","toDecimal","number","places","position","whole","decimal","float","stripHtml","text","String","cnMastHead","config","MastHead","cnMastHeadTag","toggleFloaters","hide","floatersHeight","outerHeight","hideFloaters","forOwn","_v","k","c","floater","first","actions","floaters","rest","cnIframeHeight","$timeout","cnIFrameHeightTag","console","log","body","getBody","height","h","scrollHeight","element","insurance","t","timers","concat","get","contentDocument","ngSrc","cancel","empty","base","fbObject","linkToFacebookTag","twitterLink","has","fbCampaignGroupId","fbCampaignId","adSet","fbAdgroupId","run","$interval","cnLoadingBarTag","interval","progress","numerator","denominator","counter","stop","oldVal","_extends","assign","target","i","arguments","source","hasOwnProperty","call","mediaUpload","cnFileType","cnPreviewPath","cnModelValueKey","cnExistingPreview","cnForm","cnData","cnKey","cnImagePreviews","cnTextButton","md5","uuid4","mediaUploadTag","filePath","trustAsResourceUrl","media","updatePreview","includes","setFilePath","handleError","step","size","blob","slice","reader","FileReader","readAsBinaryString","onload","e","fileHash","createHash","result","uploadFile_","generate","uuid","name","min","Content-Range","media_object","filename","cn_preview_url","media_url","valueProperty","ngModelController","getNgModelController","$error","v","err","$emit","directiveData","cnModal","$modal","open","options","onChangeState","modal","close","factory","cnNumber","cnNumberTag","cnOnerror","$parse","cnOnerrorTag","handler","onerror","param","cnPagination","paging","onClick","count","cnPaginationTag","buildPaging","pages","skip","last","l","label","active","cnParentWidth","$window","cnParentWidthTag","width","parent","w","cnPercentageFormat","cnPercentageFormatTag","divide","$modelValue","limit","projected","flexWidth","cnProgressBarTag","calculateWidth","percentage","projectedBar","progressBar","css","radioTag","cnResponsiveHeight","linkFunction","cnResponsiveHeightTag","innerWidth","breakpoint","topOffset","top","bottomOffset","cnResponsiveOverflow","max-height","sm","md","lg","cnResponsiveBreak","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","CnSchedule","_this","FREQ","SECONDLY","MINUTELY","DAILY","WEEKLY","MONTHLY","YEARLY","WEEKDAY","MO","TU","WE","TH","FR","SA","SU","state","BIWEEKLY","freq","by","_option","BOM","EOM","WORKDAY","eq","keyedWeekDays","map","showWeekDay","model","$setViewValue","_this2","$render","viewValue","$viewValue","isString","biweekly","set","weekday","day","cnScheduleComponent","bindings","component","cnSelectOr","tpl","transclude","selectFrom","directiveId","toggleText","itemTemplate","SelectOr","cnSelectOrTag","validate","cur","prev","$interpolate","schema","_required","clone","processTemplate","onSelectionChange","setValue","toggleView","view","CnShelf","$element","cnShelfTag","addClass","toggleShow","changes","show","removeClass","hideClass","showClass","showDelay","hideDelay","cnShelf","toastController","toaster","toastTag","mapType","timeout","toasterId","bodyOutputType","tapToDismiss","closeHtml","rslistener","event","icon","Array","isArray","join","pop","simpleToast","actionToast","listToast","onValue","offValue","undefinedClass","readOnly","cnToggleSwitchTag","currentCssState","classes","toggle","$event","preventDefault","stopImmediatePropagation","pre","truncateTag","truncated","ogText","shortText","cnUrlFormat","handleChange","startsWith"],"mappings":"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","file":"cn-ui.min.js","sourcesContent":["'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui', ['angularFileUpload', 'toaster', 'ngAnimate', 'angular-md5', 'uuid4']);\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('checkbox', function () {\n    return {\n      restrict: 'C',\n      link: function link($scope, elem) {\n        function cnCheckboxTag() {}\n        $scope.__tag = new cnCheckboxTag();\n\n        if (elem.prop('tagName') === 'INPUT') {\n          elem.after('<span></span>');\n        } else {\n          elem.find('input[type=checkbox]').after('<span></span>');\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('countrySelect', function () {\n    return {\n      link: function link(scope) {\n        function countrySelectTag() {}\n        scope.__tag = new countrySelectTag();\n      },\n      restrict: 'E',\n      template: '<label for=\"{{id || \\'country\\'}}\">Country</label>\\\n                     <select id=\"{{id || \\'country\\'}}\" ng-model=\"ngModel\" class=\"form-control\">\\\n                       <option value=\"US\">United States</option>\\\n                       <option value=\"AF\">Afghanistan</option>\\\n                       <option value=\"AL\">Albania</option>\\\n                       <option value=\"DZ\">Algeria</option>\\\n                       <option value=\"AS\">American Samoa</option>\\\n                       <option value=\"AD\">Andorra</option>\\\n                       <option value=\"AO\">Angola</option>\\\n                       <option value=\"AI\">Anguilla</option>\\\n                       <option value=\"AQ\">Antarctica</option>\\\n                       <option value=\"AG\">Antigua And Barbuda</option>\\\n                       <option value=\"AR\">Argentina</option>\\\n                       <option value=\"AM\">Armenia</option>\\\n                       <option value=\"AW\">Aruba</option>\\\n                       <option value=\"AU\">Australia</option>\\\n                       <option value=\"AT\">Austria</option>\\\n                       <option value=\"AZ\">Azerbaijan</option>\\\n                       <option value=\"BS\">Bahamas</option>\\\n                       <option value=\"BH\">Bahrain</option>\\\n                       <option value=\"BD\">Bangladesh</option>\\\n                       <option value=\"BB\">Barbados</option>\\\n                       <option value=\"BY\">Belarus</option>\\\n                       <option value=\"BE\">Belgium</option>\\\n                       <option value=\"BZ\">Belize</option>\\\n                       <option value=\"BJ\">Benin</option>\\\n                       <option value=\"BM\">Bermuda</option>\\\n                       <option value=\"BT\">Bhutan</option>\\\n                       <option value=\"BO\">Bolivia</option>\\\n                       <option value=\"BA\">Bosnia And Herzegovina</option>\\\n                       <option value=\"BW\">Botswana</option>\\\n                       <option value=\"BV\">Bouvet Island</option>\\\n                       <option value=\"BR\">Brazil</option>\\\n                       <option value=\"IO\">British Indian Ocean Territory</option>\\\n                       <option value=\"BN\">Brunei Darussalam</option>\\\n                       <option value=\"BG\">Bulgaria</option>\\\n                       <option value=\"BF\">Burkina Faso</option>\\\n                       <option value=\"BI\">Burundi</option>\\\n                       <option value=\"KH\">Cambodia</option>\\\n                       <option value=\"CM\">Cameroon</option>\\\n                       <option value=\"CA\">Canada</option>\\\n                       <option value=\"CV\">Cape Verde</option>\\\n                       <option value=\"KY\">Cayman Islands</option>\\\n                       <option value=\"CF\">Central African Republic</option>\\\n                       <option value=\"TD\">Chad</option>\\\n                       <option value=\"CL\">Chile</option>\\\n                       <option value=\"CN\">China</option>\\\n                       <option value=\"CX\">Christmas Island</option>\\\n                       <option value=\"CC\">Cocos (keeling) Islands</option>\\\n                       <option value=\"CO\">Colombia</option>\\\n                       <option value=\"KM\">Comoros</option>\\\n                       <option value=\"CG\">Congo</option>\\\n                       <option value=\"CK\">Cook Islands</option>\\\n                       <option value=\"CR\">Costa Rica</option>\\\n                       <option value=\"CI\">Cote D Ivoire</option>\\\n                       <option value=\"HR\">Croatia</option>\\\n                       <option value=\"CU\">Cuba</option>\\\n                       <option value=\"CY\">Cyprus</option>\\\n                       <option value=\"CZ\">Czech Republic</option>\\\n                       <option value=\"DK\">Denmark</option>\\\n                       <option value=\"DJ\">Djibouti</option>\\\n                       <option value=\"DM\">Dominica</option>\\\n                       <option value=\"DO\">Dominican Republic</option>\\\n                       <option value=\"TP\">East Timor</option>\\\n                       <option value=\"EC\">Ecuador</option>\\\n                       <option value=\"EG\">Egypt</option>\\\n                       <option value=\"SV\">El Salvador</option>\\\n                       <option value=\"GQ\">Equatorial Guinea</option>\\\n                       <option value=\"ER\">Eritrea</option>\\\n                       <option value=\"EE\">Estonia</option>\\\n                       <option value=\"ET\">Ethiopia</option>\\\n                       <option value=\"FK\">Falkland Islands (malvinas)</option>\\\n                       <option value=\"FO\">Faroe Islands</option>\\\n                       <option value=\"FJ\">Fiji</option>\\\n                       <option value=\"FI\">Finland</option>\\\n                       <option value=\"FR\">France</option>\\\n                       <option value=\"GF\">French Guiana</option>\\\n                       <option value=\"PF\">French Polynesia</option>\\\n                       <option value=\"TF\">French Southern Territories</option>\\\n                       <option value=\"GA\">Gabon</option>\\\n                       <option value=\"GM\">Gambia</option>\\\n                       <option value=\"GE\">Georgia</option>\\\n                       <option value=\"DE\">Germany</option>\\\n                       <option value=\"GH\">Ghana</option>\\\n                       <option value=\"GI\">Gibraltar</option>\\\n                       <option value=\"GR\">Greece</option>\\\n                       <option value=\"GL\">Greenland</option>\\\n                       <option value=\"GD\">Grenada</option>\\\n                       <option value=\"GP\">Guadeloupe</option>\\\n                       <option value=\"GU\">Guam</option>\\\n                       <option value=\"GT\">Guatemala</option>\\\n                       <option value=\"GN\">Guinea</option>\\\n                       <option value=\"GW\">Guinea-bissau</option>\\\n                       <option value=\"GY\">Guyana</option>\\\n                       <option value=\"HT\">Haiti</option>\\\n                       <option value=\"VA\">Holy See (vatican City State)</option>\\\n                       <option value=\"HN\">Honduras</option>\\\n                       <option value=\"HK\">Hong Kong</option>\\\n                       <option value=\"HU\">Hungary</option>\\\n                       <option value=\"IS\">Iceland</option>\\\n                       <option value=\"IN\">India</option>\\\n                       <option value=\"ID\">Indonesia</option>\\\n                       <option value=\"IR\">Iran, Islamic Republic Of</option>\\\n                       <option value=\"IQ\">Iraq</option>\\\n                       <option value=\"IE\">Ireland</option>\\\n                       <option value=\"IL\">Israel</option>\\\n                       <option value=\"IT\">Italy</option>\\\n                       <option value=\"JM\">Jamaica</option>\\\n                       <option value=\"JP\">Japan</option>\\\n                       <option value=\"JO\">Jordan</option>\\\n                       <option value=\"KZ\">Kazakstan</option>\\\n                       <option value=\"KE\">Kenya</option>\\\n                       <option value=\"KI\">Kiribati</option>\\\n                       <option value=\"KP\">Korea Democratic Peoples Republic Of</option>\\\n                       <option value=\"KR\">Korea Republic Of</option>\\\n                       <option value=\"KW\">Kuwait</option>\\\n                       <option value=\"KG\">Kyrgyzstan</option>\\\n                       <option value=\"LA\">Lao Peoples Democratic Republic</option>\\\n                       <option value=\"LV\">Latvia</option>\\\n                       <option value=\"LB\">Lebanon</option>\\\n                       <option value=\"LS\">Lesotho</option>\\\n                       <option value=\"LR\">Liberia</option>\\\n                       <option value=\"LY\">Libyan Arab Jamahiriya</option>\\\n                       <option value=\"LI\">Liechtenstein</option>\\\n                       <option value=\"LT\">Lithuania</option>\\\n                       <option value=\"LU\">Luxembourg</option>\\\n                       <option value=\"MO\">Macau</option>\\\n                       <option value=\"MK\">Macedonia</option>\\\n                       <option value=\"MG\">Madagascar</option>\\\n                       <option value=\"MW\">Malawi</option>\\\n                       <option value=\"MY\">Malaysia</option>\\\n                       <option value=\"MV\">Maldives</option>\\\n                       <option value=\"ML\">Mali</option>\\\n                       <option value=\"MT\">Malta</option>\\\n                       <option value=\"MH\">Marshall Islands</option>\\\n                       <option value=\"MQ\">Martinique</option>\\\n                       <option value=\"MR\">Mauritania</option>\\\n                       <option value=\"MU\">Mauritius</option>\\\n                       <option value=\"YT\">Mayotte</option>\\\n                       <option value=\"MX\">Mexico</option>\\\n                       <option value=\"FM\">Micronesia, Federated States Of</option>\\\n                       <option value=\"MD\">Moldova, Republic Of</option>\\\n                       <option value=\"MC\">Monaco</option>\\\n                       <option value=\"MN\">Mongolia</option>\\\n                       <option value=\"MS\">Montserrat</option>\\\n                       <option value=\"MA\">Morocco</option>\\\n                       <option value=\"MZ\">Mozambique</option>\\\n                       <option value=\"MM\">Myanmar</option>\\\n                       <option value=\"NA\">Namibia</option>\\\n                       <option value=\"NR\">Nauru</option>\\\n                       <option value=\"NP\">Nepal</option>\\\n                       <option value=\"NL\">Netherlands</option>\\\n                       <option value=\"AN\">Netherlands Antilles</option>\\\n                       <option value=\"NC\">New Caledonia</option>\\\n                       <option value=\"NZ\">New Zealand</option>\\\n                       <option value=\"NI\">Nicaragua</option>\\\n                       <option value=\"NE\">Niger</option>\\\n                       <option value=\"NG\">Nigeria</option>\\\n                       <option value=\"NU\">Niue</option>\\\n                       <option value=\"NF\">Norfolk Island</option>\\\n                       <option value=\"MP\">Northern Mariana Islands</option>\\\n                       <option value=\"NO\">Norway</option>\\\n                       <option value=\"OM\">Oman</option>\\\n                       <option value=\"PK\">Pakistan</option>\\\n                       <option value=\"PW\">Palau</option>\\\n                       <option value=\"PS\">Palestinian Territory, Occupied</option>\\\n                       <option value=\"PA\">Panama</option>\\\n                       <option value=\"PG\">Papua New Guinea</option>\\\n                       <option value=\"PY\">Paraguay</option>\\\n                       <option value=\"PE\">Peru</option>\\\n                       <option value=\"PH\">Philippines</option>\\\n                       <option value=\"PN\">Pitcairn</option>\\\n                       <option value=\"PL\">Poland</option>\\\n                       <option value=\"PT\">Portugal</option>\\\n                       <option value=\"PR\">Puerto Rico</option>\\\n                       <option value=\"QA\">Qatar</option>\\\n                       <option value=\"RE\">Reunion</option>\\\n                       <option value=\"RO\">Romania</option>\\\n                       <option value=\"RU\">Russian Federation</option>\\\n                       <option value=\"RW\">Rwanda</option>\\\n                       <option value=\"SH\">Saint Helena</option>\\\n                       <option value=\"KN\">Saint Kitts And Nevis</option>\\\n                       <option value=\"LC\">Saint Lucia</option>\\\n                       <option value=\"PM\">Saint Pierre And Miquelon</option>\\\n                       <option value=\"VC\">Saint Vincent And The Grenadines</option>\\\n                       <option value=\"WS\">Samoa</option>\\\n                       <option value=\"SM\">San Marino</option>\\\n                       <option value=\"ST\">Sao Tome And Principe</option>\\\n                       <option value=\"SA\">Saudi Arabia</option>\\\n                       <option value=\"SN\">Senegal</option>\\\n                       <option value=\"SC\">Seychelles</option>\\\n                       <option value=\"SL\">Sierra Leone</option>\\\n                       <option value=\"SG\">Singapore</option>\\\n                       <option value=\"SK\">Slovakia</option>\\\n                       <option value=\"SI\">Slovenia</option>\\\n                       <option value=\"SB\">Solomon Islands</option>\\\n                       <option value=\"SO\">Somalia</option>\\\n                       <option value=\"ZA\">South Africa</option>\\\n                       <option value=\"GS\">South Georgia</option>\\\n                       <option value=\"ES\">Spain</option>\\\n                       <option value=\"LK\">Sri Lanka</option>\\\n                       <option value=\"SD\">Sudan</option>\\\n                       <option value=\"SR\">Suriname</option>\\\n                       <option value=\"SJ\">Svalbard And Jan Mayen</option>\\\n                       <option value=\"SZ\">Swaziland</option>\\\n                       <option value=\"SE\">Sweden</option>\\\n                       <option value=\"CH\">Switzerland</option>\\\n                       <option value=\"SY\">Syrian Arab Republic</option>\\\n                       <option value=\"TW\">Taiwan, Province Of China</option>\\\n                       <option value=\"TJ\">Tajikistan</option>\\\n                       <option value=\"TZ\">Tanzania, United Republic Of</option>\\\n                       <option value=\"TH\">Thailand</option>\\\n                       <option value=\"TG\">Togo</option>\\\n                       <option value=\"TK\">Tokelau</option>\\\n                       <option value=\"TO\">Tonga</option>\\\n                       <option value=\"TT\">Trinidad And Tobago</option>\\\n                       <option value=\"TN\">Tunisia</option>\\\n                       <option value=\"TR\">Turkey</option>\\\n                       <option value=\"TM\">Turkmenistan</option>\\\n                       <option value=\"TC\">Turks And Caicos Islands</option>\\\n                       <option value=\"TV\">Tuvalu</option>\\\n                       <option value=\"UG\">Uganda</option>\\\n                       <option value=\"UA\">Ukraine</option>\\\n                       <option value=\"AE\">United Arab Emirates</option>\\\n                       <option value=\"GB\">United Kingdom</option>\\\n                       <option value=\"UM\">United States Minor Outlying Islands</option>\\\n                       <option value=\"UY\">Uruguay</option>\\\n                       <option value=\"UZ\">Uzbekistan</option>\\\n                       <option value=\"VU\">Vanuatu</option>\\\n                       <option value=\"VE\">Venezuela</option>\\\n                       <option value=\"VN\">Viet Nam</option>\\\n                       <option value=\"VG\">Virgin Islands, British</option>\\\n                       <option value=\"VI\">Virgin Islands, U.s.</option>\\\n                       <option value=\"WF\">Wallis And Futuna</option>\\\n                       <option value=\"EH\">Western Sahara</option>\\\n                       <option value=\"YE\">Yemen</option>\\\n                       <option value=\"YU\">Yugoslavia</option>\\\n                       <option value=\"ZM\">Zambia</option>\\\n                       <option value=\"ZW\">Zimbabwe</option>\\\n                     </select>',\n      scope: {\n        id: '&?',\n        ngModel: '='\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  \"use strict\";\n\n  angular.module('cn.ui').directive('csvUpload', csvUpload);\n\n  function csvUpload() {\n    return {\n      restrict: 'E',\n      scope: {\n        cnUploadPath: '=',\n        ngModel: '='\n      },\n      link: Link,\n      controller: Upload,\n      controllerAs: 'vm',\n      bindToController: true,\n      template: '\\\n        <file-upload class=\"col-sm-6\"\\\n                     btn-text=\"Upload CSV\"\\\n                     accept=\".csv\"\\\n                     on-file-select=\"vm.uploadFile($files)\">\\\n        </file-upload>\\\n      '\n    };\n  }\n\n  function Link($scope, elem, attrs, ctrl) {\n    function csvUploadTag() {}\n    $scope.__tag = new csvUploadTag();\n\n    $scope.$watch('vm.ngModel', function (newVal, prevVal) {\n      if ($scope.onChange) {\n        $scope.onChange({ $value: newVal });\n      }\n      if ($scope.$parent.$parent.ngModel) {\n        $scope.$parent.$parent.ngModel.$setValidity('schemaForm', true);\n      }\n      if ($scope.$parent.$parent.form.required) {\n        $scope.$parent.$parent.ngModel.$setValidity('tv4-302', !_.isEmpty($scope.vm.ngModel));\n      }\n      if (!angular.equals(newVal, prevVal)) {\n        $scope.$parent.$parent.ngModel.$setDirty();\n      }\n    });\n  }\n\n  Upload.$inject = ['$q', '$http', '$sce', 'cfpLoadingBar', '$rootScope', 'EVENTS'];\n  function Upload($q, $http, $sce, cfpLoadingBar, $rootScope, EVENTS) {\n    var vm = this;\n\n    vm.uploadFile = uploadFile;\n\n    function uploadFile($files) {\n      var dfr = $q.defer();\n      dfr.promise.then(setModelValue, setError);\n\n      var formData = new FormData();\n      formData.append('csv', $files[0]);\n\n      $.ajax({\n        url: vm.cnUploadPath,\n        headers: $http.defaults.headers.common,\n        data: formData,\n        processData: false,\n        contentType: false,\n        type: 'POST',\n        success: dfr.resolve,\n        error: dfr.reject\n      });\n\n      cfpLoadingBar.start();\n    }\n\n    function setModelValue(response) {\n      cfpLoadingBar.complete();\n      vm.ngModel = response;\n    }\n\n    function setError(rawResp) {\n      var response = JSON.parse(rawResp.responseText);\n\n      $rootScope.$broadcast(EVENTS.httpError, {\n        status: response.status,\n        errors: [{ data: response.error }]\n      });\n\n      cfpLoadingBar.complete();\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnCurrencyFormat', cnCurrencyFormat);\n\n  function cnCurrencyFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnCurrencyFormatTag() {}\n      $scope.__tag = new cnCurrencyFormatTag();\n\n      if (!vm) return;\n\n      var format = attrs.cnCurrencyFormat;\n      var placeholder = attrs.cnCurrencyPlaceholder;\n\n      // Clean up event handlers\n      $scope.$on('$destroy', function () {\n        elem.off('blur', handleBlur);\n      });\n\n      activate();\n\n      //////////\n\n      function activate() {\n        if (placeholder) {\n          placeholder = formatVal(placeholder);\n          elem.attr('placeholder', placeholder);\n        }\n\n        elem.on('blur', handleBlur);\n\n        vm.$parsers.unshift(parseVal);\n        vm.$formatters.unshift(function (val) {\n          vm.$setDirty();\n          return formatVal(val);\n        });\n      }\n\n      function handleBlur(el) {\n        if (/\\.\\d$/.test(elem[0].value)) return elem[0].value += '0';\n\n        var overflow = elem[0].value.match(/(\\d*\\.\\d{2})(.+)/);\n        if (overflow) elem[0].value = overflow[1];\n      }\n\n      function parseVal(val) {\n        if (!val) return val;\n        var parsed = parseFloat(val.replace(/\\,/g, ''));\n        if (format === 'cents') {\n          return _.multiply(parsed, 100);\n        }\n        if (format === 'microcents') {\n          return _.multiply(parsed, 1000000);\n        }\n        return parsed;\n      }\n\n      function formatVal(val) {\n        if (!val) val = '';else if (format === 'cents') {\n          val = _.floor(val / 100, 2) || '';\n        } else if (format === 'microcents') {\n          val = _.floor(val / 1000000, 2) || '';\n        } else {\n          val = _.floor(val, 2) || '';\n        }\n        return (/\\.\\d$/.test(val) ? val + '0' : val\n        );\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('fileUpload', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        btnStyle: '@',\n        cnDisabled: '=',\n        iconStyle: '@',\n        callback: '&onFileSelect',\n        inputId: '@',\n        btnText: '@',\n        accept: '@'\n      },\n      template: '<div class=\"file-wrapper\">\\\n                       <button class=\"btn btn-file {{btnStyle}}\" ng-disabled=\"cnDisabled\">\\\n                         <i ng-if=\"iconStyle\" class=\"{{iconStyle}}\"></i> {{btnText}}\\\n                       </button>\\\n                       <input type=\"file\" id=\"{{inputId}}\" class=\"form-control\" accept=\"{{accept}}\"\\\n                              ng-file-select=\"onFileSelect($files)\"/>\\\n                     </div>',\n      compile: function compile(elem, attrs) {\n        attrs.btnStyle = /btn-(primary|success|info|warning|danger|link)/.test(attrs.btnStyle) ? attrs.btnStyle : attrs.btnStyle + ' btn-default';\n        attrs.inputId = attrs.inputId || 'file-' + _.uniqueId();\n        attrs.btnText = attrs.btnText || 'Choose a file...';\n        if (attrs.cnDisabled) {\n          attrs.disabled = true;\n        }\n\n        return function link($scope, elem) {\n          function fileUploadTag() {}\n          $scope.__tag = new fileUploadTag();\n\n          var btn = elem.find('button'),\n              file = elem.find('input');\n\n          btn.on('click', handleClick);\n\n          // Clean up event handlers and closure variables\n          $scope.$on('$destroy', function () {\n            btn.off('click', handleClick);\n            btn = null;\n            file = null;\n          });\n\n          function handleClick() {\n            file.click();\n          }\n\n          $scope.onFileSelect = function ($files) {\n            $scope.callback({ $files: $files });\n          };\n        };\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').filter('cnFilter', cnFilter).filter('titleCase', titleCase).filter('range', range).filter('toDateObject', toDateObject).filter('trustAs', trustAs).filter('trustAsHtml', trustAsHtml).filter('selectedItems', selectedItems).filter('momentjs', momentjs).filter('percent', percent).filter('camelCase', camelCase).filter('sortBy', sortBy).filter('truncate', truncate).filter('toNumber', toNumber).filter('toDecimal', toDecimal).filter('stripHtml', stripHtml);\n\n  cnFilter.$inject = ['$filter'];\n  function cnFilter($filter) {\n    return function (array, expression) {\n      return $filter('filter')(array, expression, function (actual, expected) {\n        if (angular.isUndefined(actual)) {\n          // No substring matching against `undefined`\n          return false;\n        }\n        if (actual === null || expected === null) {\n          // No substring matching against `null`; only match against `null`\n          return actual === expected;\n        }\n        if (angular.isObject(expected) || angular.isObject(actual) && !hasCustomToString(actual)) {\n          // Should not compare primitives against objects, unless they have custom `toString` method\n          return false;\n        }\n\n        actual = angular.lowercase('' + actual);\n        expected = angular.lowercase('' + expected).split(' ');\n        var match = true;\n        _.each(expected, function (str) {\n          if (actual.indexOf(str) === -1) match = false;\n        });\n        return match;\n      });\n\n      function hasCustomToString(obj) {\n        return angular.isFunction(obj.toString) && obj.toString !== Object.prototype.toString;\n      }\n    };\n  }\n\n  function titleCase() {\n    return function (s) {\n      s = s === undefined || s === null ? '' : s;\n      return s.toString().toLowerCase().replace(/_|-/g, ' ').replace(/\\b([a-z])/g, function (ch) {\n        return ch.toUpperCase();\n      });\n    };\n  }\n\n  function range() {\n    return function (input, start, end) {\n      return input = _.range(start, end);\n    };\n  }\n\n  function toDateObject() {\n    return function (dateString) {\n      return new Date(moment(dateString).toISOString());\n    };\n  }\n\n  trustAs.$inject = ['$sce'];\n  function trustAs($sce) {\n    return function (val) {\n      return $sce.trustAs(val);\n    };\n  }\n\n  trustAsHtml.$inject = ['$sce'];\n  function trustAsHtml($sce) {\n    return function (val) {\n      return $sce.trustAsHtml(val);\n    };\n  }\n\n  function selectedItems() {\n    return function (list, selected) {\n      if (!selected || !selected.length) return list;\n\n      return list.filter(function (item) {\n        var match = false;\n        selected.forEach(function (filter) {\n          var compare = item[filter.key];\n          if (_.isObject(compare)) {\n            var tmp = {};\n            tmp[filter.childKey || filter.key] = filter.value;\n            if (_.find(compare, tmp)) {\n              return match = true;\n            }\n          } else {\n            if (compare == filter.value) {\n              return match = true;\n            }\n          }\n        });\n        return match;\n      });\n    };\n  }\n\n  function momentjs() {\n    return function (input, formatString) {\n      formatString = formatString || '';\n      var m = moment(input),\n          out = '';\n\n      if (m && m.isValid()) {\n        if (formatString == 'calendar') {\n          out = m.calendar();\n        } else {\n          out = m.format(formatString);\n        }\n      }\n\n      return out;\n    };\n  }\n\n  function percent() {\n    return function (input, multiplier) {\n      // defaults to 10000 to preserve previous logic\n      multiplier = multiplier || 10000;\n      var numericInput = parseFloat(input);\n      var percent;\n\n      if (typeof numericInput === 'number') {\n        // old logic\n        //percent = Math.round(numericInput * 10000) / 100;\n        percent = Math.round(numericInput * multiplier) / 100;\n\n        return percent + '%';\n      }\n    };\n  }\n\n  function camelCase() {\n    var SPECIAL_CHARS_REGEXP = /([\\:\\-\\_]+(.))/g;\n    var MOZ_HACK_REGEXP = /^moz([A-Z])/;\n\n    return function (input) {\n      return input.replace(SPECIAL_CHARS_REGEXP, function (_, separator, letter, offset) {\n        return offset ? letter.toUpperCase() : letter;\n      }).replace(MOZ_HACK_REGEXP, 'Moz$1');\n    };\n  }\n\n  function sortBy() {\n    return function (obj, sortKey, direction) {\n\n      direction = direction || 'asc';\n      sortKey = sortKey;\n\n      var array = [];\n      Object.keys(obj).forEach(function (key) {\n        array.push(obj[key]);\n      });\n\n      var getBySortKey = function getBySortKey(obj) {\n        return obj[sortKey];\n      };\n\n      if (direction == 'asc') {\n        array.sort(function (a, b) {\n\n          if (getBySortKey(a) > getBySortKey(b)) {\n            return 1;\n          }\n          if (getBySortKey(a) < getBySortKey(b)) {\n            return -1;\n          }\n          // a must be equal to b\n          return 0;\n        });\n      } else {\n        array.sort(function (a, b) {\n          return getBySortKey(b) - getBySortKey(a);\n        });\n      }\n\n      return array;\n    };\n  }\n\n  function truncate() {\n    return function (input, chars, breakOnWord) {\n      if (isNaN(chars)) return input;\n      if (chars <= 0) return '';\n      if (input && input.length >= chars) {\n        input = input.substring(0, chars);\n\n        if (!breakOnWord) {\n          var lastspace = input.lastIndexOf(' ');\n          //get last space\n          if (lastspace !== -1) {\n            input = input.substr(0, lastspace);\n          }\n        } else {\n          while (input.charAt(input.length - 1) == ' ') {\n            input = input.substr(0, input.length - 1);\n          }\n        }\n        return input + '...';\n      }\n      return input;\n    };\n  }\n\n  function toNumber() {\n    return function (string) {\n      var num = Number(string);\n      return isNaN(num) ? 0 : num;\n    };\n  }\n\n  function toDecimal() {\n    return function (number, places) {\n      var string, position, whole, decimal, float;\n\n      if (!number) {\n        return;\n      }\n\n      string = number.toString();\n\n      if (string.length - places >= 0) {\n        position = string.length - places > 0 ? string.length - places : 0;\n        whole = string.substring(0, position);\n        decimal = string.substring(position);\n        float = whole + '.' + decimal;\n      } else {\n        return number;\n      }\n      return Number(float);\n    };\n  }\n\n  function stripHtml() {\n    return function (text) {\n      return text ? String(text).replace(/<[^>]+>/gm, '') : '';\n    };\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnMastHead', cnMastHead);\n\n  function cnMastHead() {\n    return {\n      restrict: 'E',\n      template: '\\n        <div class=\"cn-heading cn-mast-head\">\\n          <div class=\"cn-mast-head-inner\">\\n            <div class=\"cn-mast-head-main\">\\n              <div class=\"cn-heading-title\">\\n                <a ng-if=\"vm.config.backState\"\\n                   class=\"cn-heading-back\"\\n                   ui-sref=\"{{vm.config.backState}}\">\\n                  <i ng-show=\"vm.config.backState\" class=\"icn-back\"></i>\\n                </a>\\n                <h1 ng-hide=\"vm.config.dropdown\">\\n                  {{vm.config.title}}\\n                </h1>\\n                <h1 ng-show=\"vm.config.dropdown\" data-toggle=\"dropdown\">\\n                  <a>\\n                    {{vm.config.title}}\\n                    <i ng-show=\"vm.config.dropdown\" class=\"icn-caret\"></i>\\n                  </a>\\n                </h1>\\n                <ul ng-if=\"vm.config.dropdown\"\\n                    class=\"dropdown-menu row\"\\n                    ng-class=\"vm.config.dropdown.style\"\\n                    style=\"width: {{vm.config.dropdown.lists.length * 250}}px\"\\n                    role=\"menu\">\\n                  <div ng-repeat=\"list in vm.config.dropdown.lists\"\\n                       style=\"width: 250px\">\\n                    <li class=\"{{list.style}}\">\\n                      <div class=\"input-group\">\\n                        <input ng-model=\"list.filter\"\\n                               class=\"form-control\"\\n                               placeholder=\"{{list.name}}\"/>\\n                        <span class=\"input-group-addon\">\\n                          <i class=\"icn-search\"></i>\\n                        </span>\\n                      </div>\\n                    </li>\\n                    <li class=\"divider\"></li>\\n                    <li ng-repeat=\"item in list.items | filter:list.filter\"\\n                        class=\"{{list.style}} {{item.style}}\">\\n                      <a ng-show=\"item.name\"\\n                         ng-click=\"list.handler(item)\"\\n                         ng-class=\"{\\'selected\\': list.isSelected(item)}\">{{item.name}}</a>\\n                    </li>\\n                  </div>\\n                </ul>\\n              </div>\\n  \\n              <div ng-show=\"vm.config.options\"\\n                   class=\"pull-right btn-options\">\\n                <span ng-repeat=\"btn in vm.config.options\">\\n                  <a ng-if=\"btn.state\"\\n                     class=\"btn btn-sm btn-transparent\"\\n                     ui-sref=\"{{btn.state}}\"\\n                     title=\"{{btn.title}}\">\\n                    <i class=\"{{btn.icon}}\"/>\\n                  </a>\\n                  <a ng-if=\"btn.href\"\\n                     class=\"btn btn-sm btn-transparent\"\\n                     ng-href=\"{{btn.href}}\"\\n                     title=\"{{btn.title}}\">\\n                    <i class=\"{{btn.icon}}\"/>\\n                  </a>\\n                </span>\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\"cn-mast-head-sub\">\\n            <div class=\"cn-mast-head-inner\">\\n              <ul class=\"tabs\" ng-if=\"vm.config.tabs && vm.config.tabs.length\">\\n                <li ng-repeat=\"tab in vm.config.tabs\"\\n                    ng-class=\"{active: tab.active}\"\\n                    class=\"{{tab.style}}\">\\n                  <a ng-if=\"tab.state\"\\n                     ui-sref=\"{{tab.state}}\">\\n                    <i ng-show=\"tab.active\" class=\"{{tab.icon}}\"/>\\n                    {{tab.name}}\\n                  </a>\\n                  <span ng-if=\"!tab.state\">\\n                    {{tab.name}}\\n                  </span>\\n                </li>\\n              </ul>\\n            </div>\\n          </div>\\n          <div class=\"cn-mast-actions\">\\n            <div class=\"cn-mast-head-inner\">\\n              <div class=\"cn-actions\"\\n                   ng-if=\"vm.floater\"\\n                   ng-mouseenter=\"vm.toggleFloaters(false)\"\\n                   ng-mouseleave=\"vm.toggleFloaters(true)\">\\n                <floating-action-button\\n                  ng-mouseenter=\"vm.floater.showTitle = true\"\\n                  ng-mouseleave=\"vm.floater.showTitle = false\">\\n                  <a class=\"btn {{vm.hideFloaters ? \\'\\' : vm.floater.style}}\"\\n                     ui-sref=\"{{vm.floater.state}}\">\\n                     <i ng-show=\"vm.floater.icon && !vm.hideFloaters\"\\n                        class=\"{{vm.floater.icon}}\"></i>\\n                     <span ng-show=\"vm.floater.text && vm.hideFloaters\" class=\"text\">\\n                       {{vm.floater.text}}\\n                     </span>\\n                     <span ng-hide=\"vm.floater.icon || vm.floater.text || vm.hideFloaters\">\\n                       {{vm.floater.symbol || \\'+\\'}}\\n                     </span>\\n                     <span ng-show=\"vm.hideFloaters\">+</span>\\n                  </a>\\n                  <span class=\"fab-title\"\\n                        ng-show=\"vm.floater.showTitle && vm.floater.title\">\\n                    {{vm.floater.title}}\\n                  </span>\\n                </floating-action-button>\\n                <div class=\"cn-floaters\" style=\"height: {{vm.floatersHeight}}\">\\n                  <div class=\"cn-floaters-inner\">\\n                    <floating-action-button\\n                      ng-repeat=\"btn in vm.floaters\"\\n                      ng-mouseenter=\"btn.showTitle = true\"\\n                      ng-mouseleave=\"btn.showTitle = false\">\\n                      <a ng-show=\"btn.state\"\\n                         class=\"btn {{btn.style}}\"\\n                         ui-sref=\"{{btn.state}}\">\\n                         <i ng-show=\"btn.icon\" class=\"{{btn.icon}}\"></i>\\n                         <span ng-show=\"btn.text\" class=\"text\">{{btn.text}}</span>\\n                         <span ng-show=\"btn.symbol\">{{btn.symbol}}</span>\\n                       </a>\\n                      <span class=\"fab-title\"\\n                            ng-show=\"btn.showTitle && btn.title\">\\n                        {{btn.title}}\\n                      </span>\\n                    </floating-action-button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>',\n      scope: {\n        config: '='\n      },\n      link: function link(scope, elem) {\n        scope.vm.elem = elem;\n      },\n      controller: MastHead,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n  }\n\n  function MastHead($scope) {\n    'ngInject';\n\n    function cnMastHeadTag() {}\n    $scope.__tag = new cnMastHeadTag();\n\n    // Aggressive destroy\n    $scope.$on('$destroy', function () {\n      _.forOwn(vm, function (_v, k, c) {\n        return c[k] = null;\n      });\n      vm = null;\n    });\n\n    var vm = this;\n    vm.floater = _.first(vm.config.actions);\n    vm.floaters = _.rest(vm.config.actions);\n    vm.floatersHeight = 0;\n    vm.hideFloaters = true;\n    vm.toggleFloaters = toggleFloaters;\n\n    ////////\n\n    function toggleFloaters(hide) {\n      vm.floatersHeight = hide ? 0 : vm.elem.find('.cn-floaters-inner').outerHeight() + 'px';\n      vm.hideFloaters = hide;\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnIframeHeight', cnIframeHeight);\n\n  cnIframeHeight.$inject = ['$timeout'];\n  function cnIframeHeight($timeout) {\n    return {\n      restrict: 'A',\n      link: Link\n    };\n\n    function Link($scope, elem, attrs) {\n      function cnIFrameHeightTag() {}\n      $scope.__tag = new cnIFrameHeightTag();\n\n      var body, $body, h;\n      var insurance;\n      var timers = [];\n\n      $scope.$watch(function () {\n        return attrs.ngSrc;\n      }, function () {\n        if (attrs.ngSrc) {\n          insurance = 0;\n          timers = timers.concat($timeout(activate, 100));\n        }\n      });\n\n      // Clean up event listeners, timers, and closure references\n      $scope.$on('$destroy', function () {\n        angular.element(body).find('img').off('load', activate);\n\n        body = null;\n\n        _.each(timers, function (t) {\n          return $timeout.cancel(t);\n        });\n        _.empty(timers);\n        timers = null;\n      });\n\n      ////////\n\n      function activate() {\n        console.log(':: activate called ::');\n\n        body = getBody();\n        if (body) {\n          elem.height('');\n          h = body.scrollHeight;\n          elem.height(h);\n          angular.element(body).find('img').on('load', activate);\n          if (!insurance) {\n            ++insurance;\n\n            var t = [$timeout(activate, 200), $timeout(activate, 500), $timeout(activate, 1000), $timeout(activate, 1500), $timeout(activate, 3500), $timeout(activate, 5000), $timeout(activate, 7500), $timeout(activate, 10000)];\n\n            timers = timers.concat(t);\n          }\n\n          return;\n        }\n\n        timers = timers.concat([$timeout(activate, 100)]);\n      }\n\n      function getBody() {\n        return elem.get(0).contentDocument && elem.get(0).contentDocument.body;\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('linkToFacebook', function () {\n\n    var base = 'https://www.facebook.com/ads/manage/summary/';\n\n    return {\n      restrict: 'E',\n      replace: true,\n      template: '<a href=\"{{ link }}\" target=\"_blank\" ng-show=\"link\" ng-click=\"$event.stopPropagation();\">\\\n                       {{text}}\\\n                       <span class=\"glyphicon glyphicon-new-window small\"></span>\\\n                     </a>',\n      scope: {\n        'fbObject': '=',\n        'text': '@?'\n      },\n\n      link: function link($scope) {\n        function linkToFacebookTag() {}\n        $scope.__tag = new linkToFacebookTag();\n\n        if ($scope.fbObject.twitterLink) {\n          $scope.link = $scope.fbObject.twitterLink;\n        } else if (_.has($scope.fbObject, 'fbCampaignGroupId')) {\n          if ($scope.fbObject.fbCampaignGroupId) {\n            $scope.link = base + 'campaign/?campaign_id=' + $scope.fbObject.fbCampaignGroupId;\n          }\n        } else if (_.has($scope.fbObject, 'fbCampaignId')) {\n          if ($scope.fbObject.fbCampaignId) {\n            $scope.link = base + 'adset/?ad_set_id=' + $scope.fbObject.fbCampaignId;\n          }\n        } else if (_.has($scope.fbObject, 'fbAdgroupId')) {\n          if ($scope.fbObject.adSet.fbCampaignId && $scope.fbObject.fbAdgroupId) {\n            $scope.link = base + 'adset/?ad_set_id=' + $scope.fbObject.adSet.fbCampaignId + '&show_adgroup_id=' + $scope.fbObject.fbAdgroupId;\n          }\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnLoadingBar', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        run: '='\n      },\n      template: '<div><cn-progress-bar cn-limit=\"1\" cn-progress=\"progress\"></cn-progress-bar></div>',\n      controller: ['$scope', '$interval', function ($scope, $interval) {\n        function cnLoadingBarTag() {}\n        $scope.__tag = new cnLoadingBarTag();\n\n        $scope.progress = 0;\n        $scope.counter = 1;\n        $scope.numerator = 1;\n        $scope.denominator = 3;\n\n        $scope.$watch('run', function (newVal, oldVal) {\n          if (newVal === oldVal) return;\n          if ($scope.run) {\n            start();\n          } else {\n            stop();\n          }\n        });\n\n        function start() {\n          $scope.interval = $interval(function () {\n            $scope.progress = $scope.progress + $scope.numerator / $scope.denominator;\n            $scope.denominator = $scope.denominator + 2 / $scope.counter;\n            $scope.counter = $scope.counter * 0.66;\n          }, 500);\n        }\n\n        function stop() {\n          $interval.cancel($scope.interval);\n          $scope.progress = 100;\n        }\n\n        $scope.$on('$destroy', function () {\n          stop();\n        });\n      }]\n    };\n  });\n})();\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n(function () {\n  \"use strict\";\n\n  angular.module('cn.ui').directive('mediaUpload', mediaUpload);\n\n  function mediaUpload() {\n    return {\n      restrict: 'E',\n      scope: {\n        cnUploadPath: '=',\n        cnFileType: '=',\n        cnPreviewPath: '=',\n        cnModelValueKey: '=',\n        ngModel: '=',\n        cnDisabled: '=',\n        cnExistingPreview: '=',\n        cnForm: '=',\n        cnData: '=',\n        cnKey: '=',\n        cnImagePreviews: '=',\n        cnTextButton: '='\n      },\n      controller: Upload,\n      controllerAs: 'vm',\n      bindToController: true,\n      template: '\\\n        <div class=\"img-placeholder col-sm-6\" ng-class=\"{ empty: !vm.filePath }\">\\\n          <img ng-if=\"vm.cnFileType === \\'image\\'\" ng-src=\"{{vm.filePath}}\"/>\\\n          <video ng-if=\"vm.cnFileType === \\'video\\' && vm.filePath\"\\\n                 ng-src=\"{{vm.filePath}}\"\\\n                 controls=\"controls\" preload=\"none\"/>\\\n        </div>\\\n        <file-upload class=\"col-sm-6\"\\\n                     btn-text=\"{{ vm.cnTextButton ? cnTextButton : (\\\"Upload \\\" +  vm.cnFileType) | titleCase }}\"\\\n                     cn-disabled=\"vm.cnDisabled\"\\\n                     on-file-select=\"vm.uploadFile($files)\">\\\n        </file-upload>\\\n      '\n    };\n  }\n\n  Upload.$inject = ['$q', '$http', '$sce', 'cfpLoadingBar', '$scope', 'md5', 'uuid4'];\n  function Upload($q, $http, $sce, cfpLoadingBar, $scope, md5, uuid4) {\n    function mediaUploadTag() {}\n    $scope.__tag = new mediaUploadTag();\n\n    var vm = this;\n\n    vm.uploadFile = uploadFile;\n    $scope.$watch('vm.ngModel', updatePreview);\n    activate();\n\n    function activate() {\n      if (vm.cnExistingPreview) {\n        vm.filePath = $sce.trustAsResourceUrl('/uploads/facebook/' + vm.cnExistingPreview);\n      } else if (vm.cnFileType === 'image' && vm.ngModel) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel);\n      } else if (vm.cnFileType === 'video' && vm.ngModel) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel.media);\n      }\n    }\n\n    function updatePreview() {\n      if (vm.cnFileType === 'image' && vm.ngModel && vm.ngModel.includes && vm.ngModel.includes(\"/\")) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel);\n      } else if (_.get(vm.cnImagePreviews, vm.cnKey)) {\n        vm.filePath = $sce.trustAsResourceUrl(_.get(vm.cnImagePreviews, vm.cnKey));\n      }\n    }\n\n    function uploadFile($files) {\n      var dfr = $q.defer();\n      dfr.promise.then(setFilePath).catch(handleError);\n      var file = $files[0];\n      if (file.type.includes(\"image\")) {\n        var step = file.size;\n        vm.cnFileType = \"image\";\n      } else {\n        var step = 1024 * 1024 * 8;\n        vm.cnFileType = \"video\";\n      }\n      var blob = file.slice();\n      var reader = new FileReader();\n      reader.readAsBinaryString(blob);\n      reader.onload = function (e) {\n        var fileHash = md5.createHash(reader.result);\n        uploadFile_(file, 0, step, dfr, uuid4.generate(), fileHash);\n      };\n      cfpLoadingBar.start();\n    }\n\n    function uploadFile_(file, start, step, dfr, uuid, fileHash) {\n      var size = file.size;\n      var blob = file.slice(start, start + step);\n      var formData = new FormData();\n      if (vm.cnUploadPath.includes('/media/upload')) {\n        formData.append(\"content_hash\", fileHash);\n        formData.append(\"file\", blob);\n      } else {\n        formData.append(\"fileHash\", fileHash);\n        formData.append(\"filename\", file.name);\n        formData.append(\"uuid\", uuid);\n        formData.append(vm.cnFileType, blob);\n      }\n\n      _.each(vm.cnData, function (value, key) {\n        if (value) formData.append(key, value);\n      });\n      var end = Math.min(start + step, size);\n      var headers = _extends({\n        \"Content-Range\": 'bytes ' + start + '-' + end + '/' + size\n      }, $http.defaults.headers.common);\n      $.ajax({\n        url: vm.cnUploadPath,\n        headers: headers,\n        data: formData,\n        processData: false,\n        contentType: false,\n        type: 'POST',\n        success: function success(response) {\n          if (response.media_object || response.filename || response.cn_preview_url || response.media_url) {\n            dfr.resolve(response);\n          } else if (start + step < size) {\n            uploadFile_(file, start + step, step, dfr, uuid, fileHash);\n          }\n        },\n        error: dfr.reject\n      });\n    }\n\n    function setFilePath(response) {\n      cfpLoadingBar.complete();\n      if (vm.cnImagePreviews) {\n        delete vm.cnImagePreviews[vm.cnKey];\n      }\n      vm.cnModelValueKey = vm.cnModelValueKey || vm.cnForm.valueProperty;\n      vm.ngModel = response[vm.cnModelValueKey || 'media_id_string'];\n      vm.filePath = $sce.trustAsResourceUrl(response[vm.cnPreviewPath || 'cn_preview_url']);\n      var ngModelController = getNgModelController($scope);\n      if (ngModelController) {\n        _.each(ngModelController.$error, function (v, e) {\n          ngModelController.$setValidity(e, true);\n        });\n      }\n    }\n\n    function handleError(err) {\n      cfpLoadingBar.complete();\n      var error = JSON.parse(err.responseText).error;\n      $scope.$emit(\"citizenNet:toastEvent\", { directiveData: { type: 'error', body: error } });\n    }\n\n    function getNgModelController(scope) {\n      if (scope.ngModel) {\n        return scope.ngModel;\n      } else if (scope.$parent) {\n        return getNgModelController(scope.$parent);\n      } else {\n        return null;\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').factory('cnModal', cnModal);\n\n  cnModal.$inject = ['$modal', '$rootScope'];\n  function cnModal($modal, $rootScope) {\n    var vm = {\n      onChangeState: null,\n      open: open\n    };\n\n    return vm;\n\n    ////////\n\n    function open(options) {\n      vm.onChangeState = $rootScope.$on('$stateChangeStart', function () {\n        vm.onChangeState();\n        if (vm.modal) {\n          vm.modal.close();\n        }\n      });\n      vm.modal = $modal.open(options);\n      return vm.modal;\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnNumber', cnNumber);\n\n  function cnNumber($filter) {\n    'ngInject';\n\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnNumberTag() {}\n      $scope.__tag = new cnNumberTag();\n\n      if (!vm) return;\n\n      activate();\n\n      //////////\n\n      function activate() {\n        vm.$parsers.unshift(parseVal);\n        vm.$formatters.unshift(function (val) {\n          vm.$setDirty();\n          return formatVal(val);\n        });\n      }\n\n      function parseVal(val) {\n        console.log('parseNum', val);\n        return parseFloat(val.replace(/\\D*/g, ''), 10);\n      }\n\n      function formatVal(val) {\n        console.log('formatNum', val);\n        return $filter('number')(val);\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  \"use strict\";\n\n  angular.module('cn.ui').directive('cnOnerror', cnOnerror);\n\n  function cnOnerror($parse) {\n    '$inject';\n\n    return {\n      restrict: 'A',\n      link: function link(scope, elem, attrs) {\n        function cnOnerrorTag() {}\n        scope.__tag = new cnOnerrorTag();\n\n        var handler = $parse(attrs.cnOnerror);\n        elem[0].onerror = function (e, param) {\n          return handler(scope, { param: param });\n        };\n      }\n    };\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnPagination', cnPagination);\n\n  function cnPagination() {\n    return {\n      restrict: 'E',\n      replace: true,\n      template: '\\\n          <div class=\"cn-pagination clearfix\"><div ng-if=\"paging\">\\\n            <div class=\"btn-group\" ng-if=\"count\">\\\n              <button type=\"button\" \\\n                      class=\"btn btn-sm btn-primary dropdown-toggle\" \\\n                      data-toggle=\"dropdown\">\\\n                {{count}} Results <span class=\"caret\"></span>\\\n              </button>\\\n              <ul class=\"dropdown-menu\" role=\"menu\">\\\n                <li><a ng-click=\"onClick(1, 10)\">10 Results</a></li>\\\n                <li><a ng-click=\"onClick(1, 25)\">25 Results</a></li>\\\n                <li><a ng-click=\"onClick(1, 50)\">50 Results</a></li>\\\n              </ul>\\\n            </div>\\\n            <ul class=\"pagination\" ng-if=\"pages.length > 1\">\\\n              <li ng-repeat=\"page in pages\"\\\n                  ng-class=\"{active: page.active}\">\\\n                <a ng-if=\"!page.disabled\"\\\n                   ng-click=\"page.skip && onClick(page.skip)\">{{page.label}}</a>\\\n                <span ng-if=\"page.disabled\">{{page.label}}</span>\\\n              </li>\\\n            </ul>\\\n          </div></div>',\n      scope: {\n        paging: '=',\n        onClick: '=',\n        count: '=?'\n      },\n      link: function link($scope) {\n        function cnPaginationTag() {}\n        $scope.__tag = new cnPaginationTag();\n\n        $scope.$watch('paging', function () {\n          if ($scope.paging) {\n            $scope.pages = buildPaging($scope.paging);\n          }\n        });\n\n        function buildPaging(paging) {\n          var pages = [],\n              i = paging.skip < 4 ? 1 : paging.skip > paging.last - 3 ? paging.last - 4 : paging.skip - 2,\n              l = paging.last + 1 > i + 5 ? i + 5 : paging.last + 1;\n\n          if (paging.skip !== 1) {\n            pages.push({\n              label: '\\u2190',\n              skip: paging.skip - 1\n            });\n          }\n\n          if (1 < i) {\n            pages.push({\n              label: 1,\n              skip: 1\n            });\n            pages.push({\n              label: '...',\n              disabled: true\n            });\n          }\n\n          for (; i < l; i++) {\n            pages.push({\n              label: i,\n              active: i === paging.skip,\n              skip: i\n            });\n          }if (paging.last >= l) {\n            pages.push({\n              label: '...',\n              disabled: true\n            });\n            pages.push({\n              label: paging.last,\n              skip: paging.last\n            });\n          }\n\n          if (paging.skip !== paging.last) {\n            pages.push({\n              label: '\\u2192',\n              skip: paging.skip + 1\n            });\n          }\n\n          return pages;\n        }\n      }\n    };\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnParentWidth', cnParentWidth);\n\n  cnParentWidth.$inject = ['$window', '$timeout'];\n  function cnParentWidth($window, $timeout) {\n    return {\n      restrict: 'A',\n      link: link\n    };\n\n    function link(scope, elem) {\n      function cnParentWidthTag() {}\n      scope.__tag = new cnParentWidthTag();\n\n      var w = angular.element($window);\n      var parent = elem.parent();\n\n      // Clean up event handlers and closure references\n      scope.$on('$destroy', function () {\n        w.off('resize', activate);\n        w = null;\n        parent = null;\n      });\n\n      w.on('resize', activate);\n      activate();\n      $timeout(activate, 250);\n\n      function activate() {\n        elem.width(parent.width());\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnPercentageFormat', cnPercentageFormat);\n\n  function cnPercentageFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnPercentageFormatTag() {}\n      $scope.__tag = new cnPercentageFormatTag();\n\n      if (!vm) return;\n\n      vm.$parsers.unshift(function () {\n        return _.divide(elem[0].value, 100);\n      });\n\n      vm.$formatters.unshift(function () {\n        elem[0].value = vm.$modelValue * 100;\n        return elem[0].value;\n      });\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnProgressBar', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        limit: '=cnLimit',\n        projected: '=cnProjected',\n        progress: '=cnProgress',\n        flexWidth: '=cnProgressBarFlexWidth'\n      },\n      template: '<div class=\"cn-progress-container {{flexWidth ? \\'flex-width\\' : \\'\\'}}\">\\\n                       <div class=\"cn-projected-bar\" \\\n                            ng-class=\"{\\'cn-progress-over\\': limit && projected > limit}\">\\\n                         <div class=\"cn-progress-bar\" \\\n                              ng-class=\"{\\'cn-progress-over\\': limit && progress > limit}\"></div>\\\n                       </div>\\\n                     </div>',\n      link: function link($scope, elem) {\n        function cnProgressBarTag() {}\n        $scope.__tag = new cnProgressBarTag();\n\n        var projectedBar = elem.find('.cn-projected-bar'),\n            progressBar = elem.find('.cn-progress-bar');\n\n        // Clean up closure references\n        $scope.$on('$destroy', function () {\n          projectedBar = null;\n          progressBar = null;\n        });\n\n        $scope.$watch(function () {\n          return '' + $scope.limit + $scope.projected + $scope.progress;\n        }, function () {\n          projectedBar.css('width', calculateWidth($scope.projected || $scope.progress, $scope.limit));\n          progressBar.css('width', calculateWidth($scope.progress, $scope.projected));\n        });\n\n        function calculateWidth(numerator, denominator) {\n          return (denominator ? _.percentage(numerator, denominator) : 100) + '%';\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('radio', function () {\n    return {\n      restrict: 'C',\n      link: function link($scope, elem) {\n        function radioTag() {}\n        $scope.__tag = radioTag();\n\n        if (elem.prop('tagName') === 'INPUT') {\n          elem.after('<span></span>');\n        } else {\n          elem.find('input[type=radio]').after('<span></span>');\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnResponsiveHeight', cnResponsiveHeight);\n\n  cnResponsiveHeight.$inject = ['$window', '$timeout'];\n\n  function cnResponsiveHeight($window, $timeout) {\n    var directive = {\n      restrict: 'EA',\n      link: linkFunction\n    };\n\n    return directive;\n\n    function linkFunction($scope, elem, attrs) {\n      function cnResponsiveHeightTag() {}\n      $scope.__tag = new cnResponsiveHeightTag();\n\n      console.log('attrs.cnResponsiveHeight', attrs.cnResponsiveHeight);\n      if (attrs.cnResponsiveHeight === 'false') return;\n\n      // Clean up event handlers and closure references\n      $scope.$on('$destroy', function () {\n        breakpoint = null;\n        w.off('resize', activate);\n        w = null;\n      });\n\n      var w = angular.element($window);\n      var breakpoint = {\n        sm: 768,\n        md: 992,\n        lg: 1200\n      }[attrs.cnResponsiveBreak] || 0;\n\n      w.on('resize', activate);\n      /* give page elements a chance to render before calculation */\n      $timeout(activate, 250);\n      $timeout(activate, 500); // twice for good measure\n\n      function activate() {\n        if ($window.innerWidth > breakpoint) {\n          var topOffset = elem.offset().top;\n\n          if (topOffset < 0) {\n            // calculate again after any animations have completed\n            $timeout(activate, 500);\n          } else {\n            var bottomOffset = attrs.cnResponsiveHeight || 0;\n            var height = w.height() - topOffset - bottomOffset;\n            var overflow = attrs.cnResponsiveOverflow || 'auto';\n            height = height ? height + 'px' : 'auto';\n            if (_.has(attrs, 'cnSetMaxHeight')) {\n              elem.css({\n                'max-height': height,\n                'overflow': overflow\n              });\n            } else {\n              elem.css({\n                'height': height,\n                'overflow': overflow\n              });\n            }\n          }\n        } else {\n          elem.css({ 'height': '' });\n        }\n      }\n    }\n  }\n})();\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n\n  'use strict';\n\n  var CnSchedule = function () {\n    function CnSchedule($scope) {\n      'ngInject';\n\n      // https://tools.ietf.org/html/rfc5545#section-3.3.10\n\n      var _this = this;\n\n      _classCallCheck(this, CnSchedule);\n\n      this.FREQ = {\n        SECONDLY: \"SECONDLY\",\n        MINUTELY: \"MINUTELY\",\n        DAILY: 'DAILY',\n        WEEKLY: 'WEEKLY',\n        MONTHLY: 'MONTHLY',\n        YEARLY: \"YEARLY\"\n      };\n\n      this.WEEKDAY = {\n        MO: 'MO',\n        TU: 'TU',\n        WE: 'WE',\n        TH: 'TH',\n        FR: 'FR',\n        SA: 'SA',\n        SU: \"SU\"\n      };\n\n      this.state = {\n        BIWEEKLY: {\n          freq: this.FREQ.WEEKLY,\n          interval: 2,\n          by: [this.WEEKDAY.MO, this.WEEKDAY.FR],\n          _option: 'BIWEEKLY'\n        },\n        BOM: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [1],\n          _option: 'BOM'\n        },\n        DAILY: {\n          freq: this.FREQ.DAILY,\n          interval: 1,\n          _option: 'DAILY'\n        },\n        EOM: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [-1],\n          _option: 'EOM'\n        },\n        MONTHLY: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [14],\n          _option: 'MONTHLY'\n        },\n        WEEKLY: {\n          freq: this.FREQ.WEEKLY,\n          interval: 1,\n          by: [this.WEEKDAY.MO],\n          _option: 'WEEKLY'\n        },\n        WORKDAY: {\n          freq: this.FREQ.DAILY,\n          interval: 1,\n          by: _(this.WEEKDAY).keys().reject(function (value) {\n            return _.eq(value, _this.WEEKDAY.SA) || _.eq(value, _this.WEEKDAY.SU);\n          }).value(),\n          _option: 'WORKDAY'\n        }\n      };\n\n      this.keyedWeekDays = _.map(this.WEEKDAY, function (key, value) {\n        return { name: _this.showWeekDay(value), value: value };\n      });\n\n      $scope.$watch(function () {\n        return _this.model;\n      }, function (value) {\n        return _this.ngModel.$setViewValue(value);\n      });\n    }\n\n    _createClass(CnSchedule, [{\n      key: '$onInit',\n      value: function $onInit() {\n        var _this2 = this;\n\n        this.ngModel.$render = function () {\n          var viewValue = _this2.ngModel.$viewValue;\n          var _option = _.get(viewValue, '_option');\n\n          if (_.isObject(viewValue) && _.isString(_option)) {\n            _.assign(_this2.state[_option], viewValue);\n            _this2.model = _this2.state[_option];\n          } else {\n            _this2.model = _this2.state.WEEKLY;\n          }\n        };\n      }\n    }, {\n      key: 'handleChangeBiWeekly',\n      value: function handleChangeBiWeekly(biweekly) {\n        _.set(this.state.BIWEEKLY, 'by', biweekly);\n      }\n    }, {\n      key: 'handleChangeWeekly',\n      value: function handleChangeWeekly(weekday) {\n        _.set(this.state.WEEKLY, 'by', [weekday]);\n      }\n    }, {\n      key: 'showWeekDay',\n      value: function showWeekDay(day) {\n        return {\n          MO: 'Monday',\n          TU: 'Tuesday',\n          WE: 'Wednesday',\n          TH: 'Thursday',\n          FR: 'Friday',\n          SA: 'Saturday',\n          SU: 'Sunday'\n        }[day];\n      }\n    }]);\n\n    return CnSchedule;\n  }();\n\n  var cnScheduleComponent = {\n    bindings: {\n      form: '<'\n    },\n    controller: CnSchedule,\n    controllerAs: 'schedule',\n    require: {\n      ngModel: '^ngModel'\n    },\n    template: '\\n      <div class=\"form-group\">\\n        <div class=\"btn-group clearfix\">\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.WEEKLY\">\\n              Every\\n              &nbsp;\\n              <div class=\"btn-group\"\\n                   uib-dropdown\\n                   is-open=\"weeklyIsOpen\">\\n                <button type=\"button\"\\n                        class=\"btn btn-primary\"\\n                        uib-dropdown-toggle\\n                        ng-disabled=\"schedule.model._option !== \\'WEEKLY\\'\"\\n                        style=\"background-color: #DEDEDE; color: black;\">\\n                  {{ schedule.showWeekDay(schedule.state.WEEKLY.by[0]) }}\\n                  &nbsp;\\n                  <span class=\"caret\"></span>\\n                </button>\\n                <ul class=\"dropdown-menu\"\\n                    uib-dropdown-menu\\n                    role=\"menu\"\\n                    aria-labelledby=\"single-button\">\\n                  <li role=\"menuitem\"\\n                      ng-click=\"schedule.handleChangeWeekly(wd.value)\"\\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\\n                    <a>{{ wd.name }}</a>\\n                  </li>\\n                </ul>\\n              </div>\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.BIWEEKLY\">\\n              Every\\n              &nbsp;\\n              <div class=\"btn-group\"\\n                   uib-dropdown\\n                   is-open=\"biWeeklyXIsOpen\">\\n                <button type=\"button\"\\n                        class=\"btn btn-primary\"\\n                        uib-dropdown-toggle\\n                        ng-disabled=\"schedule.model._option !== \\'BIWEEKLY\\'\"\\n                        style=\"background-color: #DEDEDE; color: black;\">\\n                  {{ schedule.showWeekDay(schedule.state.BIWEEKLY.by[0]) }}\\n                  &nbsp;\\n                  <span class=\"caret\"></span>\\n                </button>\\n                <ul class=\"dropdown-menu\"\\n                    uib-dropdown-menu\\n                    role=\"menu\"\\n                    aria-labelledby=\"single-button\">\\n                  <li role=\"menuitem\"\\n                      ng-hide=\"wd.value === schedule.state.BIWEEKLY.by[1]\"\\n                      ng-click=\"schedule.handleChangeBiWeekly([wd.value, schedule.state.BIWEEKLY.by[1]])\"\\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\\n                    <a>{{ wd.name }}</a>\\n                  </li>\\n                </ul>\\n              </div>\\n              &nbsp;\\n              and\\n              &nbsp;\\n              <div class=\"btn-group\"\\n                   uib-dropdown\\n                   is-open=\"biWeeklyYIsOpen\">\\n                <button type=\"button\"\\n                        class=\"btn btn-primary\"\\n                        uib-dropdown-toggle\\n                        ng-disabled=\"schedule.model._option !== \\'BIWEEKLY\\'\"\\n                        style=\"background-color: #DEDEDE; color: black;\">\\n                  {{ schedule.showWeekDay(schedule.state.BIWEEKLY.by[1]) }}\\n                  &nbsp;\\n                  <span class=\"caret\"></span>\\n                </button>\\n                <ul class=\"dropdown-menu\"\\n                    uib-dropdown-menu\\n                    role=\"menu\"\\n                    aria-labelledby=\"single-button\">\\n                  <li role=\"menuitem\"\\n                      ng-hide=\"wd.value === schedule.state.BIWEEKLY.by[0]\"\\n                      ng-click=\"schedule.handleChangeBiWeekly([schedule.state.BIWEEKLY.by[0], wd.value])\"\\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\\n                    <a>{{ wd.name }}</a>\\n                  </li>\\n                </ul>\\n              </div>\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.WORKDAY\">\\n              Weekdays\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.DAILY\">\\n              Daily\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.BOM\">\\n              Beginning of Month\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.EOM\">\\n              End of Month\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.MONTHLY\">\\n              Every\\n              &nbsp;\\n              <input max=\"31\"\\n                     min=\"1\"\\n                     ng-disabled=\"schedule.model._option !== \\'MONTHLY\\'\"\\n                     ng-model-options=\"{ debounce: 300 }\"\\n                     ng-model=\"schedule.state.MONTHLY.by[0]\"\\n                     step=\"1\"\\n                     style=\"width: 50px; text-align: center;\"\\n                     type=\"number\"\\n                     class=\"form-control\" />\\n              &nbsp;\\n              of the month\\n            </input>\\n          </label>\\n        </div>\\n      </div>\\n    '\n  };\n\n  angular.module('cn.ui').component('cnSchedule', cnScheduleComponent);\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnSelectOr', cnSelectOr);\n\n  function cnSelectOr() {\n    return {\n      restrict: 'E',\n      template: function template(elem, attrs) {\n        console.log('template:', elem, attrs);\n        var tpl = '\\\n          <div class=\"cn-select-or\" ng-disabled=\"vm.disabled\">\\\n            <p ng-show=\"vm.selectFrom.length\" class=\"toggle-view\">\\\n              <a ng-click=\"vm.toggleView()\">\\\n                {{vm.view === \\'list\\' ? vm.toggleText.list : vm.toggleText.new}}\\\n              </a>\\\n            </p>\\\n            <div ng-show=\"vm.form.view === \\'new\\'\" ng-transclude/>\\\n            <div ng-show=\"vm.form.view === \\'list\\'\" class=\"cn-list\">\\\n              <table class=\"list-group table card-flex\">\\\n                <tr ng-repeat=\"item in vm.selectFrom\"\\\n                    selection-model\\\n                    selection-model-type=\"checkbox\"\\\n                    selection-model-cleanup-strategy=\"deselect\"\\\n                    selection-model-selected-items=\"vm.selected\">\\\n                  <td class=\"col-sm-1 text-center\">\\\n                    <span class=\"checkbox\">\\\n                      <input type=\"checkbox\" id=\"checkbox{{ item.id }}\" selection-model-ignore=\"false\"/>\\\n                    </span>\\\n                  </td>\\\n                  <td class=\"col-sm-11\" ng-bind-html=\"vm.processTemplate(item)\"></td>\\\n                </tr>\\\n              </table>\\\n            </div>\\\n          </div>\\\n        ';\n        return tpl;\n      },\n      transclude: true,\n      scope: {\n        selectFrom: '=',\n        ngModel: '=',\n        form: '=ffForm',\n        directiveId: '=',\n        toggleText: '=',\n        disabled: '=',\n        itemTemplate: '='\n      },\n      require: 'ngModel',\n      link: Link,\n      controller: SelectOr,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n  }\n\n  function Link($scope, elem, attrs, ctrl) {\n    function cnSelectOrTag() {}\n    $scope.__tag = new cnSelectOrTag();\n\n    var vm = $scope.vm;\n\n    $scope.$watch('vm.ngModel', validate, true);\n\n    //////////\n\n    function validate(cur, prev) {\n      if (!angular.equals(cur, prev)) {\n        ctrl.$setDirty();\n\n        if (vm.form.required) {\n          ctrl.$setValidity('tv4-302', !!cur);\n        }\n      }\n    }\n  }\n\n  SelectOr.$inject = ['$scope', '$sce', '$interpolate'];\n  function SelectOr($scope, $sce, $interpolate) {\n    var vm = this;\n    vm.selected = [];\n    vm.form.view = vm.form.view || 'new';\n    vm.activate = activate;\n    vm.onSelectionChange = onSelectionChange;\n    vm.processTemplate = processTemplate;\n    vm.setValue = setValue;\n    vm.toggleView = toggleView;\n\n    $scope.$watch('vm.selected.length', vm.onSelectionChange);\n\n    vm.activate();\n\n    ///////////\n\n    function activate() {\n      vm.form.schema._required = _.clone(vm.form.schema.required);\n    }\n\n    function processTemplate(item) {\n      return $sce.trustAsHtml($interpolate(vm.itemTemplate)(item));\n    }\n\n    function onSelectionChange() {\n      vm.setValue(_.first(vm.selected) || null);\n    }\n\n    function setValue(val) {\n      if (val) {\n        val = vm.form.schema.type === 'object' ? val : val[vm.form.valueProperty || 'value'];\n      }\n      vm.ngModel = val;\n    }\n\n    function toggleView() {\n      vm.form.view = vm.form.view === 'new' ? 'list' : 'new';\n      if (vm.selected[0]) {\n        vm.selected[0].selected = false;\n        vm.selected.length = 0;\n      }\n    }\n  }\n})();\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n  'use strict';\n\n  var CnShelf = function () {\n    function CnShelf($element, $timeout, $scope) {\n      'ngInject';\n\n      _classCallCheck(this, CnShelf);\n\n      function cnShelfTag() {}\n      $scope.__tag = new cnShelfTag();\n\n      this.$element = $element;\n      this.$timeout = $timeout;\n    }\n\n    _createClass(CnShelf, [{\n      key: '$onInit',\n      value: function $onInit() {\n        this.$element.addClass('animated fast animated-width');\n        this.toggleShow();\n      }\n    }, {\n      key: '$onChanges',\n      value: function $onChanges(changes) {\n        if (changes.show) {\n          this.toggleShow();\n        }\n      }\n    }, {\n      key: 'toggleShow',\n      value: function toggleShow() {\n        var _this = this;\n\n        if (this.show) {\n          this.$timeout(function () {\n            _this.$element.removeClass(_this.hideClass).addClass(_this.showClass);\n          }, this.showDelay || 0);\n        } else {\n          this.$timeout(function () {\n            _this.$element.removeClass(_this.showClass).addClass(_this.hideClass);\n          }, this.hideDelay || 0);\n        }\n      }\n    }]);\n\n    return CnShelf;\n  }();\n\n  var cnShelf = {\n    controller: CnShelf,\n    controllerAs: 'shelf',\n    bindings: {\n      show: '<',\n      showClass: '@',\n      hideClass: '@',\n      showDelay: '<',\n      hideDelay: '<'\n    }\n  };\n\n  angular.module('cn.ui').component('cnShelf', cnShelf);\n})();\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n(function () {\n  'use strict';\n\n  toastController.$inject = ['$rootScope', 'toaster', '$scope'];\n\n  function toastController($rootScope, toaster, $scope) {\n    function toastTag() {}\n    $scope.__tag = new toastTag();\n\n    var defaults = {\n      timeout: 5000,\n      toasterId: 'simple',\n      body: 'simple-toast',\n      bodyOutputType: 'directive',\n      tapToDismiss: false,\n      closeHtml: '<a>Dismiss</a>'\n    };\n\n    var rslistener = $rootScope.$on(\"citizenNet:toastEvent\", function (event, options) {\n      if (_.isObject(options)) {\n        options.directiveData.icon = mapType(options.directiveData.type);\n        if (Array.isArray(options.directiveData.body)) {\n          options.directiveData.body = options.directiveData.body.join('<br />');\n        }\n        toaster.pop(_extends({}, defaults, options));\n      } else {\n        toaster.pop(_extends({}, defaults, { directiveData: { body: options } }));\n      }\n    });\n\n    function mapType(type) {\n      switch (type) {\n        case \"success\":\n          return \"icn-thumbsup\";\n        case \"warning\":\n          return \"icn-error\";\n        case \"danger\":\n          return \"icn-error\";\n        case \"error\":\n          return \"icn-error\";\n        default:\n          return \"icn-info\";\n      }\n    }\n\n    $scope.$on('$destroy', function () {\n      rslistener();\n    });\n  }\n\n  var simpleToast = function simpleToast() {\n    return {\n      template: '\\n      <div class=\\'flex-box align-items-center\\'>\\n        <div class=\"padding-right-20\">\\n          <i ng-class=\"directiveData.icon || \\'icn-info\\'\"></i>\\n        </div>\\n        <div class=\"padding-right-20 flex-1\">\\n          <span ng-bind-html=\\'directiveData.body\\'>{{directiveData.body}}</span>\\n        </div>\\n      </div>\\n    '\n    };\n  };\n\n  var actionToast = function actionToast() {\n    return {\n      template: '\\n      <div class=\\'flex-box align-items-center\\'>\\n        <div class=\\'padding-right-20\\'>\\n          <i ng-class=\\'directiveData.icon || \"icn-info\"\\'></i>\\n        </div>\\n        <div class=\\'padding-right-20 flex-1\\'>\\n          <span>{{directiveData.body}}</span>\\n        </div>\\n        <div class=\\'btn-group\\'>\\n          <span ng-repeat=\\'action in directiveData.actions\\'>\\n            <a class=\\'btn btn-primary\\' ng-click=\\'action.click()\\'>{{action.text}}</a>\\n          </span>\\n        </div>\\n      </div>\\n    '\n    };\n  };\n\n  var listToast = function listToast() {\n    return {\n      template: '\\n      <div class=\"flex-box align-items-center\">\\n        <div class=\"padding-right-40\">\\n          <span class=\"label\">{{directiveData.selected.length}}</span>\\n          {{directiveData.type}} Selected\\n        </div>\\n        <div class=\"padding-right-20 flex-5 btn-group\">\\n          <span ng-repeat=\"action in directiveData.actions\">\\n            <a\\n              class=\"btn btn-default margin-right-10\"\\n              ng-click=\"action.click()\"\\n              ng-disabled=\"action.disabled && action.disabled()\"\\n            >{{action.text}}</a>\\n            <i class=\"fa fa-question\"\\n               style=\"color:lightgrey; cursor:pointer;padding:5px;\"\\n               ng-if=\"action.tooltip && action.disabled && action.disabled()\"\\n               tooltip=\"{{action.tooltip}}\"\\n            ></i>\\n          </span>\\n          <span>\\n            <a class=\"btn btn-transparent\" ng-click=\"directiveData.deselect()\">Deselect All</a>\\n          </span>\\n        </div>\\n      </div>\\n    '\n    };\n  };\n\n  angular.module('cn.ui').controller('toastController', toastController).directive(\"simpleToast\", simpleToast).directive(\"actionToast\", actionToast).directive(\"listToast\", listToast);\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnToggleSwitch', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      template: '\\n            <div class=\"cn-toggle\"\\n                  ng-class=\"currentCssState()\"\\n                  ng-click=\"toggle($event)\">\\n              <i class=\"icn-toggle\"\\n                  ng-class=\"currentCssState()\"></i>\\n            </div>\\n          ',\n      require: '^ngModel',\n      scope: {\n        'ngModel': '=', // property used to determine on / off state\n        'onValue': '=?',\n        'offValue': '=?',\n        'undefinedClass': '=?',\n        'readOnly': '=',\n        'required': '=',\n        'onChange': '&' // callback when toggle changes\n      },\n      link: function link($scope, elem, attrs, ctrl) {\n        function cnToggleSwitchTag() {}\n        $scope.__tag = new cnToggleSwitchTag();\n\n        $scope.onValue = _.isUndefined($scope.onValue) ? true : $scope.onValue;\n        $scope.offValue = _.isUndefined($scope.offValue) ? false : $scope.offValue;\n        $scope.undefinedClass = $scope.undefinedClass || 'schrodinger';\n\n        $scope.currentCssState = function () {\n          var classes = [];\n          if ($scope.readOnly) classes.push('readonly');\n          if ($scope.ngModel == $scope.onValue) {} else if ($scope.ngModel == $scope.offValue) classes.push('disabled');else classes.push($scope.undefinedClass);\n          return classes.join(' ');\n        };\n\n        $scope.toggle = function ($event) {\n          $event.preventDefault();\n          $event.stopImmediatePropagation();\n\n          // Using evil twins to do string to number type conversion comparison\n          if ($scope.ngModel == $scope.onValue) {\n            $scope.ngModel = $scope.offValue;\n          } else {\n            $scope.ngModel = $scope.onValue;\n          }\n\n          ctrl.$setDirty();\n\n          if ($scope.onChange) {\n            $scope.onChange();\n          }\n        };\n\n        $scope.$watch('ngModel', function (val, pre) {\n          ctrl.$setValidity('schemaForm', true);\n          ctrl.$setValidity('tv4-302', !$scope.required || !angular.isUndefined(val));\n        });\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('truncate', function () {\n    return {\n      restrict: 'AE',\n      scope: {\n        text: '=truncateText',\n        size: '=truncateSize',\n        show: '@truncateShow'\n      },\n      link: function link($scope, elem) {\n        function truncateTag() {}\n        $scope.__tag = new truncateTag();\n\n        $scope.$on('$destroy', function () {\n          if ($scope.show) {\n            elem.off($scope.show, truncate);\n          }\n        });\n\n        var ogText = $scope.text || '',\n            shortText = ogText.length > $scope.size ? ogText.substr(0, $scope.size) + '\\u2026' : ogText,\n            truncated = false;\n\n        function truncate() {\n          elem.text(truncated ? ogText : shortText);\n          truncated = !truncated;\n        }\n\n        truncate();\n\n        if ($scope.show) {\n          elem.on($scope.show, truncate);\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnUrlFormat', cnUrlFormat);\n\n  function cnUrlFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      if (!vm) return;\n\n      // Clean up event handlers\n      $scope.$on('$destroy', function () {\n        elem.off('input', handleChange);\n      });\n\n      activate();\n\n      //////////\n\n      function activate() {\n        elem.on('input', handleChange);\n      }\n\n      function handleChange(el) {\n        if (el.target.value.length < 5) {} else if (!el.target.value.startsWith(\"http\")) {\n          el.target.value = \"https://\" + el.target.value;\n        }\n      }\n    }\n  }\n})();","(function() {\n  'use strict';\n  angular.module('cn.ui', ['angularFileUpload', 'toaster', 'ngAnimate', 'angular-md5', 'uuid4']);\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('checkbox', function() {\n        return {\n          restrict: 'C',\n          link: function($scope, elem) {\n            function cnCheckboxTag() {}\n            $scope.__tag = new cnCheckboxTag();\n\n            if(elem.prop('tagName') === 'INPUT') {\n              elem.after('<span></span>');\n            }\n            else {\n              elem.find('input[type=checkbox]').after('<span></span>');\n            }\n          }\n        };\n      });\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('countrySelect', function() {\n        return {\n          link: function(scope) {\n            function countrySelectTag() {}\n            scope.__tag = new countrySelectTag();\n          },\n          restrict: 'E',\n          template: '<label for=\"{{id || \\'country\\'}}\">Country</label>\\\n                     <select id=\"{{id || \\'country\\'}}\" ng-model=\"ngModel\" class=\"form-control\">\\\n                       <option value=\"US\">United States</option>\\\n                       <option value=\"AF\">Afghanistan</option>\\\n                       <option value=\"AL\">Albania</option>\\\n                       <option value=\"DZ\">Algeria</option>\\\n                       <option value=\"AS\">American Samoa</option>\\\n                       <option value=\"AD\">Andorra</option>\\\n                       <option value=\"AO\">Angola</option>\\\n                       <option value=\"AI\">Anguilla</option>\\\n                       <option value=\"AQ\">Antarctica</option>\\\n                       <option value=\"AG\">Antigua And Barbuda</option>\\\n                       <option value=\"AR\">Argentina</option>\\\n                       <option value=\"AM\">Armenia</option>\\\n                       <option value=\"AW\">Aruba</option>\\\n                       <option value=\"AU\">Australia</option>\\\n                       <option value=\"AT\">Austria</option>\\\n                       <option value=\"AZ\">Azerbaijan</option>\\\n                       <option value=\"BS\">Bahamas</option>\\\n                       <option value=\"BH\">Bahrain</option>\\\n                       <option value=\"BD\">Bangladesh</option>\\\n                       <option value=\"BB\">Barbados</option>\\\n                       <option value=\"BY\">Belarus</option>\\\n                       <option value=\"BE\">Belgium</option>\\\n                       <option value=\"BZ\">Belize</option>\\\n                       <option value=\"BJ\">Benin</option>\\\n                       <option value=\"BM\">Bermuda</option>\\\n                       <option value=\"BT\">Bhutan</option>\\\n                       <option value=\"BO\">Bolivia</option>\\\n                       <option value=\"BA\">Bosnia And Herzegovina</option>\\\n                       <option value=\"BW\">Botswana</option>\\\n                       <option value=\"BV\">Bouvet Island</option>\\\n                       <option value=\"BR\">Brazil</option>\\\n                       <option value=\"IO\">British Indian Ocean Territory</option>\\\n                       <option value=\"BN\">Brunei Darussalam</option>\\\n                       <option value=\"BG\">Bulgaria</option>\\\n                       <option value=\"BF\">Burkina Faso</option>\\\n                       <option value=\"BI\">Burundi</option>\\\n                       <option value=\"KH\">Cambodia</option>\\\n                       <option value=\"CM\">Cameroon</option>\\\n                       <option value=\"CA\">Canada</option>\\\n                       <option value=\"CV\">Cape Verde</option>\\\n                       <option value=\"KY\">Cayman Islands</option>\\\n                       <option value=\"CF\">Central African Republic</option>\\\n                       <option value=\"TD\">Chad</option>\\\n                       <option value=\"CL\">Chile</option>\\\n                       <option value=\"CN\">China</option>\\\n                       <option value=\"CX\">Christmas Island</option>\\\n                       <option value=\"CC\">Cocos (keeling) Islands</option>\\\n                       <option value=\"CO\">Colombia</option>\\\n                       <option value=\"KM\">Comoros</option>\\\n                       <option value=\"CG\">Congo</option>\\\n                       <option value=\"CK\">Cook Islands</option>\\\n                       <option value=\"CR\">Costa Rica</option>\\\n                       <option value=\"CI\">Cote D Ivoire</option>\\\n                       <option value=\"HR\">Croatia</option>\\\n                       <option value=\"CU\">Cuba</option>\\\n                       <option value=\"CY\">Cyprus</option>\\\n                       <option value=\"CZ\">Czech Republic</option>\\\n                       <option value=\"DK\">Denmark</option>\\\n                       <option value=\"DJ\">Djibouti</option>\\\n                       <option value=\"DM\">Dominica</option>\\\n                       <option value=\"DO\">Dominican Republic</option>\\\n                       <option value=\"TP\">East Timor</option>\\\n                       <option value=\"EC\">Ecuador</option>\\\n                       <option value=\"EG\">Egypt</option>\\\n                       <option value=\"SV\">El Salvador</option>\\\n                       <option value=\"GQ\">Equatorial Guinea</option>\\\n                       <option value=\"ER\">Eritrea</option>\\\n                       <option value=\"EE\">Estonia</option>\\\n                       <option value=\"ET\">Ethiopia</option>\\\n                       <option value=\"FK\">Falkland Islands (malvinas)</option>\\\n                       <option value=\"FO\">Faroe Islands</option>\\\n                       <option value=\"FJ\">Fiji</option>\\\n                       <option value=\"FI\">Finland</option>\\\n                       <option value=\"FR\">France</option>\\\n                       <option value=\"GF\">French Guiana</option>\\\n                       <option value=\"PF\">French Polynesia</option>\\\n                       <option value=\"TF\">French Southern Territories</option>\\\n                       <option value=\"GA\">Gabon</option>\\\n                       <option value=\"GM\">Gambia</option>\\\n                       <option value=\"GE\">Georgia</option>\\\n                       <option value=\"DE\">Germany</option>\\\n                       <option value=\"GH\">Ghana</option>\\\n                       <option value=\"GI\">Gibraltar</option>\\\n                       <option value=\"GR\">Greece</option>\\\n                       <option value=\"GL\">Greenland</option>\\\n                       <option value=\"GD\">Grenada</option>\\\n                       <option value=\"GP\">Guadeloupe</option>\\\n                       <option value=\"GU\">Guam</option>\\\n                       <option value=\"GT\">Guatemala</option>\\\n                       <option value=\"GN\">Guinea</option>\\\n                       <option value=\"GW\">Guinea-bissau</option>\\\n                       <option value=\"GY\">Guyana</option>\\\n                       <option value=\"HT\">Haiti</option>\\\n                       <option value=\"VA\">Holy See (vatican City State)</option>\\\n                       <option value=\"HN\">Honduras</option>\\\n                       <option value=\"HK\">Hong Kong</option>\\\n                       <option value=\"HU\">Hungary</option>\\\n                       <option value=\"IS\">Iceland</option>\\\n                       <option value=\"IN\">India</option>\\\n                       <option value=\"ID\">Indonesia</option>\\\n                       <option value=\"IR\">Iran, Islamic Republic Of</option>\\\n                       <option value=\"IQ\">Iraq</option>\\\n                       <option value=\"IE\">Ireland</option>\\\n                       <option value=\"IL\">Israel</option>\\\n                       <option value=\"IT\">Italy</option>\\\n                       <option value=\"JM\">Jamaica</option>\\\n                       <option value=\"JP\">Japan</option>\\\n                       <option value=\"JO\">Jordan</option>\\\n                       <option value=\"KZ\">Kazakstan</option>\\\n                       <option value=\"KE\">Kenya</option>\\\n                       <option value=\"KI\">Kiribati</option>\\\n                       <option value=\"KP\">Korea Democratic Peoples Republic Of</option>\\\n                       <option value=\"KR\">Korea Republic Of</option>\\\n                       <option value=\"KW\">Kuwait</option>\\\n                       <option value=\"KG\">Kyrgyzstan</option>\\\n                       <option value=\"LA\">Lao Peoples Democratic Republic</option>\\\n                       <option value=\"LV\">Latvia</option>\\\n                       <option value=\"LB\">Lebanon</option>\\\n                       <option value=\"LS\">Lesotho</option>\\\n                       <option value=\"LR\">Liberia</option>\\\n                       <option value=\"LY\">Libyan Arab Jamahiriya</option>\\\n                       <option value=\"LI\">Liechtenstein</option>\\\n                       <option value=\"LT\">Lithuania</option>\\\n                       <option value=\"LU\">Luxembourg</option>\\\n                       <option value=\"MO\">Macau</option>\\\n                       <option value=\"MK\">Macedonia</option>\\\n                       <option value=\"MG\">Madagascar</option>\\\n                       <option value=\"MW\">Malawi</option>\\\n                       <option value=\"MY\">Malaysia</option>\\\n                       <option value=\"MV\">Maldives</option>\\\n                       <option value=\"ML\">Mali</option>\\\n                       <option value=\"MT\">Malta</option>\\\n                       <option value=\"MH\">Marshall Islands</option>\\\n                       <option value=\"MQ\">Martinique</option>\\\n                       <option value=\"MR\">Mauritania</option>\\\n                       <option value=\"MU\">Mauritius</option>\\\n                       <option value=\"YT\">Mayotte</option>\\\n                       <option value=\"MX\">Mexico</option>\\\n                       <option value=\"FM\">Micronesia, Federated States Of</option>\\\n                       <option value=\"MD\">Moldova, Republic Of</option>\\\n                       <option value=\"MC\">Monaco</option>\\\n                       <option value=\"MN\">Mongolia</option>\\\n                       <option value=\"MS\">Montserrat</option>\\\n                       <option value=\"MA\">Morocco</option>\\\n                       <option value=\"MZ\">Mozambique</option>\\\n                       <option value=\"MM\">Myanmar</option>\\\n                       <option value=\"NA\">Namibia</option>\\\n                       <option value=\"NR\">Nauru</option>\\\n                       <option value=\"NP\">Nepal</option>\\\n                       <option value=\"NL\">Netherlands</option>\\\n                       <option value=\"AN\">Netherlands Antilles</option>\\\n                       <option value=\"NC\">New Caledonia</option>\\\n                       <option value=\"NZ\">New Zealand</option>\\\n                       <option value=\"NI\">Nicaragua</option>\\\n                       <option value=\"NE\">Niger</option>\\\n                       <option value=\"NG\">Nigeria</option>\\\n                       <option value=\"NU\">Niue</option>\\\n                       <option value=\"NF\">Norfolk Island</option>\\\n                       <option value=\"MP\">Northern Mariana Islands</option>\\\n                       <option value=\"NO\">Norway</option>\\\n                       <option value=\"OM\">Oman</option>\\\n                       <option value=\"PK\">Pakistan</option>\\\n                       <option value=\"PW\">Palau</option>\\\n                       <option value=\"PS\">Palestinian Territory, Occupied</option>\\\n                       <option value=\"PA\">Panama</option>\\\n                       <option value=\"PG\">Papua New Guinea</option>\\\n                       <option value=\"PY\">Paraguay</option>\\\n                       <option value=\"PE\">Peru</option>\\\n                       <option value=\"PH\">Philippines</option>\\\n                       <option value=\"PN\">Pitcairn</option>\\\n                       <option value=\"PL\">Poland</option>\\\n                       <option value=\"PT\">Portugal</option>\\\n                       <option value=\"PR\">Puerto Rico</option>\\\n                       <option value=\"QA\">Qatar</option>\\\n                       <option value=\"RE\">Reunion</option>\\\n                       <option value=\"RO\">Romania</option>\\\n                       <option value=\"RU\">Russian Federation</option>\\\n                       <option value=\"RW\">Rwanda</option>\\\n                       <option value=\"SH\">Saint Helena</option>\\\n                       <option value=\"KN\">Saint Kitts And Nevis</option>\\\n                       <option value=\"LC\">Saint Lucia</option>\\\n                       <option value=\"PM\">Saint Pierre And Miquelon</option>\\\n                       <option value=\"VC\">Saint Vincent And The Grenadines</option>\\\n                       <option value=\"WS\">Samoa</option>\\\n                       <option value=\"SM\">San Marino</option>\\\n                       <option value=\"ST\">Sao Tome And Principe</option>\\\n                       <option value=\"SA\">Saudi Arabia</option>\\\n                       <option value=\"SN\">Senegal</option>\\\n                       <option value=\"SC\">Seychelles</option>\\\n                       <option value=\"SL\">Sierra Leone</option>\\\n                       <option value=\"SG\">Singapore</option>\\\n                       <option value=\"SK\">Slovakia</option>\\\n                       <option value=\"SI\">Slovenia</option>\\\n                       <option value=\"SB\">Solomon Islands</option>\\\n                       <option value=\"SO\">Somalia</option>\\\n                       <option value=\"ZA\">South Africa</option>\\\n                       <option value=\"GS\">South Georgia</option>\\\n                       <option value=\"ES\">Spain</option>\\\n                       <option value=\"LK\">Sri Lanka</option>\\\n                       <option value=\"SD\">Sudan</option>\\\n                       <option value=\"SR\">Suriname</option>\\\n                       <option value=\"SJ\">Svalbard And Jan Mayen</option>\\\n                       <option value=\"SZ\">Swaziland</option>\\\n                       <option value=\"SE\">Sweden</option>\\\n                       <option value=\"CH\">Switzerland</option>\\\n                       <option value=\"SY\">Syrian Arab Republic</option>\\\n                       <option value=\"TW\">Taiwan, Province Of China</option>\\\n                       <option value=\"TJ\">Tajikistan</option>\\\n                       <option value=\"TZ\">Tanzania, United Republic Of</option>\\\n                       <option value=\"TH\">Thailand</option>\\\n                       <option value=\"TG\">Togo</option>\\\n                       <option value=\"TK\">Tokelau</option>\\\n                       <option value=\"TO\">Tonga</option>\\\n                       <option value=\"TT\">Trinidad And Tobago</option>\\\n                       <option value=\"TN\">Tunisia</option>\\\n                       <option value=\"TR\">Turkey</option>\\\n                       <option value=\"TM\">Turkmenistan</option>\\\n                       <option value=\"TC\">Turks And Caicos Islands</option>\\\n                       <option value=\"TV\">Tuvalu</option>\\\n                       <option value=\"UG\">Uganda</option>\\\n                       <option value=\"UA\">Ukraine</option>\\\n                       <option value=\"AE\">United Arab Emirates</option>\\\n                       <option value=\"GB\">United Kingdom</option>\\\n                       <option value=\"UM\">United States Minor Outlying Islands</option>\\\n                       <option value=\"UY\">Uruguay</option>\\\n                       <option value=\"UZ\">Uzbekistan</option>\\\n                       <option value=\"VU\">Vanuatu</option>\\\n                       <option value=\"VE\">Venezuela</option>\\\n                       <option value=\"VN\">Viet Nam</option>\\\n                       <option value=\"VG\">Virgin Islands, British</option>\\\n                       <option value=\"VI\">Virgin Islands, U.s.</option>\\\n                       <option value=\"WF\">Wallis And Futuna</option>\\\n                       <option value=\"EH\">Western Sahara</option>\\\n                       <option value=\"YE\">Yemen</option>\\\n                       <option value=\"YU\">Yugoslavia</option>\\\n                       <option value=\"ZM\">Zambia</option>\\\n                       <option value=\"ZW\">Zimbabwe</option>\\\n                     </select>',\n          scope: {\n            id: '&?',\n            ngModel: '='\n          }\n        };\n      });\n})();\n","(function() {\n  \"use strict\";\n\n  angular\n      .module('cn.ui')\n      .directive('csvUpload', csvUpload);\n\n  function csvUpload() {\n    return {\n      restrict: 'E',\n      scope: {\n        cnUploadPath: '=',\n        ngModel: '=',\n      },\n      link: Link,\n      controller: Upload,\n      controllerAs: 'vm',\n      bindToController: true,\n      template: '\\\n        <file-upload class=\"col-sm-6\"\\\n                     btn-text=\"Upload CSV\"\\\n                     accept=\".csv\"\\\n                     on-file-select=\"vm.uploadFile($files)\">\\\n        </file-upload>\\\n      '\n    };\n  }\n\n  function Link($scope, elem, attrs, ctrl) {\n    function csvUploadTag() {}\n    $scope.__tag = new csvUploadTag();\n\n    $scope.$watch('vm.ngModel', function(newVal, prevVal) {\n        if($scope.onChange) {\n          $scope.onChange({$value: newVal});\n        }\n        if ($scope.$parent.$parent.ngModel) {\n          $scope.$parent.$parent.ngModel.$setValidity('schemaForm', true);\n        }\n        if($scope.$parent.$parent.form.required){\n          $scope.$parent.$parent.ngModel.$setValidity('tv4-302', !_.isEmpty($scope.vm.ngModel));\n        }\n        if(!angular.equals(newVal, prevVal)) {\n          $scope.$parent.$parent.ngModel.$setDirty();\n        }\n      });\n  }\n\n  Upload.$inject = ['$q', '$http', '$sce', 'cfpLoadingBar', '$rootScope', 'EVENTS'];\n  function Upload($q, $http, $sce, cfpLoadingBar, $rootScope, EVENTS) {\n    var vm = this;\n\n    vm.uploadFile = uploadFile;\n\n    function uploadFile($files) {\n      var dfr = $q.defer();\n      dfr.promise.then(setModelValue, setError);\n\n      var formData = new FormData();\n      formData.append('csv', $files[0]);\n\n      $.ajax({\n        url: vm.cnUploadPath,\n        headers: $http.defaults.headers.common,\n        data: formData,\n        processData: false,\n        contentType: false,\n        type: 'POST',\n        success: dfr.resolve,\n        error: dfr.reject\n      });\n\n      cfpLoadingBar.start();\n    }\n\n    function setModelValue(response) {\n      cfpLoadingBar.complete();\n      vm.ngModel = response;\n    }\n\n    function setError(rawResp) {\n      var response = JSON.parse(rawResp.responseText);\n\n      $rootScope.$broadcast(EVENTS.httpError, {\n        status: response.status,\n        errors: [{data: response.error}]\n      });\n\n      cfpLoadingBar.complete();\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('cn.ui')\n    .directive('cnCurrencyFormat', cnCurrencyFormat);\n\n  function cnCurrencyFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnCurrencyFormatTag() {}\n      $scope.__tag = new cnCurrencyFormatTag();\n\n      if(!vm) return;\n\n      var format = attrs.cnCurrencyFormat;\n      var placeholder = attrs.cnCurrencyPlaceholder;\n\n      // Clean up event handlers\n      $scope.$on('$destroy', function() {\n        elem.off('blur', handleBlur);\n      });\n\n      activate();\n\n      //////////\n\n      function activate() {\n        if(placeholder) {\n          placeholder = formatVal(placeholder);\n          elem.attr('placeholder', placeholder);\n        }\n\n        elem.on('blur', handleBlur);\n\n        vm.$parsers.unshift(parseVal);\n        vm.$formatters.unshift(function(val) {\n          vm.$setDirty();\n          return formatVal(val);\n        });\n      }\n\n      function handleBlur(el) {\n        if(/\\.\\d$/.test(elem[0].value)) return elem[0].value += '0';\n\n        var overflow = elem[0].value.match(/(\\d*\\.\\d{2})(.+)/);\n        if(overflow) elem[0].value = overflow[1];\n      }\n\n      function parseVal(val) {\n        if(!val) return val;\n        const parsed = parseFloat(val.replace(/\\,/g, ''));\n        if(format === 'cents') {\n          return _.multiply(parsed, 100);\n        }\n        if(format === 'microcents') {\n          return _.multiply(parsed, 1000000);\n        }\n        return parsed;\n      }\n\n      function formatVal(val) {\n        if(!val) val = '';\n        else if(format === 'cents') {\n          val = _.floor(val / 100, 2) || '';\n        }\n        else if(format === 'microcents') {\n          val = _.floor(val / 1000000, 2) || '';\n        }\n        else {\n          val = _.floor(val, 2) || '';\n        }\n        return /\\.\\d$/.test(val) ? val + '0' : val;\n      }\n    }\n  }\n\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('fileUpload', function() {\n        return {\n          restrict: 'E',\n          replace: true,\n          scope: {\n            btnStyle: '@',\n            cnDisabled: '=',\n            iconStyle: '@',\n            callback: '&onFileSelect',\n            inputId: '@',\n            btnText: '@',\n            accept: '@'\n          },\n          template: '<div class=\"file-wrapper\">\\\n                       <button class=\"btn btn-file {{btnStyle}}\" ng-disabled=\"cnDisabled\">\\\n                         <i ng-if=\"iconStyle\" class=\"{{iconStyle}}\"></i> {{btnText}}\\\n                       </button>\\\n                       <input type=\"file\" id=\"{{inputId}}\" class=\"form-control\" accept=\"{{accept}}\"\\\n                              ng-file-select=\"onFileSelect($files)\"/>\\\n                     </div>',\n          compile: function(elem, attrs) {\n            attrs.btnStyle = /btn-(primary|success|info|warning|danger|link)/.test(attrs.btnStyle) ?\n                attrs.btnStyle : attrs.btnStyle + ' btn-default';\n            attrs.inputId = attrs.inputId || ('file-' + _.uniqueId());\n            attrs.btnText = attrs.btnText || 'Choose a file...';\n            if (attrs.cnDisabled) {\n              attrs.disabled = true;\n            }\n\n            return function link($scope, elem) {\n              function fileUploadTag() {}\n              $scope.__tag = new fileUploadTag();\n\n              var btn = elem.find('button'),\n                  file = elem.find('input');\n\n              btn.on('click', handleClick);\n\n              // Clean up event handlers and closure variables\n              $scope.$on('$destroy', function() {\n                btn.off('click', handleClick);\n                btn = null;\n                file = null;\n              });\n\n              function handleClick() {\n                file.click();\n              }\n\n              $scope.onFileSelect = function($files) {\n                $scope.callback({$files: $files});\n              };\n            };\n          }\n        };\n      });\n})();\n","(function() {\n  'use strict';\n\n  angular\n  .module('cn.ui')\n  .filter('cnFilter', cnFilter)\n  .filter('titleCase', titleCase)\n  .filter('range', range)\n  .filter('toDateObject', toDateObject)\n  .filter('trustAs', trustAs)\n  .filter('trustAsHtml', trustAsHtml)\n  .filter('selectedItems', selectedItems)\n  .filter('momentjs', momentjs)\n  .filter('percent', percent)\n  .filter('camelCase', camelCase)\n  .filter('sortBy', sortBy)\n  .filter('truncate', truncate)\n  .filter('toNumber', toNumber)\n  .filter('toDecimal', toDecimal)\n  .filter('stripHtml', stripHtml);\n\n  cnFilter.$inject = ['$filter'];\n  function cnFilter($filter) {\n    return function(array, expression) {\n      return $filter('filter')(array, expression, function(actual, expected) {\n        if (angular.isUndefined(actual)) {\n          // No substring matching against `undefined`\n          return false;\n        }\n        if ((actual === null) || (expected === null)) {\n          // No substring matching against `null`; only match against `null`\n          return actual === expected;\n        }\n        if (angular.isObject(expected) || (angular.isObject(actual) && !hasCustomToString(actual))) {\n          // Should not compare primitives against objects, unless they have custom `toString` method\n          return false;\n        }\n\n        actual = angular.lowercase('' + actual);\n        expected = angular.lowercase('' + expected).split(' ');\n        var match = true;\n        _.each(expected, function(str) {\n          if(actual.indexOf(str) === -1) match = false;\n        });\n        return match;\n      });\n\n      function hasCustomToString(obj) {\n        return angular.isFunction(obj.toString) && obj.toString !== Object.prototype.toString;\n      }\n    };\n  }\n\n  function titleCase() {\n    return function(s) {\n      s = (s === undefined || s === null) ? '' : s;\n      return s.toString().toLowerCase().replace(/_|-/g, ' ').replace(/\\b([a-z])/g, function(ch) {\n        return ch.toUpperCase();\n      });\n    };\n  }\n\n  function range() {\n    return function(input, start, end) {\n      return input = _.range(start, end);\n    };\n  }\n\n  function toDateObject() {\n    return function(dateString) {\n      return new Date(moment(dateString).toISOString());\n    };\n  }\n\n  trustAs.$inject = ['$sce'];\n  function trustAs($sce) {\n    return function(val) {\n      return $sce.trustAs(val);\n    };\n  }\n\n  trustAsHtml.$inject = ['$sce'];\n  function trustAsHtml($sce) {\n    return function(val) {\n      return $sce.trustAsHtml(val);\n    };\n  }\n\n  function selectedItems() {\n    return function(list, selected) {\n      if(!selected || !selected.length) return list;\n\n      return list.filter(function(item) {\n        var match = false;\n        selected.forEach(function(filter) {\n          var compare = item[filter.key];\n          if(_.isObject(compare)) {\n            var tmp = {};\n            tmp[filter.childKey || filter.key] = filter.value;\n            if(_.find(compare, tmp)) {\n              return match = true;\n            }\n          }\n          else {\n            if(compare == filter.value) {\n              return match = true;\n            }\n          }\n        });\n        return match;\n      });\n    };\n  }\n\n  function momentjs() {\n    return function(input, formatString) {\n      formatString = formatString || '';\n      var m = moment(input),\n          out = '';\n\n      if(m && m.isValid()) {\n        if(formatString == 'calendar') {\n          out = m.calendar();\n        } else {\n          out = m.format(formatString);\n        }\n      }\n\n      return out;\n    };\n  }\n\n  function percent() {\n    return function(input, multiplier) {\n      // defaults to 10000 to preserve previous logic\n      multiplier = multiplier || 10000;\n      var numericInput = parseFloat(input);\n      var percent;\n\n      if(typeof numericInput === 'number') {\n        // old logic\n        //percent = Math.round(numericInput * 10000) / 100;\n        percent = Math.round(numericInput * multiplier) / 100;\n\n        return percent + '%';\n      }\n    };\n  }\n\n  function camelCase() {\n    var SPECIAL_CHARS_REGEXP = /([\\:\\-\\_]+(.))/g;\n    var MOZ_HACK_REGEXP = /^moz([A-Z])/;\n\n    return function(input) {\n      return input.\n        replace(SPECIAL_CHARS_REGEXP,function(_, separator, letter, offset) {\n          return offset ? letter.toUpperCase() : letter;\n        }).\n        replace(MOZ_HACK_REGEXP, 'Moz$1');\n    };\n  }\n\n  function sortBy() {\n    return function(obj, sortKey, direction) {\n\n      direction = direction || 'asc';\n      sortKey = sortKey;\n\n      var array = [];\n      Object.keys(obj).forEach(function(key) {\n        array.push(obj[key]);\n      });\n\n      var getBySortKey = function(obj) {\n        return obj[sortKey];\n      };\n\n      if(direction == 'asc') {\n        array.sort(function(a, b) {\n\n          if(getBySortKey(a) > getBySortKey(b)) {\n            return 1;\n          }\n          if(getBySortKey(a) < getBySortKey(b)) {\n            return -1;\n          }\n          // a must be equal to b\n          return 0;\n        });\n      } else {\n        array.sort(function(a, b) {\n          return getBySortKey(b) - getBySortKey(a);\n        });\n      }\n\n      return array;\n    };\n  }\n\n  function truncate() {\n    return function(input, chars, breakOnWord) {\n      if(isNaN(chars)) return input;\n      if(chars <= 0) return '';\n      if(input && input.length >= chars) {\n        input = input.substring(0, chars);\n\n        if(!breakOnWord) {\n          var lastspace = input.lastIndexOf(' ');\n          //get last space\n          if(lastspace !== -1) {\n            input = input.substr(0, lastspace);\n          }\n        } else {\n          while(input.charAt(input.length - 1) == ' ') {\n            input = input.substr(0, input.length - 1);\n          }\n        }\n        return input + '...';\n      }\n      return input;\n    };\n  }\n\n  function toNumber() {\n    return function(string){\n      var num = Number(string);\n      return isNaN(num) ? 0: num;\n    };\n  }\n\n  function toDecimal() {\n    return function(number, places){\n      var string, position, whole, decimal, float;\n\n      if(!number) {\n        return;\n      }\n\n      string  = number.toString();\n\n      if(string.length - places >= 0){\n        position = string.length - places > 0? string.length - places: 0;\n        whole = string.substring(0, position);\n        decimal = string.substring(position);\n        float = whole + '.' + decimal;\n      }else{\n        return number;\n      }\n      return Number(float);\n    };\n  }\n\n  function stripHtml() {\n    return function(text) {\n      return  text ? String(text).replace(/<[^>]+>/gm, '') : '';\n    };\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('cnMastHead', cnMastHead);\n\n  function cnMastHead() {\n    return {\n      restrict: 'E',\n      template: `\n        <div class=\"cn-heading cn-mast-head\">\n          <div class=\"cn-mast-head-inner\">\n            <div class=\"cn-mast-head-main\">\n              <div class=\"cn-heading-title\">\n                <a ng-if=\"vm.config.backState\"\n                   class=\"cn-heading-back\"\n                   ui-sref=\"{{vm.config.backState}}\">\n                  <i ng-show=\"vm.config.backState\" class=\"icn-back\"></i>\n                </a>\n                <h1 ng-hide=\"vm.config.dropdown\">\n                  {{vm.config.title}}\n                </h1>\n                <h1 ng-show=\"vm.config.dropdown\" data-toggle=\"dropdown\">\n                  <a>\n                    {{vm.config.title}}\n                    <i ng-show=\"vm.config.dropdown\" class=\"icn-caret\"></i>\n                  </a>\n                </h1>\n                <ul ng-if=\"vm.config.dropdown\"\n                    class=\"dropdown-menu row\"\n                    ng-class=\"vm.config.dropdown.style\"\n                    style=\"width: {{vm.config.dropdown.lists.length * 250}}px\"\n                    role=\"menu\">\n                  <div ng-repeat=\"list in vm.config.dropdown.lists\"\n                       style=\"width: 250px\">\n                    <li class=\"{{list.style}}\">\n                      <div class=\"input-group\">\n                        <input ng-model=\"list.filter\"\n                               class=\"form-control\"\n                               placeholder=\"{{list.name}}\"/>\n                        <span class=\"input-group-addon\">\n                          <i class=\"icn-search\"></i>\n                        </span>\n                      </div>\n                    </li>\n                    <li class=\"divider\"></li>\n                    <li ng-repeat=\"item in list.items | filter:list.filter\"\n                        class=\"{{list.style}} {{item.style}}\">\n                      <a ng-show=\"item.name\"\n                         ng-click=\"list.handler(item)\"\n                         ng-class=\"{'selected': list.isSelected(item)}\">{{item.name}}</a>\n                    </li>\n                  </div>\n                </ul>\n              </div>\n  \n              <div ng-show=\"vm.config.options\"\n                   class=\"pull-right btn-options\">\n                <span ng-repeat=\"btn in vm.config.options\">\n                  <a ng-if=\"btn.state\"\n                     class=\"btn btn-sm btn-transparent\"\n                     ui-sref=\"{{btn.state}}\"\n                     title=\"{{btn.title}}\">\n                    <i class=\"{{btn.icon}}\"/>\n                  </a>\n                  <a ng-if=\"btn.href\"\n                     class=\"btn btn-sm btn-transparent\"\n                     ng-href=\"{{btn.href}}\"\n                     title=\"{{btn.title}}\">\n                    <i class=\"{{btn.icon}}\"/>\n                  </a>\n                </span>\n              </div>\n            </div>\n          </div>\n          <div class=\"cn-mast-head-sub\">\n            <div class=\"cn-mast-head-inner\">\n              <ul class=\"tabs\" ng-if=\"vm.config.tabs && vm.config.tabs.length\">\n                <li ng-repeat=\"tab in vm.config.tabs\"\n                    ng-class=\"{active: tab.active}\"\n                    class=\"{{tab.style}}\">\n                  <a ng-if=\"tab.state\"\n                     ui-sref=\"{{tab.state}}\">\n                    <i ng-show=\"tab.active\" class=\"{{tab.icon}}\"/>\n                    {{tab.name}}\n                  </a>\n                  <span ng-if=\"!tab.state\">\n                    {{tab.name}}\n                  </span>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class=\"cn-mast-actions\">\n            <div class=\"cn-mast-head-inner\">\n              <div class=\"cn-actions\"\n                   ng-if=\"vm.floater\"\n                   ng-mouseenter=\"vm.toggleFloaters(false)\"\n                   ng-mouseleave=\"vm.toggleFloaters(true)\">\n                <floating-action-button\n                  ng-mouseenter=\"vm.floater.showTitle = true\"\n                  ng-mouseleave=\"vm.floater.showTitle = false\">\n                  <a class=\"btn {{vm.hideFloaters ? '' : vm.floater.style}}\"\n                     ui-sref=\"{{vm.floater.state}}\">\n                     <i ng-show=\"vm.floater.icon && !vm.hideFloaters\"\n                        class=\"{{vm.floater.icon}}\"></i>\n                     <span ng-show=\"vm.floater.text && vm.hideFloaters\" class=\"text\">\n                       {{vm.floater.text}}\n                     </span>\n                     <span ng-hide=\"vm.floater.icon || vm.floater.text || vm.hideFloaters\">\n                       {{vm.floater.symbol || '+'}}\n                     </span>\n                     <span ng-show=\"vm.hideFloaters\">+</span>\n                  </a>\n                  <span class=\"fab-title\"\n                        ng-show=\"vm.floater.showTitle && vm.floater.title\">\n                    {{vm.floater.title}}\n                  </span>\n                </floating-action-button>\n                <div class=\"cn-floaters\" style=\"height: {{vm.floatersHeight}}\">\n                  <div class=\"cn-floaters-inner\">\n                    <floating-action-button\n                      ng-repeat=\"btn in vm.floaters\"\n                      ng-mouseenter=\"btn.showTitle = true\"\n                      ng-mouseleave=\"btn.showTitle = false\">\n                      <a ng-show=\"btn.state\"\n                         class=\"btn {{btn.style}}\"\n                         ui-sref=\"{{btn.state}}\">\n                         <i ng-show=\"btn.icon\" class=\"{{btn.icon}}\"></i>\n                         <span ng-show=\"btn.text\" class=\"text\">{{btn.text}}</span>\n                         <span ng-show=\"btn.symbol\">{{btn.symbol}}</span>\n                       </a>\n                      <span class=\"fab-title\"\n                            ng-show=\"btn.showTitle && btn.title\">\n                        {{btn.title}}\n                      </span>\n                    </floating-action-button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>`,\n      scope: {\n        config: '='\n      },\n      link: (scope, elem) => {\n        scope.vm.elem = elem;\n      },\n      controller: MastHead,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n  }\n\n  function MastHead($scope) {\n    'ngInject';\n\n    function cnMastHeadTag() {}\n    $scope.__tag = new cnMastHeadTag();\n\n    // Aggressive destroy\n    $scope.$on('$destroy', () => {\n      _.forOwn(vm, (_v, k, c) => c[k] = null);\n      vm = null;\n    });\n\n    let vm = this;\n    vm.floater = _.first(vm.config.actions);\n    vm.floaters = _.rest(vm.config.actions);\n    vm.floatersHeight = 0;\n    vm.hideFloaters = true;\n    vm.toggleFloaters = toggleFloaters;\n\n    ////////\n\n    function toggleFloaters(hide) {\n      vm.floatersHeight = hide ? 0 : vm.elem.find('.cn-floaters-inner').outerHeight() + 'px';\n      vm.hideFloaters = hide;\n    }\n  }\n})();\n","'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui', ['angularFileUpload', 'toaster', 'ngAnimate', 'angular-md5', 'uuid4']);\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('checkbox', function () {\n    return {\n      restrict: 'C',\n      link: function link($scope, elem) {\n        function cnCheckboxTag() {}\n        $scope.__tag = new cnCheckboxTag();\n\n        if (elem.prop('tagName') === 'INPUT') {\n          elem.after('<span></span>');\n        } else {\n          elem.find('input[type=checkbox]').after('<span></span>');\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('countrySelect', function () {\n    return {\n      link: function link(scope) {\n        function countrySelectTag() {}\n        scope.__tag = new countrySelectTag();\n      },\n      restrict: 'E',\n      template: '<label for=\"{{id || \\'country\\'}}\">Country</label>\\\n                     <select id=\"{{id || \\'country\\'}}\" ng-model=\"ngModel\" class=\"form-control\">\\\n                       <option value=\"US\">United States</option>\\\n                       <option value=\"AF\">Afghanistan</option>\\\n                       <option value=\"AL\">Albania</option>\\\n                       <option value=\"DZ\">Algeria</option>\\\n                       <option value=\"AS\">American Samoa</option>\\\n                       <option value=\"AD\">Andorra</option>\\\n                       <option value=\"AO\">Angola</option>\\\n                       <option value=\"AI\">Anguilla</option>\\\n                       <option value=\"AQ\">Antarctica</option>\\\n                       <option value=\"AG\">Antigua And Barbuda</option>\\\n                       <option value=\"AR\">Argentina</option>\\\n                       <option value=\"AM\">Armenia</option>\\\n                       <option value=\"AW\">Aruba</option>\\\n                       <option value=\"AU\">Australia</option>\\\n                       <option value=\"AT\">Austria</option>\\\n                       <option value=\"AZ\">Azerbaijan</option>\\\n                       <option value=\"BS\">Bahamas</option>\\\n                       <option value=\"BH\">Bahrain</option>\\\n                       <option value=\"BD\">Bangladesh</option>\\\n                       <option value=\"BB\">Barbados</option>\\\n                       <option value=\"BY\">Belarus</option>\\\n                       <option value=\"BE\">Belgium</option>\\\n                       <option value=\"BZ\">Belize</option>\\\n                       <option value=\"BJ\">Benin</option>\\\n                       <option value=\"BM\">Bermuda</option>\\\n                       <option value=\"BT\">Bhutan</option>\\\n                       <option value=\"BO\">Bolivia</option>\\\n                       <option value=\"BA\">Bosnia And Herzegovina</option>\\\n                       <option value=\"BW\">Botswana</option>\\\n                       <option value=\"BV\">Bouvet Island</option>\\\n                       <option value=\"BR\">Brazil</option>\\\n                       <option value=\"IO\">British Indian Ocean Territory</option>\\\n                       <option value=\"BN\">Brunei Darussalam</option>\\\n                       <option value=\"BG\">Bulgaria</option>\\\n                       <option value=\"BF\">Burkina Faso</option>\\\n                       <option value=\"BI\">Burundi</option>\\\n                       <option value=\"KH\">Cambodia</option>\\\n                       <option value=\"CM\">Cameroon</option>\\\n                       <option value=\"CA\">Canada</option>\\\n                       <option value=\"CV\">Cape Verde</option>\\\n                       <option value=\"KY\">Cayman Islands</option>\\\n                       <option value=\"CF\">Central African Republic</option>\\\n                       <option value=\"TD\">Chad</option>\\\n                       <option value=\"CL\">Chile</option>\\\n                       <option value=\"CN\">China</option>\\\n                       <option value=\"CX\">Christmas Island</option>\\\n                       <option value=\"CC\">Cocos (keeling) Islands</option>\\\n                       <option value=\"CO\">Colombia</option>\\\n                       <option value=\"KM\">Comoros</option>\\\n                       <option value=\"CG\">Congo</option>\\\n                       <option value=\"CK\">Cook Islands</option>\\\n                       <option value=\"CR\">Costa Rica</option>\\\n                       <option value=\"CI\">Cote D Ivoire</option>\\\n                       <option value=\"HR\">Croatia</option>\\\n                       <option value=\"CU\">Cuba</option>\\\n                       <option value=\"CY\">Cyprus</option>\\\n                       <option value=\"CZ\">Czech Republic</option>\\\n                       <option value=\"DK\">Denmark</option>\\\n                       <option value=\"DJ\">Djibouti</option>\\\n                       <option value=\"DM\">Dominica</option>\\\n                       <option value=\"DO\">Dominican Republic</option>\\\n                       <option value=\"TP\">East Timor</option>\\\n                       <option value=\"EC\">Ecuador</option>\\\n                       <option value=\"EG\">Egypt</option>\\\n                       <option value=\"SV\">El Salvador</option>\\\n                       <option value=\"GQ\">Equatorial Guinea</option>\\\n                       <option value=\"ER\">Eritrea</option>\\\n                       <option value=\"EE\">Estonia</option>\\\n                       <option value=\"ET\">Ethiopia</option>\\\n                       <option value=\"FK\">Falkland Islands (malvinas)</option>\\\n                       <option value=\"FO\">Faroe Islands</option>\\\n                       <option value=\"FJ\">Fiji</option>\\\n                       <option value=\"FI\">Finland</option>\\\n                       <option value=\"FR\">France</option>\\\n                       <option value=\"GF\">French Guiana</option>\\\n                       <option value=\"PF\">French Polynesia</option>\\\n                       <option value=\"TF\">French Southern Territories</option>\\\n                       <option value=\"GA\">Gabon</option>\\\n                       <option value=\"GM\">Gambia</option>\\\n                       <option value=\"GE\">Georgia</option>\\\n                       <option value=\"DE\">Germany</option>\\\n                       <option value=\"GH\">Ghana</option>\\\n                       <option value=\"GI\">Gibraltar</option>\\\n                       <option value=\"GR\">Greece</option>\\\n                       <option value=\"GL\">Greenland</option>\\\n                       <option value=\"GD\">Grenada</option>\\\n                       <option value=\"GP\">Guadeloupe</option>\\\n                       <option value=\"GU\">Guam</option>\\\n                       <option value=\"GT\">Guatemala</option>\\\n                       <option value=\"GN\">Guinea</option>\\\n                       <option value=\"GW\">Guinea-bissau</option>\\\n                       <option value=\"GY\">Guyana</option>\\\n                       <option value=\"HT\">Haiti</option>\\\n                       <option value=\"VA\">Holy See (vatican City State)</option>\\\n                       <option value=\"HN\">Honduras</option>\\\n                       <option value=\"HK\">Hong Kong</option>\\\n                       <option value=\"HU\">Hungary</option>\\\n                       <option value=\"IS\">Iceland</option>\\\n                       <option value=\"IN\">India</option>\\\n                       <option value=\"ID\">Indonesia</option>\\\n                       <option value=\"IR\">Iran, Islamic Republic Of</option>\\\n                       <option value=\"IQ\">Iraq</option>\\\n                       <option value=\"IE\">Ireland</option>\\\n                       <option value=\"IL\">Israel</option>\\\n                       <option value=\"IT\">Italy</option>\\\n                       <option value=\"JM\">Jamaica</option>\\\n                       <option value=\"JP\">Japan</option>\\\n                       <option value=\"JO\">Jordan</option>\\\n                       <option value=\"KZ\">Kazakstan</option>\\\n                       <option value=\"KE\">Kenya</option>\\\n                       <option value=\"KI\">Kiribati</option>\\\n                       <option value=\"KP\">Korea Democratic Peoples Republic Of</option>\\\n                       <option value=\"KR\">Korea Republic Of</option>\\\n                       <option value=\"KW\">Kuwait</option>\\\n                       <option value=\"KG\">Kyrgyzstan</option>\\\n                       <option value=\"LA\">Lao Peoples Democratic Republic</option>\\\n                       <option value=\"LV\">Latvia</option>\\\n                       <option value=\"LB\">Lebanon</option>\\\n                       <option value=\"LS\">Lesotho</option>\\\n                       <option value=\"LR\">Liberia</option>\\\n                       <option value=\"LY\">Libyan Arab Jamahiriya</option>\\\n                       <option value=\"LI\">Liechtenstein</option>\\\n                       <option value=\"LT\">Lithuania</option>\\\n                       <option value=\"LU\">Luxembourg</option>\\\n                       <option value=\"MO\">Macau</option>\\\n                       <option value=\"MK\">Macedonia</option>\\\n                       <option value=\"MG\">Madagascar</option>\\\n                       <option value=\"MW\">Malawi</option>\\\n                       <option value=\"MY\">Malaysia</option>\\\n                       <option value=\"MV\">Maldives</option>\\\n                       <option value=\"ML\">Mali</option>\\\n                       <option value=\"MT\">Malta</option>\\\n                       <option value=\"MH\">Marshall Islands</option>\\\n                       <option value=\"MQ\">Martinique</option>\\\n                       <option value=\"MR\">Mauritania</option>\\\n                       <option value=\"MU\">Mauritius</option>\\\n                       <option value=\"YT\">Mayotte</option>\\\n                       <option value=\"MX\">Mexico</option>\\\n                       <option value=\"FM\">Micronesia, Federated States Of</option>\\\n                       <option value=\"MD\">Moldova, Republic Of</option>\\\n                       <option value=\"MC\">Monaco</option>\\\n                       <option value=\"MN\">Mongolia</option>\\\n                       <option value=\"MS\">Montserrat</option>\\\n                       <option value=\"MA\">Morocco</option>\\\n                       <option value=\"MZ\">Mozambique</option>\\\n                       <option value=\"MM\">Myanmar</option>\\\n                       <option value=\"NA\">Namibia</option>\\\n                       <option value=\"NR\">Nauru</option>\\\n                       <option value=\"NP\">Nepal</option>\\\n                       <option value=\"NL\">Netherlands</option>\\\n                       <option value=\"AN\">Netherlands Antilles</option>\\\n                       <option value=\"NC\">New Caledonia</option>\\\n                       <option value=\"NZ\">New Zealand</option>\\\n                       <option value=\"NI\">Nicaragua</option>\\\n                       <option value=\"NE\">Niger</option>\\\n                       <option value=\"NG\">Nigeria</option>\\\n                       <option value=\"NU\">Niue</option>\\\n                       <option value=\"NF\">Norfolk Island</option>\\\n                       <option value=\"MP\">Northern Mariana Islands</option>\\\n                       <option value=\"NO\">Norway</option>\\\n                       <option value=\"OM\">Oman</option>\\\n                       <option value=\"PK\">Pakistan</option>\\\n                       <option value=\"PW\">Palau</option>\\\n                       <option value=\"PS\">Palestinian Territory, Occupied</option>\\\n                       <option value=\"PA\">Panama</option>\\\n                       <option value=\"PG\">Papua New Guinea</option>\\\n                       <option value=\"PY\">Paraguay</option>\\\n                       <option value=\"PE\">Peru</option>\\\n                       <option value=\"PH\">Philippines</option>\\\n                       <option value=\"PN\">Pitcairn</option>\\\n                       <option value=\"PL\">Poland</option>\\\n                       <option value=\"PT\">Portugal</option>\\\n                       <option value=\"PR\">Puerto Rico</option>\\\n                       <option value=\"QA\">Qatar</option>\\\n                       <option value=\"RE\">Reunion</option>\\\n                       <option value=\"RO\">Romania</option>\\\n                       <option value=\"RU\">Russian Federation</option>\\\n                       <option value=\"RW\">Rwanda</option>\\\n                       <option value=\"SH\">Saint Helena</option>\\\n                       <option value=\"KN\">Saint Kitts And Nevis</option>\\\n                       <option value=\"LC\">Saint Lucia</option>\\\n                       <option value=\"PM\">Saint Pierre And Miquelon</option>\\\n                       <option value=\"VC\">Saint Vincent And The Grenadines</option>\\\n                       <option value=\"WS\">Samoa</option>\\\n                       <option value=\"SM\">San Marino</option>\\\n                       <option value=\"ST\">Sao Tome And Principe</option>\\\n                       <option value=\"SA\">Saudi Arabia</option>\\\n                       <option value=\"SN\">Senegal</option>\\\n                       <option value=\"SC\">Seychelles</option>\\\n                       <option value=\"SL\">Sierra Leone</option>\\\n                       <option value=\"SG\">Singapore</option>\\\n                       <option value=\"SK\">Slovakia</option>\\\n                       <option value=\"SI\">Slovenia</option>\\\n                       <option value=\"SB\">Solomon Islands</option>\\\n                       <option value=\"SO\">Somalia</option>\\\n                       <option value=\"ZA\">South Africa</option>\\\n                       <option value=\"GS\">South Georgia</option>\\\n                       <option value=\"ES\">Spain</option>\\\n                       <option value=\"LK\">Sri Lanka</option>\\\n                       <option value=\"SD\">Sudan</option>\\\n                       <option value=\"SR\">Suriname</option>\\\n                       <option value=\"SJ\">Svalbard And Jan Mayen</option>\\\n                       <option value=\"SZ\">Swaziland</option>\\\n                       <option value=\"SE\">Sweden</option>\\\n                       <option value=\"CH\">Switzerland</option>\\\n                       <option value=\"SY\">Syrian Arab Republic</option>\\\n                       <option value=\"TW\">Taiwan, Province Of China</option>\\\n                       <option value=\"TJ\">Tajikistan</option>\\\n                       <option value=\"TZ\">Tanzania, United Republic Of</option>\\\n                       <option value=\"TH\">Thailand</option>\\\n                       <option value=\"TG\">Togo</option>\\\n                       <option value=\"TK\">Tokelau</option>\\\n                       <option value=\"TO\">Tonga</option>\\\n                       <option value=\"TT\">Trinidad And Tobago</option>\\\n                       <option value=\"TN\">Tunisia</option>\\\n                       <option value=\"TR\">Turkey</option>\\\n                       <option value=\"TM\">Turkmenistan</option>\\\n                       <option value=\"TC\">Turks And Caicos Islands</option>\\\n                       <option value=\"TV\">Tuvalu</option>\\\n                       <option value=\"UG\">Uganda</option>\\\n                       <option value=\"UA\">Ukraine</option>\\\n                       <option value=\"AE\">United Arab Emirates</option>\\\n                       <option value=\"GB\">United Kingdom</option>\\\n                       <option value=\"UM\">United States Minor Outlying Islands</option>\\\n                       <option value=\"UY\">Uruguay</option>\\\n                       <option value=\"UZ\">Uzbekistan</option>\\\n                       <option value=\"VU\">Vanuatu</option>\\\n                       <option value=\"VE\">Venezuela</option>\\\n                       <option value=\"VN\">Viet Nam</option>\\\n                       <option value=\"VG\">Virgin Islands, British</option>\\\n                       <option value=\"VI\">Virgin Islands, U.s.</option>\\\n                       <option value=\"WF\">Wallis And Futuna</option>\\\n                       <option value=\"EH\">Western Sahara</option>\\\n                       <option value=\"YE\">Yemen</option>\\\n                       <option value=\"YU\">Yugoslavia</option>\\\n                       <option value=\"ZM\">Zambia</option>\\\n                       <option value=\"ZW\">Zimbabwe</option>\\\n                     </select>',\n      scope: {\n        id: '&?',\n        ngModel: '='\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  \"use strict\";\n\n  angular.module('cn.ui').directive('csvUpload', csvUpload);\n\n  function csvUpload() {\n    return {\n      restrict: 'E',\n      scope: {\n        cnUploadPath: '=',\n        ngModel: '='\n      },\n      link: Link,\n      controller: Upload,\n      controllerAs: 'vm',\n      bindToController: true,\n      template: '\\\n        <file-upload class=\"col-sm-6\"\\\n                     btn-text=\"Upload CSV\"\\\n                     accept=\".csv\"\\\n                     on-file-select=\"vm.uploadFile($files)\">\\\n        </file-upload>\\\n      '\n    };\n  }\n\n  function Link($scope, elem, attrs, ctrl) {\n    function csvUploadTag() {}\n    $scope.__tag = new csvUploadTag();\n\n    $scope.$watch('vm.ngModel', function (newVal, prevVal) {\n      if ($scope.onChange) {\n        $scope.onChange({ $value: newVal });\n      }\n      if ($scope.$parent.$parent.ngModel) {\n        $scope.$parent.$parent.ngModel.$setValidity('schemaForm', true);\n      }\n      if ($scope.$parent.$parent.form.required) {\n        $scope.$parent.$parent.ngModel.$setValidity('tv4-302', !_.isEmpty($scope.vm.ngModel));\n      }\n      if (!angular.equals(newVal, prevVal)) {\n        $scope.$parent.$parent.ngModel.$setDirty();\n      }\n    });\n  }\n\n  Upload.$inject = ['$q', '$http', '$sce', 'cfpLoadingBar', '$rootScope', 'EVENTS'];\n  function Upload($q, $http, $sce, cfpLoadingBar, $rootScope, EVENTS) {\n    var vm = this;\n\n    vm.uploadFile = uploadFile;\n\n    function uploadFile($files) {\n      var dfr = $q.defer();\n      dfr.promise.then(setModelValue, setError);\n\n      var formData = new FormData();\n      formData.append('csv', $files[0]);\n\n      $.ajax({\n        url: vm.cnUploadPath,\n        headers: $http.defaults.headers.common,\n        data: formData,\n        processData: false,\n        contentType: false,\n        type: 'POST',\n        success: dfr.resolve,\n        error: dfr.reject\n      });\n\n      cfpLoadingBar.start();\n    }\n\n    function setModelValue(response) {\n      cfpLoadingBar.complete();\n      vm.ngModel = response;\n    }\n\n    function setError(rawResp) {\n      var response = JSON.parse(rawResp.responseText);\n\n      $rootScope.$broadcast(EVENTS.httpError, {\n        status: response.status,\n        errors: [{ data: response.error }]\n      });\n\n      cfpLoadingBar.complete();\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnCurrencyFormat', cnCurrencyFormat);\n\n  function cnCurrencyFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnCurrencyFormatTag() {}\n      $scope.__tag = new cnCurrencyFormatTag();\n\n      if (!vm) return;\n\n      var format = attrs.cnCurrencyFormat;\n      var placeholder = attrs.cnCurrencyPlaceholder;\n\n      // Clean up event handlers\n      $scope.$on('$destroy', function () {\n        elem.off('blur', handleBlur);\n      });\n\n      activate();\n\n      //////////\n\n      function activate() {\n        if (placeholder) {\n          placeholder = formatVal(placeholder);\n          elem.attr('placeholder', placeholder);\n        }\n\n        elem.on('blur', handleBlur);\n\n        vm.$parsers.unshift(parseVal);\n        vm.$formatters.unshift(function (val) {\n          vm.$setDirty();\n          return formatVal(val);\n        });\n      }\n\n      function handleBlur(el) {\n        if (/\\.\\d$/.test(elem[0].value)) return elem[0].value += '0';\n\n        var overflow = elem[0].value.match(/(\\d*\\.\\d{2})(.+)/);\n        if (overflow) elem[0].value = overflow[1];\n      }\n\n      function parseVal(val) {\n        if (!val) return val;\n        var parsed = parseFloat(val.replace(/\\,/g, ''));\n        if (format === 'cents') {\n          return _.multiply(parsed, 100);\n        }\n        if (format === 'microcents') {\n          return _.multiply(parsed, 1000000);\n        }\n        return parsed;\n      }\n\n      function formatVal(val) {\n        if (!val) val = '';else if (format === 'cents') {\n          val = _.floor(val / 100, 2) || '';\n        } else if (format === 'microcents') {\n          val = _.floor(val / 1000000, 2) || '';\n        } else {\n          val = _.floor(val, 2) || '';\n        }\n        return (/\\.\\d$/.test(val) ? val + '0' : val\n        );\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('fileUpload', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        btnStyle: '@',\n        cnDisabled: '=',\n        iconStyle: '@',\n        callback: '&onFileSelect',\n        inputId: '@',\n        btnText: '@',\n        accept: '@'\n      },\n      template: '<div class=\"file-wrapper\">\\\n                       <button class=\"btn btn-file {{btnStyle}}\" ng-disabled=\"cnDisabled\">\\\n                         <i ng-if=\"iconStyle\" class=\"{{iconStyle}}\"></i> {{btnText}}\\\n                       </button>\\\n                       <input type=\"file\" id=\"{{inputId}}\" class=\"form-control\" accept=\"{{accept}}\"\\\n                              ng-file-select=\"onFileSelect($files)\"/>\\\n                     </div>',\n      compile: function compile(elem, attrs) {\n        attrs.btnStyle = /btn-(primary|success|info|warning|danger|link)/.test(attrs.btnStyle) ? attrs.btnStyle : attrs.btnStyle + ' btn-default';\n        attrs.inputId = attrs.inputId || 'file-' + _.uniqueId();\n        attrs.btnText = attrs.btnText || 'Choose a file...';\n        if (attrs.cnDisabled) {\n          attrs.disabled = true;\n        }\n\n        return function link($scope, elem) {\n          function fileUploadTag() {}\n          $scope.__tag = new fileUploadTag();\n\n          var btn = elem.find('button'),\n              file = elem.find('input');\n\n          btn.on('click', handleClick);\n\n          // Clean up event handlers and closure variables\n          $scope.$on('$destroy', function () {\n            btn.off('click', handleClick);\n            btn = null;\n            file = null;\n          });\n\n          function handleClick() {\n            file.click();\n          }\n\n          $scope.onFileSelect = function ($files) {\n            $scope.callback({ $files: $files });\n          };\n        };\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').filter('cnFilter', cnFilter).filter('titleCase', titleCase).filter('range', range).filter('toDateObject', toDateObject).filter('trustAs', trustAs).filter('trustAsHtml', trustAsHtml).filter('selectedItems', selectedItems).filter('momentjs', momentjs).filter('percent', percent).filter('camelCase', camelCase).filter('sortBy', sortBy).filter('truncate', truncate).filter('toNumber', toNumber).filter('toDecimal', toDecimal).filter('stripHtml', stripHtml);\n\n  cnFilter.$inject = ['$filter'];\n  function cnFilter($filter) {\n    return function (array, expression) {\n      return $filter('filter')(array, expression, function (actual, expected) {\n        if (angular.isUndefined(actual)) {\n          // No substring matching against `undefined`\n          return false;\n        }\n        if (actual === null || expected === null) {\n          // No substring matching against `null`; only match against `null`\n          return actual === expected;\n        }\n        if (angular.isObject(expected) || angular.isObject(actual) && !hasCustomToString(actual)) {\n          // Should not compare primitives against objects, unless they have custom `toString` method\n          return false;\n        }\n\n        actual = angular.lowercase('' + actual);\n        expected = angular.lowercase('' + expected).split(' ');\n        var match = true;\n        _.each(expected, function (str) {\n          if (actual.indexOf(str) === -1) match = false;\n        });\n        return match;\n      });\n\n      function hasCustomToString(obj) {\n        return angular.isFunction(obj.toString) && obj.toString !== Object.prototype.toString;\n      }\n    };\n  }\n\n  function titleCase() {\n    return function (s) {\n      s = s === undefined || s === null ? '' : s;\n      return s.toString().toLowerCase().replace(/_|-/g, ' ').replace(/\\b([a-z])/g, function (ch) {\n        return ch.toUpperCase();\n      });\n    };\n  }\n\n  function range() {\n    return function (input, start, end) {\n      return input = _.range(start, end);\n    };\n  }\n\n  function toDateObject() {\n    return function (dateString) {\n      return new Date(moment(dateString).toISOString());\n    };\n  }\n\n  trustAs.$inject = ['$sce'];\n  function trustAs($sce) {\n    return function (val) {\n      return $sce.trustAs(val);\n    };\n  }\n\n  trustAsHtml.$inject = ['$sce'];\n  function trustAsHtml($sce) {\n    return function (val) {\n      return $sce.trustAsHtml(val);\n    };\n  }\n\n  function selectedItems() {\n    return function (list, selected) {\n      if (!selected || !selected.length) return list;\n\n      return list.filter(function (item) {\n        var match = false;\n        selected.forEach(function (filter) {\n          var compare = item[filter.key];\n          if (_.isObject(compare)) {\n            var tmp = {};\n            tmp[filter.childKey || filter.key] = filter.value;\n            if (_.find(compare, tmp)) {\n              return match = true;\n            }\n          } else {\n            if (compare == filter.value) {\n              return match = true;\n            }\n          }\n        });\n        return match;\n      });\n    };\n  }\n\n  function momentjs() {\n    return function (input, formatString) {\n      formatString = formatString || '';\n      var m = moment(input),\n          out = '';\n\n      if (m && m.isValid()) {\n        if (formatString == 'calendar') {\n          out = m.calendar();\n        } else {\n          out = m.format(formatString);\n        }\n      }\n\n      return out;\n    };\n  }\n\n  function percent() {\n    return function (input, multiplier) {\n      // defaults to 10000 to preserve previous logic\n      multiplier = multiplier || 10000;\n      var numericInput = parseFloat(input);\n      var percent;\n\n      if (typeof numericInput === 'number') {\n        // old logic\n        //percent = Math.round(numericInput * 10000) / 100;\n        percent = Math.round(numericInput * multiplier) / 100;\n\n        return percent + '%';\n      }\n    };\n  }\n\n  function camelCase() {\n    var SPECIAL_CHARS_REGEXP = /([\\:\\-\\_]+(.))/g;\n    var MOZ_HACK_REGEXP = /^moz([A-Z])/;\n\n    return function (input) {\n      return input.replace(SPECIAL_CHARS_REGEXP, function (_, separator, letter, offset) {\n        return offset ? letter.toUpperCase() : letter;\n      }).replace(MOZ_HACK_REGEXP, 'Moz$1');\n    };\n  }\n\n  function sortBy() {\n    return function (obj, sortKey, direction) {\n\n      direction = direction || 'asc';\n      sortKey = sortKey;\n\n      var array = [];\n      Object.keys(obj).forEach(function (key) {\n        array.push(obj[key]);\n      });\n\n      var getBySortKey = function getBySortKey(obj) {\n        return obj[sortKey];\n      };\n\n      if (direction == 'asc') {\n        array.sort(function (a, b) {\n\n          if (getBySortKey(a) > getBySortKey(b)) {\n            return 1;\n          }\n          if (getBySortKey(a) < getBySortKey(b)) {\n            return -1;\n          }\n          // a must be equal to b\n          return 0;\n        });\n      } else {\n        array.sort(function (a, b) {\n          return getBySortKey(b) - getBySortKey(a);\n        });\n      }\n\n      return array;\n    };\n  }\n\n  function truncate() {\n    return function (input, chars, breakOnWord) {\n      if (isNaN(chars)) return input;\n      if (chars <= 0) return '';\n      if (input && input.length >= chars) {\n        input = input.substring(0, chars);\n\n        if (!breakOnWord) {\n          var lastspace = input.lastIndexOf(' ');\n          //get last space\n          if (lastspace !== -1) {\n            input = input.substr(0, lastspace);\n          }\n        } else {\n          while (input.charAt(input.length - 1) == ' ') {\n            input = input.substr(0, input.length - 1);\n          }\n        }\n        return input + '...';\n      }\n      return input;\n    };\n  }\n\n  function toNumber() {\n    return function (string) {\n      var num = Number(string);\n      return isNaN(num) ? 0 : num;\n    };\n  }\n\n  function toDecimal() {\n    return function (number, places) {\n      var string, position, whole, decimal, float;\n\n      if (!number) {\n        return;\n      }\n\n      string = number.toString();\n\n      if (string.length - places >= 0) {\n        position = string.length - places > 0 ? string.length - places : 0;\n        whole = string.substring(0, position);\n        decimal = string.substring(position);\n        float = whole + '.' + decimal;\n      } else {\n        return number;\n      }\n      return Number(float);\n    };\n  }\n\n  function stripHtml() {\n    return function (text) {\n      return text ? String(text).replace(/<[^>]+>/gm, '') : '';\n    };\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  MastHead.$inject = ['$scope'];\n  angular.module('cn.ui').directive('cnMastHead', cnMastHead);\n\n  function cnMastHead() {\n    return {\n      restrict: 'E',\n      template: '\\n        <div class=\"cn-heading cn-mast-head\">\\n          <div class=\"cn-mast-head-inner\">\\n            <div class=\"cn-mast-head-main\">\\n              <div class=\"cn-heading-title\">\\n                <a ng-if=\"vm.config.backState\"\\n                   class=\"cn-heading-back\"\\n                   ui-sref=\"{{vm.config.backState}}\">\\n                  <i ng-show=\"vm.config.backState\" class=\"icn-back\"></i>\\n                </a>\\n                <h1 ng-hide=\"vm.config.dropdown\">\\n                  {{vm.config.title}}\\n                </h1>\\n                <h1 ng-show=\"vm.config.dropdown\" data-toggle=\"dropdown\">\\n                  <a>\\n                    {{vm.config.title}}\\n                    <i ng-show=\"vm.config.dropdown\" class=\"icn-caret\"></i>\\n                  </a>\\n                </h1>\\n                <ul ng-if=\"vm.config.dropdown\"\\n                    class=\"dropdown-menu row\"\\n                    ng-class=\"vm.config.dropdown.style\"\\n                    style=\"width: {{vm.config.dropdown.lists.length * 250}}px\"\\n                    role=\"menu\">\\n                  <div ng-repeat=\"list in vm.config.dropdown.lists\"\\n                       style=\"width: 250px\">\\n                    <li class=\"{{list.style}}\">\\n                      <div class=\"input-group\">\\n                        <input ng-model=\"list.filter\"\\n                               class=\"form-control\"\\n                               placeholder=\"{{list.name}}\"/>\\n                        <span class=\"input-group-addon\">\\n                          <i class=\"icn-search\"></i>\\n                        </span>\\n                      </div>\\n                    </li>\\n                    <li class=\"divider\"></li>\\n                    <li ng-repeat=\"item in list.items | filter:list.filter\"\\n                        class=\"{{list.style}} {{item.style}}\">\\n                      <a ng-show=\"item.name\"\\n                         ng-click=\"list.handler(item)\"\\n                         ng-class=\"{\\'selected\\': list.isSelected(item)}\">{{item.name}}</a>\\n                    </li>\\n                  </div>\\n                </ul>\\n              </div>\\n  \\n              <div ng-show=\"vm.config.options\"\\n                   class=\"pull-right btn-options\">\\n                <span ng-repeat=\"btn in vm.config.options\">\\n                  <a ng-if=\"btn.state\"\\n                     class=\"btn btn-sm btn-transparent\"\\n                     ui-sref=\"{{btn.state}}\"\\n                     title=\"{{btn.title}}\">\\n                    <i class=\"{{btn.icon}}\"/>\\n                  </a>\\n                  <a ng-if=\"btn.href\"\\n                     class=\"btn btn-sm btn-transparent\"\\n                     ng-href=\"{{btn.href}}\"\\n                     title=\"{{btn.title}}\">\\n                    <i class=\"{{btn.icon}}\"/>\\n                  </a>\\n                </span>\\n              </div>\\n            </div>\\n          </div>\\n          <div class=\"cn-mast-head-sub\">\\n            <div class=\"cn-mast-head-inner\">\\n              <ul class=\"tabs\" ng-if=\"vm.config.tabs && vm.config.tabs.length\">\\n                <li ng-repeat=\"tab in vm.config.tabs\"\\n                    ng-class=\"{active: tab.active}\"\\n                    class=\"{{tab.style}}\">\\n                  <a ng-if=\"tab.state\"\\n                     ui-sref=\"{{tab.state}}\">\\n                    <i ng-show=\"tab.active\" class=\"{{tab.icon}}\"/>\\n                    {{tab.name}}\\n                  </a>\\n                  <span ng-if=\"!tab.state\">\\n                    {{tab.name}}\\n                  </span>\\n                </li>\\n              </ul>\\n            </div>\\n          </div>\\n          <div class=\"cn-mast-actions\">\\n            <div class=\"cn-mast-head-inner\">\\n              <div class=\"cn-actions\"\\n                   ng-if=\"vm.floater\"\\n                   ng-mouseenter=\"vm.toggleFloaters(false)\"\\n                   ng-mouseleave=\"vm.toggleFloaters(true)\">\\n                <floating-action-button\\n                  ng-mouseenter=\"vm.floater.showTitle = true\"\\n                  ng-mouseleave=\"vm.floater.showTitle = false\">\\n                  <a class=\"btn {{vm.hideFloaters ? \\'\\' : vm.floater.style}}\"\\n                     ui-sref=\"{{vm.floater.state}}\">\\n                     <i ng-show=\"vm.floater.icon && !vm.hideFloaters\"\\n                        class=\"{{vm.floater.icon}}\"></i>\\n                     <span ng-show=\"vm.floater.text && vm.hideFloaters\" class=\"text\">\\n                       {{vm.floater.text}}\\n                     </span>\\n                     <span ng-hide=\"vm.floater.icon || vm.floater.text || vm.hideFloaters\">\\n                       {{vm.floater.symbol || \\'+\\'}}\\n                     </span>\\n                     <span ng-show=\"vm.hideFloaters\">+</span>\\n                  </a>\\n                  <span class=\"fab-title\"\\n                        ng-show=\"vm.floater.showTitle && vm.floater.title\">\\n                    {{vm.floater.title}}\\n                  </span>\\n                </floating-action-button>\\n                <div class=\"cn-floaters\" style=\"height: {{vm.floatersHeight}}\">\\n                  <div class=\"cn-floaters-inner\">\\n                    <floating-action-button\\n                      ng-repeat=\"btn in vm.floaters\"\\n                      ng-mouseenter=\"btn.showTitle = true\"\\n                      ng-mouseleave=\"btn.showTitle = false\">\\n                      <a ng-show=\"btn.state\"\\n                         class=\"btn {{btn.style}}\"\\n                         ui-sref=\"{{btn.state}}\">\\n                         <i ng-show=\"btn.icon\" class=\"{{btn.icon}}\"></i>\\n                         <span ng-show=\"btn.text\" class=\"text\">{{btn.text}}</span>\\n                         <span ng-show=\"btn.symbol\">{{btn.symbol}}</span>\\n                       </a>\\n                      <span class=\"fab-title\"\\n                            ng-show=\"btn.showTitle && btn.title\">\\n                        {{btn.title}}\\n                      </span>\\n                    </floating-action-button>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>',\n      scope: {\n        config: '='\n      },\n      link: function link(scope, elem) {\n        scope.vm.elem = elem;\n      },\n      controller: MastHead,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n  }\n\n  function MastHead($scope) {\n    'ngInject';\n\n    function cnMastHeadTag() {}\n    $scope.__tag = new cnMastHeadTag();\n\n    // Aggressive destroy\n    $scope.$on('$destroy', function () {\n      _.forOwn(vm, function (_v, k, c) {\n        return c[k] = null;\n      });\n      vm = null;\n    });\n\n    var vm = this;\n    vm.floater = _.first(vm.config.actions);\n    vm.floaters = _.rest(vm.config.actions);\n    vm.floatersHeight = 0;\n    vm.hideFloaters = true;\n    vm.toggleFloaters = toggleFloaters;\n\n    ////////\n\n    function toggleFloaters(hide) {\n      vm.floatersHeight = hide ? 0 : vm.elem.find('.cn-floaters-inner').outerHeight() + 'px';\n      vm.hideFloaters = hide;\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnIframeHeight', cnIframeHeight);\n\n  cnIframeHeight.$inject = ['$timeout'];\n  function cnIframeHeight($timeout) {\n    return {\n      restrict: 'A',\n      link: Link\n    };\n\n    function Link($scope, elem, attrs) {\n      function cnIFrameHeightTag() {}\n      $scope.__tag = new cnIFrameHeightTag();\n\n      var body, $body, h;\n      var insurance;\n      var timers = [];\n\n      $scope.$watch(function () {\n        return attrs.ngSrc;\n      }, function () {\n        if (attrs.ngSrc) {\n          insurance = 0;\n          timers = timers.concat($timeout(activate, 100));\n        }\n      });\n\n      // Clean up event listeners, timers, and closure references\n      $scope.$on('$destroy', function () {\n        angular.element(body).find('img').off('load', activate);\n\n        body = null;\n\n        _.each(timers, function (t) {\n          return $timeout.cancel(t);\n        });\n        _.empty(timers);\n        timers = null;\n      });\n\n      ////////\n\n      function activate() {\n        console.log(':: activate called ::');\n\n        body = getBody();\n        if (body) {\n          elem.height('');\n          h = body.scrollHeight;\n          elem.height(h);\n          angular.element(body).find('img').on('load', activate);\n          if (!insurance) {\n            ++insurance;\n\n            var t = [$timeout(activate, 200), $timeout(activate, 500), $timeout(activate, 1000), $timeout(activate, 1500), $timeout(activate, 3500), $timeout(activate, 5000), $timeout(activate, 7500), $timeout(activate, 10000)];\n\n            timers = timers.concat(t);\n          }\n\n          return;\n        }\n\n        timers = timers.concat([$timeout(activate, 100)]);\n      }\n\n      function getBody() {\n        return elem.get(0).contentDocument && elem.get(0).contentDocument.body;\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('linkToFacebook', function () {\n\n    var base = 'https://www.facebook.com/ads/manage/summary/';\n\n    return {\n      restrict: 'E',\n      replace: true,\n      template: '<a href=\"{{ link }}\" target=\"_blank\" ng-show=\"link\" ng-click=\"$event.stopPropagation();\">\\\n                       {{text}}\\\n                       <span class=\"glyphicon glyphicon-new-window small\"></span>\\\n                     </a>',\n      scope: {\n        'fbObject': '=',\n        'text': '@?'\n      },\n\n      link: function link($scope) {\n        function linkToFacebookTag() {}\n        $scope.__tag = new linkToFacebookTag();\n\n        if ($scope.fbObject.twitterLink) {\n          $scope.link = $scope.fbObject.twitterLink;\n        } else if (_.has($scope.fbObject, 'fbCampaignGroupId')) {\n          if ($scope.fbObject.fbCampaignGroupId) {\n            $scope.link = base + 'campaign/?campaign_id=' + $scope.fbObject.fbCampaignGroupId;\n          }\n        } else if (_.has($scope.fbObject, 'fbCampaignId')) {\n          if ($scope.fbObject.fbCampaignId) {\n            $scope.link = base + 'adset/?ad_set_id=' + $scope.fbObject.fbCampaignId;\n          }\n        } else if (_.has($scope.fbObject, 'fbAdgroupId')) {\n          if ($scope.fbObject.adSet.fbCampaignId && $scope.fbObject.fbAdgroupId) {\n            $scope.link = base + 'adset/?ad_set_id=' + $scope.fbObject.adSet.fbCampaignId + '&show_adgroup_id=' + $scope.fbObject.fbAdgroupId;\n          }\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnLoadingBar', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        run: '='\n      },\n      template: '<div><cn-progress-bar cn-limit=\"1\" cn-progress=\"progress\"></cn-progress-bar></div>',\n      controller: ['$scope', '$interval', function ($scope, $interval) {\n        function cnLoadingBarTag() {}\n        $scope.__tag = new cnLoadingBarTag();\n\n        $scope.progress = 0;\n        $scope.counter = 1;\n        $scope.numerator = 1;\n        $scope.denominator = 3;\n\n        $scope.$watch('run', function (newVal, oldVal) {\n          if (newVal === oldVal) return;\n          if ($scope.run) {\n            start();\n          } else {\n            stop();\n          }\n        });\n\n        function start() {\n          $scope.interval = $interval(function () {\n            $scope.progress = $scope.progress + $scope.numerator / $scope.denominator;\n            $scope.denominator = $scope.denominator + 2 / $scope.counter;\n            $scope.counter = $scope.counter * 0.66;\n          }, 500);\n        }\n\n        function stop() {\n          $interval.cancel($scope.interval);\n          $scope.progress = 100;\n        }\n\n        $scope.$on('$destroy', function () {\n          stop();\n        });\n      }]\n    };\n  });\n})();\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n(function () {\n  \"use strict\";\n\n  angular.module('cn.ui').directive('mediaUpload', mediaUpload);\n\n  function mediaUpload() {\n    return {\n      restrict: 'E',\n      scope: {\n        cnUploadPath: '=',\n        cnFileType: '=',\n        cnPreviewPath: '=',\n        cnModelValueKey: '=',\n        ngModel: '=',\n        cnDisabled: '=',\n        cnExistingPreview: '=',\n        cnForm: '=',\n        cnData: '=',\n        cnKey: '=',\n        cnImagePreviews: '=',\n        cnTextButton: '='\n      },\n      controller: Upload,\n      controllerAs: 'vm',\n      bindToController: true,\n      template: '\\\n        <div class=\"img-placeholder col-sm-6\" ng-class=\"{ empty: !vm.filePath }\">\\\n          <img ng-if=\"vm.cnFileType === \\'image\\'\" ng-src=\"{{vm.filePath}}\"/>\\\n          <video ng-if=\"vm.cnFileType === \\'video\\' && vm.filePath\"\\\n                 ng-src=\"{{vm.filePath}}\"\\\n                 controls=\"controls\" preload=\"none\"/>\\\n        </div>\\\n        <file-upload class=\"col-sm-6\"\\\n                     btn-text=\"{{ vm.cnTextButton ? cnTextButton : (\\\"Upload \\\" +  vm.cnFileType) | titleCase }}\"\\\n                     cn-disabled=\"vm.cnDisabled\"\\\n                     on-file-select=\"vm.uploadFile($files)\">\\\n        </file-upload>\\\n      '\n    };\n  }\n\n  Upload.$inject = ['$q', '$http', '$sce', 'cfpLoadingBar', '$scope', 'md5', 'uuid4'];\n  function Upload($q, $http, $sce, cfpLoadingBar, $scope, md5, uuid4) {\n    function mediaUploadTag() {}\n    $scope.__tag = new mediaUploadTag();\n\n    var vm = this;\n\n    vm.uploadFile = uploadFile;\n    $scope.$watch('vm.ngModel', updatePreview);\n    activate();\n\n    function activate() {\n      if (vm.cnExistingPreview) {\n        vm.filePath = $sce.trustAsResourceUrl('/uploads/facebook/' + vm.cnExistingPreview);\n      } else if (vm.cnFileType === 'image' && vm.ngModel) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel);\n      } else if (vm.cnFileType === 'video' && vm.ngModel) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel.media);\n      }\n    }\n\n    function updatePreview() {\n      if (vm.cnFileType === 'image' && vm.ngModel && vm.ngModel.includes && vm.ngModel.includes(\"/\")) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel);\n      } else if (_.get(vm.cnImagePreviews, vm.cnKey)) {\n        vm.filePath = $sce.trustAsResourceUrl(_.get(vm.cnImagePreviews, vm.cnKey));\n      }\n    }\n\n    function uploadFile($files) {\n      var dfr = $q.defer();\n      dfr.promise.then(setFilePath).catch(handleError);\n      var file = $files[0];\n      if (file.type.includes(\"image\")) {\n        var step = file.size;\n        vm.cnFileType = \"image\";\n      } else {\n        var step = 1024 * 1024 * 8;\n        vm.cnFileType = \"video\";\n      }\n      var blob = file.slice();\n      var reader = new FileReader();\n      reader.readAsBinaryString(blob);\n      reader.onload = function (e) {\n        var fileHash = md5.createHash(reader.result);\n        uploadFile_(file, 0, step, dfr, uuid4.generate(), fileHash);\n      };\n      cfpLoadingBar.start();\n    }\n\n    function uploadFile_(file, start, step, dfr, uuid, fileHash) {\n      var size = file.size;\n      var blob = file.slice(start, start + step);\n      var formData = new FormData();\n      if (vm.cnUploadPath.includes('/media/upload')) {\n        formData.append(\"content_hash\", fileHash);\n        formData.append(\"file\", blob);\n      } else {\n        formData.append(\"fileHash\", fileHash);\n        formData.append(\"filename\", file.name);\n        formData.append(\"uuid\", uuid);\n        formData.append(vm.cnFileType, blob);\n      }\n\n      _.each(vm.cnData, function (value, key) {\n        if (value) formData.append(key, value);\n      });\n      var end = Math.min(start + step, size);\n      var headers = _extends({\n        \"Content-Range\": 'bytes ' + start + '-' + end + '/' + size\n      }, $http.defaults.headers.common);\n      $.ajax({\n        url: vm.cnUploadPath,\n        headers: headers,\n        data: formData,\n        processData: false,\n        contentType: false,\n        type: 'POST',\n        success: function success(response) {\n          if (response.media_object || response.filename || response.cn_preview_url || response.media_url) {\n            dfr.resolve(response);\n          } else if (start + step < size) {\n            uploadFile_(file, start + step, step, dfr, uuid, fileHash);\n          }\n        },\n        error: dfr.reject\n      });\n    }\n\n    function setFilePath(response) {\n      cfpLoadingBar.complete();\n      if (vm.cnImagePreviews) {\n        delete vm.cnImagePreviews[vm.cnKey];\n      }\n      vm.cnModelValueKey = vm.cnModelValueKey || vm.cnForm.valueProperty;\n      vm.ngModel = response[vm.cnModelValueKey || 'media_id_string'];\n      vm.filePath = $sce.trustAsResourceUrl(response[vm.cnPreviewPath || 'cn_preview_url']);\n      var ngModelController = getNgModelController($scope);\n      if (ngModelController) {\n        _.each(ngModelController.$error, function (v, e) {\n          ngModelController.$setValidity(e, true);\n        });\n      }\n    }\n\n    function handleError(err) {\n      cfpLoadingBar.complete();\n      var error = JSON.parse(err.responseText).error;\n      $scope.$emit(\"citizenNet:toastEvent\", { directiveData: { type: 'error', body: error } });\n    }\n\n    function getNgModelController(scope) {\n      if (scope.ngModel) {\n        return scope.ngModel;\n      } else if (scope.$parent) {\n        return getNgModelController(scope.$parent);\n      } else {\n        return null;\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').factory('cnModal', cnModal);\n\n  cnModal.$inject = ['$modal', '$rootScope'];\n  function cnModal($modal, $rootScope) {\n    var vm = {\n      onChangeState: null,\n      open: open\n    };\n\n    return vm;\n\n    ////////\n\n    function open(options) {\n      vm.onChangeState = $rootScope.$on('$stateChangeStart', function () {\n        vm.onChangeState();\n        if (vm.modal) {\n          vm.modal.close();\n        }\n      });\n      vm.modal = $modal.open(options);\n      return vm.modal;\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  cnNumber.$inject = ['$filter'];\n  angular.module('cn.ui').directive('cnNumber', cnNumber);\n\n  function cnNumber($filter) {\n    'ngInject';\n\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnNumberTag() {}\n      $scope.__tag = new cnNumberTag();\n\n      if (!vm) return;\n\n      activate();\n\n      //////////\n\n      function activate() {\n        vm.$parsers.unshift(parseVal);\n        vm.$formatters.unshift(function (val) {\n          vm.$setDirty();\n          return formatVal(val);\n        });\n      }\n\n      function parseVal(val) {\n        console.log('parseNum', val);\n        return parseFloat(val.replace(/\\D*/g, ''), 10);\n      }\n\n      function formatVal(val) {\n        console.log('formatNum', val);\n        return $filter('number')(val);\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  \"use strict\";\n\n  cnOnerror.$inject = ['$parse'];\n  angular.module('cn.ui').directive('cnOnerror', cnOnerror);\n\n  function cnOnerror($parse) {\n    '$inject';\n\n    return {\n      restrict: 'A',\n      link: function link(scope, elem, attrs) {\n        function cnOnerrorTag() {}\n        scope.__tag = new cnOnerrorTag();\n\n        var handler = $parse(attrs.cnOnerror);\n        elem[0].onerror = function (e, param) {\n          return handler(scope, { param: param });\n        };\n      }\n    };\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnPagination', cnPagination);\n\n  function cnPagination() {\n    return {\n      restrict: 'E',\n      replace: true,\n      template: '\\\n          <div class=\"cn-pagination clearfix\"><div ng-if=\"paging\">\\\n            <div class=\"btn-group\" ng-if=\"count\">\\\n              <button type=\"button\" \\\n                      class=\"btn btn-sm btn-primary dropdown-toggle\" \\\n                      data-toggle=\"dropdown\">\\\n                {{count}} Results <span class=\"caret\"></span>\\\n              </button>\\\n              <ul class=\"dropdown-menu\" role=\"menu\">\\\n                <li><a ng-click=\"onClick(1, 10)\">10 Results</a></li>\\\n                <li><a ng-click=\"onClick(1, 25)\">25 Results</a></li>\\\n                <li><a ng-click=\"onClick(1, 50)\">50 Results</a></li>\\\n              </ul>\\\n            </div>\\\n            <ul class=\"pagination\" ng-if=\"pages.length > 1\">\\\n              <li ng-repeat=\"page in pages\"\\\n                  ng-class=\"{active: page.active}\">\\\n                <a ng-if=\"!page.disabled\"\\\n                   ng-click=\"page.skip && onClick(page.skip)\">{{page.label}}</a>\\\n                <span ng-if=\"page.disabled\">{{page.label}}</span>\\\n              </li>\\\n            </ul>\\\n          </div></div>',\n      scope: {\n        paging: '=',\n        onClick: '=',\n        count: '=?'\n      },\n      link: function link($scope) {\n        function cnPaginationTag() {}\n        $scope.__tag = new cnPaginationTag();\n\n        $scope.$watch('paging', function () {\n          if ($scope.paging) {\n            $scope.pages = buildPaging($scope.paging);\n          }\n        });\n\n        function buildPaging(paging) {\n          var pages = [],\n              i = paging.skip < 4 ? 1 : paging.skip > paging.last - 3 ? paging.last - 4 : paging.skip - 2,\n              l = paging.last + 1 > i + 5 ? i + 5 : paging.last + 1;\n\n          if (paging.skip !== 1) {\n            pages.push({\n              label: '\\u2190',\n              skip: paging.skip - 1\n            });\n          }\n\n          if (1 < i) {\n            pages.push({\n              label: 1,\n              skip: 1\n            });\n            pages.push({\n              label: '...',\n              disabled: true\n            });\n          }\n\n          for (; i < l; i++) {\n            pages.push({\n              label: i,\n              active: i === paging.skip,\n              skip: i\n            });\n          }if (paging.last >= l) {\n            pages.push({\n              label: '...',\n              disabled: true\n            });\n            pages.push({\n              label: paging.last,\n              skip: paging.last\n            });\n          }\n\n          if (paging.skip !== paging.last) {\n            pages.push({\n              label: '\\u2192',\n              skip: paging.skip + 1\n            });\n          }\n\n          return pages;\n        }\n      }\n    };\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnParentWidth', cnParentWidth);\n\n  cnParentWidth.$inject = ['$window', '$timeout'];\n  function cnParentWidth($window, $timeout) {\n    return {\n      restrict: 'A',\n      link: link\n    };\n\n    function link(scope, elem) {\n      function cnParentWidthTag() {}\n      scope.__tag = new cnParentWidthTag();\n\n      var w = angular.element($window);\n      var parent = elem.parent();\n\n      // Clean up event handlers and closure references\n      scope.$on('$destroy', function () {\n        w.off('resize', activate);\n        w = null;\n        parent = null;\n      });\n\n      w.on('resize', activate);\n      activate();\n      $timeout(activate, 250);\n\n      function activate() {\n        elem.width(parent.width());\n      }\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnPercentageFormat', cnPercentageFormat);\n\n  function cnPercentageFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnPercentageFormatTag() {}\n      $scope.__tag = new cnPercentageFormatTag();\n\n      if (!vm) return;\n\n      vm.$parsers.unshift(function () {\n        return _.divide(elem[0].value, 100);\n      });\n\n      vm.$formatters.unshift(function () {\n        elem[0].value = vm.$modelValue * 100;\n        return elem[0].value;\n      });\n    }\n  }\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnProgressBar', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        limit: '=cnLimit',\n        projected: '=cnProjected',\n        progress: '=cnProgress',\n        flexWidth: '=cnProgressBarFlexWidth'\n      },\n      template: '<div class=\"cn-progress-container {{flexWidth ? \\'flex-width\\' : \\'\\'}}\">\\\n                       <div class=\"cn-projected-bar\" \\\n                            ng-class=\"{\\'cn-progress-over\\': limit && projected > limit}\">\\\n                         <div class=\"cn-progress-bar\" \\\n                              ng-class=\"{\\'cn-progress-over\\': limit && progress > limit}\"></div>\\\n                       </div>\\\n                     </div>',\n      link: function link($scope, elem) {\n        function cnProgressBarTag() {}\n        $scope.__tag = new cnProgressBarTag();\n\n        var projectedBar = elem.find('.cn-projected-bar'),\n            progressBar = elem.find('.cn-progress-bar');\n\n        // Clean up closure references\n        $scope.$on('$destroy', function () {\n          projectedBar = null;\n          progressBar = null;\n        });\n\n        $scope.$watch(function () {\n          return '' + $scope.limit + $scope.projected + $scope.progress;\n        }, function () {\n          projectedBar.css('width', calculateWidth($scope.projected || $scope.progress, $scope.limit));\n          progressBar.css('width', calculateWidth($scope.progress, $scope.projected));\n        });\n\n        function calculateWidth(numerator, denominator) {\n          return (denominator ? _.percentage(numerator, denominator) : 100) + '%';\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('radio', function () {\n    return {\n      restrict: 'C',\n      link: function link($scope, elem) {\n        function radioTag() {}\n        $scope.__tag = radioTag();\n\n        if (elem.prop('tagName') === 'INPUT') {\n          elem.after('<span></span>');\n        } else {\n          elem.find('input[type=radio]').after('<span></span>');\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnResponsiveHeight', cnResponsiveHeight);\n\n  cnResponsiveHeight.$inject = ['$window', '$timeout'];\n\n  function cnResponsiveHeight($window, $timeout) {\n    var directive = {\n      restrict: 'EA',\n      link: linkFunction\n    };\n\n    return directive;\n\n    function linkFunction($scope, elem, attrs) {\n      function cnResponsiveHeightTag() {}\n      $scope.__tag = new cnResponsiveHeightTag();\n\n      console.log('attrs.cnResponsiveHeight', attrs.cnResponsiveHeight);\n      if (attrs.cnResponsiveHeight === 'false') return;\n\n      // Clean up event handlers and closure references\n      $scope.$on('$destroy', function () {\n        breakpoint = null;\n        w.off('resize', activate);\n        w = null;\n      });\n\n      var w = angular.element($window);\n      var breakpoint = {\n        sm: 768,\n        md: 992,\n        lg: 1200\n      }[attrs.cnResponsiveBreak] || 0;\n\n      w.on('resize', activate);\n      /* give page elements a chance to render before calculation */\n      $timeout(activate, 250);\n      $timeout(activate, 500); // twice for good measure\n\n      function activate() {\n        if ($window.innerWidth > breakpoint) {\n          var topOffset = elem.offset().top;\n\n          if (topOffset < 0) {\n            // calculate again after any animations have completed\n            $timeout(activate, 500);\n          } else {\n            var bottomOffset = attrs.cnResponsiveHeight || 0;\n            var height = w.height() - topOffset - bottomOffset;\n            var overflow = attrs.cnResponsiveOverflow || 'auto';\n            height = height ? height + 'px' : 'auto';\n            if (_.has(attrs, 'cnSetMaxHeight')) {\n              elem.css({\n                'max-height': height,\n                'overflow': overflow\n              });\n            } else {\n              elem.css({\n                'height': height,\n                'overflow': overflow\n              });\n            }\n          }\n        } else {\n          elem.css({ 'height': '' });\n        }\n      }\n    }\n  }\n})();\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n\n  'use strict';\n\n  var CnSchedule = function () {\n    CnSchedule.$inject = ['$scope'];\n    function CnSchedule($scope) {\n      'ngInject';\n\n      // https://tools.ietf.org/html/rfc5545#section-3.3.10\n\n      var _this = this;\n\n      _classCallCheck(this, CnSchedule);\n\n      this.FREQ = {\n        SECONDLY: \"SECONDLY\",\n        MINUTELY: \"MINUTELY\",\n        DAILY: 'DAILY',\n        WEEKLY: 'WEEKLY',\n        MONTHLY: 'MONTHLY',\n        YEARLY: \"YEARLY\"\n      };\n\n      this.WEEKDAY = {\n        MO: 'MO',\n        TU: 'TU',\n        WE: 'WE',\n        TH: 'TH',\n        FR: 'FR',\n        SA: 'SA',\n        SU: \"SU\"\n      };\n\n      this.state = {\n        BIWEEKLY: {\n          freq: this.FREQ.WEEKLY,\n          interval: 2,\n          by: [this.WEEKDAY.MO, this.WEEKDAY.FR],\n          _option: 'BIWEEKLY'\n        },\n        BOM: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [1],\n          _option: 'BOM'\n        },\n        DAILY: {\n          freq: this.FREQ.DAILY,\n          interval: 1,\n          _option: 'DAILY'\n        },\n        EOM: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [-1],\n          _option: 'EOM'\n        },\n        MONTHLY: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [14],\n          _option: 'MONTHLY'\n        },\n        WEEKLY: {\n          freq: this.FREQ.WEEKLY,\n          interval: 1,\n          by: [this.WEEKDAY.MO],\n          _option: 'WEEKLY'\n        },\n        WORKDAY: {\n          freq: this.FREQ.DAILY,\n          interval: 1,\n          by: _(this.WEEKDAY).keys().reject(function (value) {\n            return _.eq(value, _this.WEEKDAY.SA) || _.eq(value, _this.WEEKDAY.SU);\n          }).value(),\n          _option: 'WORKDAY'\n        }\n      };\n\n      this.keyedWeekDays = _.map(this.WEEKDAY, function (key, value) {\n        return { name: _this.showWeekDay(value), value: value };\n      });\n\n      $scope.$watch(function () {\n        return _this.model;\n      }, function (value) {\n        return _this.ngModel.$setViewValue(value);\n      });\n    }\n\n    _createClass(CnSchedule, [{\n      key: '$onInit',\n      value: function $onInit() {\n        var _this2 = this;\n\n        this.ngModel.$render = function () {\n          var viewValue = _this2.ngModel.$viewValue;\n          var _option = _.get(viewValue, '_option');\n\n          if (_.isObject(viewValue) && _.isString(_option)) {\n            _.assign(_this2.state[_option], viewValue);\n            _this2.model = _this2.state[_option];\n          } else {\n            _this2.model = _this2.state.WEEKLY;\n          }\n        };\n      }\n    }, {\n      key: 'handleChangeBiWeekly',\n      value: function handleChangeBiWeekly(biweekly) {\n        _.set(this.state.BIWEEKLY, 'by', biweekly);\n      }\n    }, {\n      key: 'handleChangeWeekly',\n      value: function handleChangeWeekly(weekday) {\n        _.set(this.state.WEEKLY, 'by', [weekday]);\n      }\n    }, {\n      key: 'showWeekDay',\n      value: function showWeekDay(day) {\n        return {\n          MO: 'Monday',\n          TU: 'Tuesday',\n          WE: 'Wednesday',\n          TH: 'Thursday',\n          FR: 'Friday',\n          SA: 'Saturday',\n          SU: 'Sunday'\n        }[day];\n      }\n    }]);\n\n    return CnSchedule;\n  }();\n\n  var cnScheduleComponent = {\n    bindings: {\n      form: '<'\n    },\n    controller: CnSchedule,\n    controllerAs: 'schedule',\n    require: {\n      ngModel: '^ngModel'\n    },\n    template: '\\n      <div class=\"form-group\">\\n        <div class=\"btn-group clearfix\">\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.WEEKLY\">\\n              Every\\n              &nbsp;\\n              <div class=\"btn-group\"\\n                   uib-dropdown\\n                   is-open=\"weeklyIsOpen\">\\n                <button type=\"button\"\\n                        class=\"btn btn-primary\"\\n                        uib-dropdown-toggle\\n                        ng-disabled=\"schedule.model._option !== \\'WEEKLY\\'\"\\n                        style=\"background-color: #DEDEDE; color: black;\">\\n                  {{ schedule.showWeekDay(schedule.state.WEEKLY.by[0]) }}\\n                  &nbsp;\\n                  <span class=\"caret\"></span>\\n                </button>\\n                <ul class=\"dropdown-menu\"\\n                    uib-dropdown-menu\\n                    role=\"menu\"\\n                    aria-labelledby=\"single-button\">\\n                  <li role=\"menuitem\"\\n                      ng-click=\"schedule.handleChangeWeekly(wd.value)\"\\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\\n                    <a>{{ wd.name }}</a>\\n                  </li>\\n                </ul>\\n              </div>\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.BIWEEKLY\">\\n              Every\\n              &nbsp;\\n              <div class=\"btn-group\"\\n                   uib-dropdown\\n                   is-open=\"biWeeklyXIsOpen\">\\n                <button type=\"button\"\\n                        class=\"btn btn-primary\"\\n                        uib-dropdown-toggle\\n                        ng-disabled=\"schedule.model._option !== \\'BIWEEKLY\\'\"\\n                        style=\"background-color: #DEDEDE; color: black;\">\\n                  {{ schedule.showWeekDay(schedule.state.BIWEEKLY.by[0]) }}\\n                  &nbsp;\\n                  <span class=\"caret\"></span>\\n                </button>\\n                <ul class=\"dropdown-menu\"\\n                    uib-dropdown-menu\\n                    role=\"menu\"\\n                    aria-labelledby=\"single-button\">\\n                  <li role=\"menuitem\"\\n                      ng-hide=\"wd.value === schedule.state.BIWEEKLY.by[1]\"\\n                      ng-click=\"schedule.handleChangeBiWeekly([wd.value, schedule.state.BIWEEKLY.by[1]])\"\\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\\n                    <a>{{ wd.name }}</a>\\n                  </li>\\n                </ul>\\n              </div>\\n              &nbsp;\\n              and\\n              &nbsp;\\n              <div class=\"btn-group\"\\n                   uib-dropdown\\n                   is-open=\"biWeeklyYIsOpen\">\\n                <button type=\"button\"\\n                        class=\"btn btn-primary\"\\n                        uib-dropdown-toggle\\n                        ng-disabled=\"schedule.model._option !== \\'BIWEEKLY\\'\"\\n                        style=\"background-color: #DEDEDE; color: black;\">\\n                  {{ schedule.showWeekDay(schedule.state.BIWEEKLY.by[1]) }}\\n                  &nbsp;\\n                  <span class=\"caret\"></span>\\n                </button>\\n                <ul class=\"dropdown-menu\"\\n                    uib-dropdown-menu\\n                    role=\"menu\"\\n                    aria-labelledby=\"single-button\">\\n                  <li role=\"menuitem\"\\n                      ng-hide=\"wd.value === schedule.state.BIWEEKLY.by[0]\"\\n                      ng-click=\"schedule.handleChangeBiWeekly([schedule.state.BIWEEKLY.by[0], wd.value])\"\\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\\n                    <a>{{ wd.name }}</a>\\n                  </li>\\n                </ul>\\n              </div>\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.WORKDAY\">\\n              Weekdays\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.DAILY\">\\n              Daily\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.BOM\">\\n              Beginning of Month\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.EOM\">\\n              End of Month\\n            </input>\\n          </label>\\n\\n          <label class=\"radio radio-block\">\\n            <input type=\"radio\"\\n                   ng-model=\"schedule.model\"\\n                   ng-value=\"schedule.state.MONTHLY\">\\n              Every\\n              &nbsp;\\n              <input max=\"31\"\\n                     min=\"1\"\\n                     ng-disabled=\"schedule.model._option !== \\'MONTHLY\\'\"\\n                     ng-model-options=\"{ debounce: 300 }\"\\n                     ng-model=\"schedule.state.MONTHLY.by[0]\"\\n                     step=\"1\"\\n                     style=\"width: 50px; text-align: center;\"\\n                     type=\"number\"\\n                     class=\"form-control\" />\\n              &nbsp;\\n              of the month\\n            </input>\\n          </label>\\n        </div>\\n      </div>\\n    '\n  };\n\n  angular.module('cn.ui').component('cnSchedule', cnScheduleComponent);\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnSelectOr', cnSelectOr);\n\n  function cnSelectOr() {\n    return {\n      restrict: 'E',\n      template: function template(elem, attrs) {\n        console.log('template:', elem, attrs);\n        var tpl = '\\\n          <div class=\"cn-select-or\" ng-disabled=\"vm.disabled\">\\\n            <p ng-show=\"vm.selectFrom.length\" class=\"toggle-view\">\\\n              <a ng-click=\"vm.toggleView()\">\\\n                {{vm.view === \\'list\\' ? vm.toggleText.list : vm.toggleText.new}}\\\n              </a>\\\n            </p>\\\n            <div ng-show=\"vm.form.view === \\'new\\'\" ng-transclude/>\\\n            <div ng-show=\"vm.form.view === \\'list\\'\" class=\"cn-list\">\\\n              <table class=\"list-group table card-flex\">\\\n                <tr ng-repeat=\"item in vm.selectFrom\"\\\n                    selection-model\\\n                    selection-model-type=\"checkbox\"\\\n                    selection-model-cleanup-strategy=\"deselect\"\\\n                    selection-model-selected-items=\"vm.selected\">\\\n                  <td class=\"col-sm-1 text-center\">\\\n                    <span class=\"checkbox\">\\\n                      <input type=\"checkbox\" id=\"checkbox{{ item.id }}\" selection-model-ignore=\"false\"/>\\\n                    </span>\\\n                  </td>\\\n                  <td class=\"col-sm-11\" ng-bind-html=\"vm.processTemplate(item)\"></td>\\\n                </tr>\\\n              </table>\\\n            </div>\\\n          </div>\\\n        ';\n        return tpl;\n      },\n      transclude: true,\n      scope: {\n        selectFrom: '=',\n        ngModel: '=',\n        form: '=ffForm',\n        directiveId: '=',\n        toggleText: '=',\n        disabled: '=',\n        itemTemplate: '='\n      },\n      require: 'ngModel',\n      link: Link,\n      controller: SelectOr,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n  }\n\n  function Link($scope, elem, attrs, ctrl) {\n    function cnSelectOrTag() {}\n    $scope.__tag = new cnSelectOrTag();\n\n    var vm = $scope.vm;\n\n    $scope.$watch('vm.ngModel', validate, true);\n\n    //////////\n\n    function validate(cur, prev) {\n      if (!angular.equals(cur, prev)) {\n        ctrl.$setDirty();\n\n        if (vm.form.required) {\n          ctrl.$setValidity('tv4-302', !!cur);\n        }\n      }\n    }\n  }\n\n  SelectOr.$inject = ['$scope', '$sce', '$interpolate'];\n  function SelectOr($scope, $sce, $interpolate) {\n    var vm = this;\n    vm.selected = [];\n    vm.form.view = vm.form.view || 'new';\n    vm.activate = activate;\n    vm.onSelectionChange = onSelectionChange;\n    vm.processTemplate = processTemplate;\n    vm.setValue = setValue;\n    vm.toggleView = toggleView;\n\n    $scope.$watch('vm.selected.length', vm.onSelectionChange);\n\n    vm.activate();\n\n    ///////////\n\n    function activate() {\n      vm.form.schema._required = _.clone(vm.form.schema.required);\n    }\n\n    function processTemplate(item) {\n      return $sce.trustAsHtml($interpolate(vm.itemTemplate)(item));\n    }\n\n    function onSelectionChange() {\n      vm.setValue(_.first(vm.selected) || null);\n    }\n\n    function setValue(val) {\n      if (val) {\n        val = vm.form.schema.type === 'object' ? val : val[vm.form.valueProperty || 'value'];\n      }\n      vm.ngModel = val;\n    }\n\n    function toggleView() {\n      vm.form.view = vm.form.view === 'new' ? 'list' : 'new';\n      if (vm.selected[0]) {\n        vm.selected[0].selected = false;\n        vm.selected.length = 0;\n      }\n    }\n  }\n})();\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n(function () {\n  'use strict';\n\n  var CnShelf = function () {\n    CnShelf.$inject = ['$element', '$timeout', '$scope'];\n    function CnShelf($element, $timeout, $scope) {\n      'ngInject';\n\n      _classCallCheck(this, CnShelf);\n\n      function cnShelfTag() {}\n      $scope.__tag = new cnShelfTag();\n\n      this.$element = $element;\n      this.$timeout = $timeout;\n    }\n\n    _createClass(CnShelf, [{\n      key: '$onInit',\n      value: function $onInit() {\n        this.$element.addClass('animated fast animated-width');\n        this.toggleShow();\n      }\n    }, {\n      key: '$onChanges',\n      value: function $onChanges(changes) {\n        if (changes.show) {\n          this.toggleShow();\n        }\n      }\n    }, {\n      key: 'toggleShow',\n      value: function toggleShow() {\n        var _this = this;\n\n        if (this.show) {\n          this.$timeout(function () {\n            _this.$element.removeClass(_this.hideClass).addClass(_this.showClass);\n          }, this.showDelay || 0);\n        } else {\n          this.$timeout(function () {\n            _this.$element.removeClass(_this.showClass).addClass(_this.hideClass);\n          }, this.hideDelay || 0);\n        }\n      }\n    }]);\n\n    return CnShelf;\n  }();\n\n  var cnShelf = {\n    controller: CnShelf,\n    controllerAs: 'shelf',\n    bindings: {\n      show: '<',\n      showClass: '@',\n      hideClass: '@',\n      showDelay: '<',\n      hideDelay: '<'\n    }\n  };\n\n  angular.module('cn.ui').component('cnShelf', cnShelf);\n})();\n'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n(function () {\n  'use strict';\n\n  toastController.$inject = ['$rootScope', 'toaster', '$scope'];\n\n  function toastController($rootScope, toaster, $scope) {\n    function toastTag() {}\n    $scope.__tag = new toastTag();\n\n    var defaults = {\n      timeout: 5000,\n      toasterId: 'simple',\n      body: 'simple-toast',\n      bodyOutputType: 'directive',\n      tapToDismiss: false,\n      closeHtml: '<a>Dismiss</a>'\n    };\n\n    var rslistener = $rootScope.$on(\"citizenNet:toastEvent\", function (event, options) {\n      if (_.isObject(options)) {\n        options.directiveData.icon = mapType(options.directiveData.type);\n        if (Array.isArray(options.directiveData.body)) {\n          options.directiveData.body = options.directiveData.body.join('<br />');\n        }\n        toaster.pop(_extends({}, defaults, options));\n      } else {\n        toaster.pop(_extends({}, defaults, { directiveData: { body: options } }));\n      }\n    });\n\n    function mapType(type) {\n      switch (type) {\n        case \"success\":\n          return \"icn-thumbsup\";\n        case \"warning\":\n          return \"icn-error\";\n        case \"danger\":\n          return \"icn-error\";\n        case \"error\":\n          return \"icn-error\";\n        default:\n          return \"icn-info\";\n      }\n    }\n\n    $scope.$on('$destroy', function () {\n      rslistener();\n    });\n  }\n\n  var simpleToast = function simpleToast() {\n    return {\n      template: '\\n      <div class=\\'flex-box align-items-center\\'>\\n        <div class=\"padding-right-20\">\\n          <i ng-class=\"directiveData.icon || \\'icn-info\\'\"></i>\\n        </div>\\n        <div class=\"padding-right-20 flex-1\">\\n          <span ng-bind-html=\\'directiveData.body\\'>{{directiveData.body}}</span>\\n        </div>\\n      </div>\\n    '\n    };\n  };\n\n  var actionToast = function actionToast() {\n    return {\n      template: '\\n      <div class=\\'flex-box align-items-center\\'>\\n        <div class=\\'padding-right-20\\'>\\n          <i ng-class=\\'directiveData.icon || \"icn-info\"\\'></i>\\n        </div>\\n        <div class=\\'padding-right-20 flex-1\\'>\\n          <span>{{directiveData.body}}</span>\\n        </div>\\n        <div class=\\'btn-group\\'>\\n          <span ng-repeat=\\'action in directiveData.actions\\'>\\n            <a class=\\'btn btn-primary\\' ng-click=\\'action.click()\\'>{{action.text}}</a>\\n          </span>\\n        </div>\\n      </div>\\n    '\n    };\n  };\n\n  var listToast = function listToast() {\n    return {\n      template: '\\n      <div class=\"flex-box align-items-center\">\\n        <div class=\"padding-right-40\">\\n          <span class=\"label\">{{directiveData.selected.length}}</span>\\n          {{directiveData.type}} Selected\\n        </div>\\n        <div class=\"padding-right-20 flex-5 btn-group\">\\n          <span ng-repeat=\"action in directiveData.actions\">\\n            <a\\n              class=\"btn btn-default margin-right-10\"\\n              ng-click=\"action.click()\"\\n              ng-disabled=\"action.disabled && action.disabled()\"\\n            >{{action.text}}</a>\\n            <i class=\"fa fa-question\"\\n               style=\"color:lightgrey; cursor:pointer;padding:5px;\"\\n               ng-if=\"action.tooltip && action.disabled && action.disabled()\"\\n               tooltip=\"{{action.tooltip}}\"\\n            ></i>\\n          </span>\\n          <span>\\n            <a class=\"btn btn-transparent\" ng-click=\"directiveData.deselect()\">Deselect All</a>\\n          </span>\\n        </div>\\n      </div>\\n    '\n    };\n  };\n\n  angular.module('cn.ui').controller('toastController', toastController).directive(\"simpleToast\", simpleToast).directive(\"actionToast\", actionToast).directive(\"listToast\", listToast);\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnToggleSwitch', function () {\n    return {\n      restrict: 'E',\n      replace: true,\n      template: '\\n            <div class=\"cn-toggle\"\\n                  ng-class=\"currentCssState()\"\\n                  ng-click=\"toggle($event)\">\\n              <i class=\"icn-toggle\"\\n                  ng-class=\"currentCssState()\"></i>\\n            </div>\\n          ',\n      require: '^ngModel',\n      scope: {\n        'ngModel': '=', // property used to determine on / off state\n        'onValue': '=?',\n        'offValue': '=?',\n        'undefinedClass': '=?',\n        'readOnly': '=',\n        'required': '=',\n        'onChange': '&' // callback when toggle changes\n      },\n      link: function link($scope, elem, attrs, ctrl) {\n        function cnToggleSwitchTag() {}\n        $scope.__tag = new cnToggleSwitchTag();\n\n        $scope.onValue = _.isUndefined($scope.onValue) ? true : $scope.onValue;\n        $scope.offValue = _.isUndefined($scope.offValue) ? false : $scope.offValue;\n        $scope.undefinedClass = $scope.undefinedClass || 'schrodinger';\n\n        $scope.currentCssState = function () {\n          var classes = [];\n          if ($scope.readOnly) classes.push('readonly');\n          if ($scope.ngModel == $scope.onValue) {} else if ($scope.ngModel == $scope.offValue) classes.push('disabled');else classes.push($scope.undefinedClass);\n          return classes.join(' ');\n        };\n\n        $scope.toggle = function ($event) {\n          $event.preventDefault();\n          $event.stopImmediatePropagation();\n\n          // Using evil twins to do string to number type conversion comparison\n          if ($scope.ngModel == $scope.onValue) {\n            $scope.ngModel = $scope.offValue;\n          } else {\n            $scope.ngModel = $scope.onValue;\n          }\n\n          ctrl.$setDirty();\n\n          if ($scope.onChange) {\n            $scope.onChange();\n          }\n        };\n\n        $scope.$watch('ngModel', function (val, pre) {\n          ctrl.$setValidity('schemaForm', true);\n          ctrl.$setValidity('tv4-302', !$scope.required || !angular.isUndefined(val));\n        });\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('truncate', function () {\n    return {\n      restrict: 'AE',\n      scope: {\n        text: '=truncateText',\n        size: '=truncateSize',\n        show: '@truncateShow'\n      },\n      link: function link($scope, elem) {\n        function truncateTag() {}\n        $scope.__tag = new truncateTag();\n\n        $scope.$on('$destroy', function () {\n          if ($scope.show) {\n            elem.off($scope.show, truncate);\n          }\n        });\n\n        var ogText = $scope.text || '',\n            shortText = ogText.length > $scope.size ? ogText.substr(0, $scope.size) + '\\u2026' : ogText,\n            truncated = false;\n\n        function truncate() {\n          elem.text(truncated ? ogText : shortText);\n          truncated = !truncated;\n        }\n\n        truncate();\n\n        if ($scope.show) {\n          elem.on($scope.show, truncate);\n        }\n      }\n    };\n  });\n})();\n'use strict';\n\n(function () {\n  'use strict';\n\n  angular.module('cn.ui').directive('cnUrlFormat', cnUrlFormat);\n\n  function cnUrlFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      if (!vm) return;\n\n      // Clean up event handlers\n      $scope.$on('$destroy', function () {\n        elem.off('input', handleChange);\n      });\n\n      activate();\n\n      //////////\n\n      function activate() {\n        elem.on('input', handleChange);\n      }\n\n      function handleChange(el) {\n        if (el.target.value.length < 5) {} else if (!el.target.value.startsWith(\"http\")) {\n          el.target.value = \"https://\" + el.target.value;\n        }\n      }\n    }\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('cn.ui')\n    .directive('cnIframeHeight', cnIframeHeight);\n\n  cnIframeHeight.$inject = ['$timeout'];\n  function cnIframeHeight($timeout) {\n    return {\n      restrict: 'A',\n      link: Link\n    };\n\n    function Link($scope, elem, attrs) {\n      function cnIFrameHeightTag() {}\n      $scope.__tag = new cnIFrameHeightTag();\n\n      var body, $body, h;\n      var insurance;\n      var timers = [];\n\n      $scope.$watch(function(){ return attrs.ngSrc; }, function() {\n        if(attrs.ngSrc) {\n          insurance = 0;\n          timers = timers.concat($timeout(activate, 100));\n        }\n      });\n\n      // Clean up event listeners, timers, and closure references\n      $scope.$on('$destroy', function() {\n        angular\n          .element(body)\n          .find('img')\n          .off('load', activate);\n\n        body = null;\n\n        _.each(timers, t => $timeout.cancel(t));\n        _.empty(timers);\n        timers = null;\n      });\n\n      ////////\n\n      function activate() {\n        console.log(':: activate called ::');\n\n        body = getBody();\n        if(body) {\n          elem.height('');\n          h = body.scrollHeight;\n          elem.height(h);\n          angular.element(body).find('img').on('load', activate);\n          if(!insurance) {\n            ++insurance;\n\n            var t = [\n              $timeout(activate, 200),\n              $timeout(activate, 500),\n              $timeout(activate, 1000),\n              $timeout(activate, 1500),\n              $timeout(activate, 3500),\n              $timeout(activate, 5000),\n              $timeout(activate, 7500),\n              $timeout(activate, 10000)\n            ];\n\n            timers = timers.concat(t);\n          }\n\n          return;\n        }\n\n        timers = timers.concat([$timeout(activate, 100)]);\n      }\n\n      function getBody() {\n        return elem.get(0).contentDocument && elem.get(0).contentDocument.body;\n      }\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('linkToFacebook', function() {\n\n        var base = 'https://www.facebook.com/ads/manage/summary/';\n\n        return {\n          restrict: 'E',\n          replace: true,\n          template: '<a href=\"{{ link }}\" target=\"_blank\" ng-show=\"link\" ng-click=\"$event.stopPropagation();\">\\\n                       {{text}}\\\n                       <span class=\"glyphicon glyphicon-new-window small\"></span>\\\n                     </a>',\n          scope: {\n            'fbObject': '=',\n            'text': '@?'\n          },\n\n          link: function($scope) {\n            function linkToFacebookTag() {}\n            $scope.__tag = new linkToFacebookTag();\n\n            if($scope.fbObject.twitterLink) {\n              $scope.link = $scope.fbObject.twitterLink;\n            }\n            else if(_.has($scope.fbObject, 'fbCampaignGroupId')) {\n              if($scope.fbObject.fbCampaignGroupId) {\n                $scope.link = base + 'campaign/?campaign_id=' + $scope.fbObject.fbCampaignGroupId;\n              }\n            } else if(_.has($scope.fbObject, 'fbCampaignId')) {\n              if($scope.fbObject.fbCampaignId) {\n                $scope.link = base + 'adset/?ad_set_id=' + $scope.fbObject.fbCampaignId;\n              }\n            } else if(_.has($scope.fbObject, 'fbAdgroupId')) {\n              if($scope.fbObject.adSet.fbCampaignId && $scope.fbObject.fbAdgroupId) {\n                $scope.link = base + 'adset/?ad_set_id=' + $scope.fbObject.adSet.fbCampaignId + '&show_adgroup_id=' + $scope.fbObject.fbAdgroupId;\n              }\n            }\n          }\n        };\n      });\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('cnLoadingBar', function() {\n        return {\n          restrict: 'E',\n          replace: true,\n          scope: {\n            run: '='\n          },\n          template: '<div><cn-progress-bar cn-limit=\"1\" cn-progress=\"progress\"></cn-progress-bar></div>',\n          controller: ['$scope', '$interval', function($scope, $interval) {\n            function cnLoadingBarTag() {}\n            $scope.__tag = new cnLoadingBarTag();\n\n            $scope.progress = 0;\n            $scope.counter = 1;\n            $scope.numerator = 1;\n            $scope.denominator = 3;\n\n            $scope.$watch('run', function(newVal, oldVal) {\n              if(newVal === oldVal) return;\n              if($scope.run) {\n                start();\n              }\n              else {\n                stop();\n              }\n            });\n\n            function start() {\n              $scope.interval = $interval(function() {\n                $scope.progress = $scope.progress + ($scope.numerator / $scope.denominator);\n                $scope.denominator = $scope.denominator + (2 / $scope.counter);\n                $scope.counter = $scope.counter * 0.66;\n              }, 500);\n            }\n\n            function stop() {\n              $interval.cancel($scope.interval);\n              $scope.progress = 100;\n            }\n\n            $scope.$on('$destroy', function() {\n              stop();\n            });\n          }]\n        };\n      });\n})();\n","(function() {\n  \"use strict\";\n\n  angular\n      .module('cn.ui')\n      .directive('mediaUpload', mediaUpload);\n\n  function mediaUpload() {\n    return {\n      restrict: 'E',\n      scope: {\n        cnUploadPath: '=',\n        cnFileType: '=',\n        cnPreviewPath: '=',\n        cnModelValueKey: '=',\n        ngModel: '=',\n        cnDisabled: '=',\n        cnExistingPreview: '=',\n        cnForm: '=',\n        cnData: '=',\n        cnKey: '=',\n        cnImagePreviews: '=',\n        cnTextButton: '='\n      },\n      controller: Upload,\n      controllerAs: 'vm',\n      bindToController: true,\n      template: '\\\n        <div class=\"img-placeholder col-sm-6\" ng-class=\"{ empty: !vm.filePath }\">\\\n          <img ng-if=\"vm.cnFileType === \\'image\\'\" ng-src=\"{{vm.filePath}}\"/>\\\n          <video ng-if=\"vm.cnFileType === \\'video\\' && vm.filePath\"\\\n                 ng-src=\"{{vm.filePath}}\"\\\n                 controls=\"controls\" preload=\"none\"/>\\\n        </div>\\\n        <file-upload class=\"col-sm-6\"\\\n                     btn-text=\"{{ vm.cnTextButton ? cnTextButton : (\\\"Upload \\\" +  vm.cnFileType) | titleCase }}\"\\\n                     cn-disabled=\"vm.cnDisabled\"\\\n                     on-file-select=\"vm.uploadFile($files)\">\\\n        </file-upload>\\\n      '\n    };\n  }\n\n  Upload.$inject = ['$q', '$http', '$sce', 'cfpLoadingBar', '$scope', 'md5', 'uuid4'];\n  function Upload($q, $http, $sce, cfpLoadingBar, $scope, md5, uuid4) {\n    function mediaUploadTag() {}\n    $scope.__tag = new mediaUploadTag();\n\n    var vm = this;\n\n    vm.uploadFile = uploadFile;\n    $scope.$watch('vm.ngModel', updatePreview);\n    activate();\n\n    function activate() {\n      if (vm.cnExistingPreview) {\n        vm.filePath = $sce.trustAsResourceUrl(`/uploads/facebook/${vm.cnExistingPreview}`);\n      } else if (vm.cnFileType === 'image' && vm.ngModel) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel);\n      } else if (vm.cnFileType === 'video' && vm.ngModel) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel.media);\n      }\n    }\n\n    function updatePreview() {\n      if (vm.cnFileType === 'image' && vm.ngModel && vm.ngModel.includes && vm.ngModel.includes(\"/\")) {\n        vm.filePath = $sce.trustAsResourceUrl(vm.ngModel);\n      }\n      else if (_.get(vm.cnImagePreviews, vm.cnKey)) {\n        vm.filePath = $sce.trustAsResourceUrl(_.get(vm.cnImagePreviews, vm.cnKey));\n      }\n    }\n\n    function uploadFile($files) {\n      var dfr = $q.defer();\n      dfr.promise.then(setFilePath).catch(handleError);\n      var file = $files[0]\n      if (file.type.includes(\"image\")) {\n        var step = file.size\n        vm.cnFileType = \"image\";\n      }\n      else {\n        var step = 1024 * 1024 * 8\n        vm.cnFileType = \"video\";\n      }\n      var blob = file.slice()\n      var reader = new FileReader()\n      reader.readAsBinaryString(blob)\n      reader.onload = function(e) {\n        var fileHash = md5.createHash(reader.result)\n        uploadFile_(file, 0, step, dfr, uuid4.generate(), fileHash)\n      }\n      cfpLoadingBar.start();\n    }\n\n    function uploadFile_(file, start, step, dfr, uuid, fileHash) {\n      var size = file.size\n      var blob = file.slice(start, start + step)\n      var formData = new FormData();\n      if (vm.cnUploadPath.includes('/media/upload')) {\n        formData.append(\"content_hash\", fileHash)\n        formData.append(\"file\", blob);\n      } else {\n        formData.append(\"fileHash\", fileHash)\n        formData.append(\"filename\", file.name)\n        formData.append(\"uuid\", uuid)\n        formData.append(vm.cnFileType, blob);\n      }\n\n      _.each(vm.cnData, function(value, key) {\n        if (value) formData.append(key, value);\n      });\n      var end = Math.min((start + step), size)\n      var headers = {\n        \"Content-Range\": `bytes ${start}-${end}/${size}`,\n        ...$http.defaults.headers.common\n      }\n      $.ajax({\n        url: vm.cnUploadPath,\n        headers,\n        data: formData,\n        processData: false,\n        contentType: false,\n        type: 'POST',\n        success: (response) => {\n\t        if (response.media_object || response.filename || response.cn_preview_url || response.media_url)  {\n            dfr.resolve(response)\n          } else if (start + step < size) {\n            uploadFile_(file, start + step, step, dfr, uuid, fileHash)\n          }\n        },\n        error: dfr.reject\n      })\n    }\n\n    function setFilePath(response) {\n      cfpLoadingBar.complete();\n      if (vm.cnImagePreviews) {\n        delete vm.cnImagePreviews[vm.cnKey];\n      }\n      vm.cnModelValueKey = vm.cnModelValueKey || vm.cnForm.valueProperty;\n      vm.ngModel = response[vm.cnModelValueKey || 'media_id_string'];\n      vm.filePath = $sce.trustAsResourceUrl(response[vm.cnPreviewPath || 'cn_preview_url']);\n      let ngModelController = getNgModelController($scope);\n      if (ngModelController) {\n        _.each(ngModelController.$error, (v, e) => {\n          ngModelController.$setValidity(e, true);\n        });\n      }\n    }\n\n    function handleError(err) {\n      cfpLoadingBar.complete();\n      let error = JSON.parse(err.responseText).error;\n      $scope.$emit(\"citizenNet:toastEvent\", { directiveData: { type: 'error', body: error } });\n    }\n\n    function getNgModelController(scope) {\n      if (scope.ngModel) {\n        return scope.ngModel;\n      } else if (scope.$parent) {\n        return getNgModelController(scope.$parent);\n      } else {\n        return null;\n      }\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('cn.ui')\n    .factory('cnModal', cnModal);\n\n  cnModal.$inject = ['$modal', '$rootScope'];\n  function cnModal($modal, $rootScope) {\n    var vm = {\n      onChangeState: null,\n      open\n    };\n\n    return vm;\n\n    ////////\n\n    function open(options) {\n      vm.onChangeState = $rootScope.$on('$stateChangeStart', () => {\n        vm.onChangeState();\n        if(vm.modal) {\n          vm.modal.close();\n        }\n      });\n      vm.modal = $modal.open(options);\n      return vm.modal;\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('cn.ui')\n    .directive('cnNumber', cnNumber);\n\n  function cnNumber($filter) {\n    'ngInject';\n\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnNumberTag() {}\n      $scope.__tag = new cnNumberTag();\n\n      if(!vm) return;\n\n      activate();\n\n      //////////\n\n      function activate() {\n        vm.$parsers.unshift(parseVal);\n        vm.$formatters.unshift(function(val) {\n          vm.$setDirty();\n          return formatVal(val);\n        });\n      }\n\n      function parseVal(val) {\n        console.log('parseNum', val);\n        return parseFloat(val.replace(/\\D*/g, ''), 10);\n      }\n\n      function formatVal(val) {\n        console.log('formatNum', val);\n        return $filter('number')(val);\n      }\n    }\n  }\n\n})();\n","(function() {\n  \"use strict\";\n\n  angular\n    .module('cn.ui')\n    .directive('cnOnerror', cnOnerror);\n\n  function cnOnerror($parse) {\n    '$inject';\n\n    return {\n      restrict: 'A',\n      link: (scope, elem, attrs) => {\n        function cnOnerrorTag() {}\n        scope.__tag = new cnOnerrorTag();\n\n        const handler = $parse(attrs.cnOnerror);\n        elem[0].onerror = (e, param) => handler(scope, { param: param });\n      }\n    };\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('cn.ui')\n      .directive('cnPagination', cnPagination);\n\n  function cnPagination() {\n    return {\n      restrict: 'E',\n      replace: true,\n      template: '\\\n          <div class=\"cn-pagination clearfix\"><div ng-if=\"paging\">\\\n            <div class=\"btn-group\" ng-if=\"count\">\\\n              <button type=\"button\" \\\n                      class=\"btn btn-sm btn-primary dropdown-toggle\" \\\n                      data-toggle=\"dropdown\">\\\n                {{count}} Results <span class=\"caret\"></span>\\\n              </button>\\\n              <ul class=\"dropdown-menu\" role=\"menu\">\\\n                <li><a ng-click=\"onClick(1, 10)\">10 Results</a></li>\\\n                <li><a ng-click=\"onClick(1, 25)\">25 Results</a></li>\\\n                <li><a ng-click=\"onClick(1, 50)\">50 Results</a></li>\\\n              </ul>\\\n            </div>\\\n            <ul class=\"pagination\" ng-if=\"pages.length > 1\">\\\n              <li ng-repeat=\"page in pages\"\\\n                  ng-class=\"{active: page.active}\">\\\n                <a ng-if=\"!page.disabled\"\\\n                   ng-click=\"page.skip && onClick(page.skip)\">{{page.label}}</a>\\\n                <span ng-if=\"page.disabled\">{{page.label}}</span>\\\n              </li>\\\n            </ul>\\\n          </div></div>',\n      scope: {\n        paging: '=',\n        onClick: '=',\n        count: '=?'\n      },\n      link: function($scope) {\n        function cnPaginationTag() {}\n        $scope.__tag = new cnPaginationTag();\n\n        $scope.$watch('paging', function() {\n          if($scope.paging) {\n            $scope.pages = buildPaging($scope.paging);\n          }\n        });\n\n        function buildPaging(paging) {\n          var pages = [],\n              i = paging.skip < 4 ?\n                  1 : (paging.skip > paging.last - 3 ? paging.last - 4 : paging.skip - 2),\n              l = paging.last + 1 > i + 5 ? i + 5 : paging.last + 1;\n\n          if(paging.skip !== 1) {\n            pages.push({\n              label: '\\u2190',\n              skip: paging.skip - 1\n            });\n          }\n\n          if(1 < i) {\n            pages.push({\n              label: 1,\n              skip: 1\n            });\n            pages.push({\n              label: '...',\n              disabled: true\n            });\n          }\n\n          for(; i < l; i++) pages.push({\n            label: i,\n            active: i === paging.skip,\n            skip: i\n          });\n\n          if(paging.last >= l) {\n            pages.push({\n              label: '...',\n              disabled: true\n            });\n            pages.push({\n              label: paging.last,\n              skip: paging.last\n            });\n          }\n\n          if(paging.skip !== paging.last) {\n            pages.push({\n              label: '\\u2192',\n              skip: paging.skip + 1\n            });\n          }\n\n          return pages;\n        }\n      }\n    };\n  }\n\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('cn.ui')\n    .directive('cnParentWidth', cnParentWidth);\n\n  cnParentWidth.$inject = ['$window', '$timeout'];\n  function cnParentWidth($window, $timeout) {\n    return {\n      restrict: 'A',\n      link\n    };\n\n    function link(scope, elem) {\n      function cnParentWidthTag() {}\n      scope.__tag = new cnParentWidthTag();\n\n      var w = angular.element($window);\n      var parent = elem.parent();\n\n      // Clean up event handlers and closure references\n      scope.$on('$destroy', function() {\n        w.off('resize', activate);\n        w = null;\n        parent = null;\n      });\n\n      w.on('resize', activate);\n      activate();\n      $timeout(activate, 250);\n\n      function activate() {\n        elem.width(parent.width());\n      }\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular.module('cn.ui')\n      .directive('cnPercentageFormat', cnPercentageFormat);\n\n  function cnPercentageFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      function cnPercentageFormatTag() {}\n      $scope.__tag = new cnPercentageFormatTag();\n\n      if(!vm) return;\n\n      vm.$parsers.unshift(function() {\n        return _.divide(elem[0].value, 100);\n      });\n\n      vm.$formatters.unshift(function() {\n        elem[0].value = vm.$modelValue * 100;\n        return elem[0].value;\n      });\n    }\n  }\n\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('cnProgressBar', function() {\n        return {\n          restrict: 'E',\n          replace: true,\n          scope: {\n            limit: '=cnLimit',\n            projected: '=cnProjected',\n            progress: '=cnProgress',\n            flexWidth: '=cnProgressBarFlexWidth'\n          },\n          template: '<div class=\"cn-progress-container {{flexWidth ? \\'flex-width\\' : \\'\\'}}\">\\\n                       <div class=\"cn-projected-bar\" \\\n                            ng-class=\"{\\'cn-progress-over\\': limit && projected > limit}\">\\\n                         <div class=\"cn-progress-bar\" \\\n                              ng-class=\"{\\'cn-progress-over\\': limit && progress > limit}\"></div>\\\n                       </div>\\\n                     </div>',\n          link: function($scope, elem) {\n            function cnProgressBarTag() {}\n            $scope.__tag = new cnProgressBarTag();\n\n            var projectedBar = elem.find('.cn-projected-bar'),\n                progressBar = elem.find('.cn-progress-bar');\n\n            // Clean up closure references\n            $scope.$on('$destroy', function() {\n              projectedBar = null;\n              progressBar = null;\n            });\n\n            $scope.$watch(function() {\n              return '' + $scope.limit + $scope.projected + $scope.progress;\n            }, function() {\n              projectedBar.css('width', calculateWidth($scope.projected || $scope.progress, $scope.limit));\n              progressBar.css('width', calculateWidth($scope.progress, $scope.projected));\n            });\n\n            function calculateWidth(numerator, denominator) {\n              return (denominator ? _.percentage(numerator, denominator) : 100) + '%';\n            }\n          }\n        };\n      });\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('radio', function() {\n        return {\n          restrict: 'C',\n          link: function($scope, elem) {\n            function radioTag() {}\n            $scope.__tag = radioTag();\n\n            if(elem.prop('tagName') === 'INPUT') {\n              elem.after('<span></span>');\n            }\n            else {\n              elem.find('input[type=radio]').after('<span></span>');\n            }\n          }\n        };\n      });\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('cnResponsiveHeight', cnResponsiveHeight);\n\n  cnResponsiveHeight.$inject = ['$window', '$timeout'];\n\n  function cnResponsiveHeight($window, $timeout) {\n    let directive = {\n      restrict: 'EA',\n      link: linkFunction\n    };\n\n    return directive;\n\n    function linkFunction($scope, elem, attrs) {\n      function cnResponsiveHeightTag() {}\n      $scope.__tag = new cnResponsiveHeightTag();\n\n      console.log('attrs.cnResponsiveHeight', attrs.cnResponsiveHeight);\n      if(attrs.cnResponsiveHeight === 'false') return;\n\n      // Clean up event handlers and closure references\n      $scope.$on('$destroy', () => {\n        breakpoint = null;\n        w.off('resize', activate);\n        w = null;\n      });\n\n      let w = angular.element($window);\n      let breakpoint = {\n            sm: 768,\n            md: 992,\n            lg: 1200\n          }[attrs.cnResponsiveBreak] || 0;\n\n      w.on('resize', activate);\n      /* give page elements a chance to render before calculation */\n      $timeout(activate, 250);\n      $timeout(activate, 500); // twice for good measure\n\n      function activate() {\n        if($window.innerWidth > breakpoint) {\n          let topOffset = elem.offset().top;\n\n          if(topOffset < 0) {\n            // calculate again after any animations have completed\n            $timeout(activate, 500);\n          }\n          else {\n            let bottomOffset = attrs.cnResponsiveHeight || 0;\n            let height = w.height() - topOffset - bottomOffset;\n            let overflow = attrs.cnResponsiveOverflow || 'auto';\n            height = height ? height + 'px' : 'auto';\n            if (_.has(attrs, 'cnSetMaxHeight')) {\n              elem.css({\n              'max-height': height,\n              'overflow': overflow\n            });\n            } else {\n              elem.css({\n              'height': height,\n              'overflow': overflow\n            });\n            }\n\n          }\n        }\n        else {\n          elem.css({ 'height': '' });\n        }\n      }\n    }\n  }\n})();\n","(function() {\n\n  'use strict';\n\n  class CnSchedule {\n\n    constructor($scope) {\n      'ngInject';\n\n      // https://tools.ietf.org/html/rfc5545#section-3.3.10\n      this.FREQ = {\n        SECONDLY: \"SECONDLY\",\n        MINUTELY: \"MINUTELY\",\n        DAILY: 'DAILY',\n        WEEKLY: 'WEEKLY',\n        MONTHLY: 'MONTHLY',\n        YEARLY: \"YEARLY\"\n      };\n\n      this.WEEKDAY = {\n        MO: 'MO',\n        TU: 'TU',\n        WE: 'WE',\n        TH: 'TH',\n        FR: 'FR',\n        SA: 'SA',\n        SU: \"SU\"\n      };\n\n      this.state = {\n        BIWEEKLY: {\n          freq: this.FREQ.WEEKLY,\n          interval: 2,\n          by: [ this.WEEKDAY.MO, this.WEEKDAY.FR ],\n          _option: 'BIWEEKLY'\n        },\n        BOM: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [ 1 ],\n          _option: 'BOM'\n        },\n        DAILY: {\n          freq: this.FREQ.DAILY,\n          interval: 1,\n          _option: 'DAILY'\n        },\n        EOM: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [ -1 ],\n          _option: 'EOM'\n        },\n        MONTHLY: {\n          freq: this.FREQ.MONTHLY,\n          interval: 1,\n          by: [ 14 ],\n          _option: 'MONTHLY'\n        },\n        WEEKLY: {\n          freq: this.FREQ.WEEKLY,\n          interval: 1,\n          by: [ this.WEEKDAY.MO ],\n          _option: 'WEEKLY'\n        },\n        WORKDAY: {\n          freq: this.FREQ.DAILY,\n          interval: 1,\n          by: (\n            _(this.WEEKDAY)\n              .keys()\n              .reject(value => _.eq(value, this.WEEKDAY.SA) || _.eq(value, this.WEEKDAY.SU))\n              .value()\n          ),\n          _option: 'WORKDAY'\n        }\n      };\n\n      this.keyedWeekDays = _.map(this.WEEKDAY, (key, value) =>\n        ({ name: this.showWeekDay(value), value }));\n\n      $scope.$watch(() => this.model, value => this.ngModel.$setViewValue(value));\n    }\n\n    $onInit() {\n      this.ngModel.$render = () => {\n        const viewValue = this.ngModel.$viewValue;\n        const _option = _.get(viewValue, '_option');\n\n        if (_.isObject(viewValue) && _.isString(_option)) {\n          _.assign(this.state[_option], viewValue);\n          this.model = this.state[_option];\n        }\n        else {\n          this.model = this.state.WEEKLY;\n        }\n      }\n    }\n\n    handleChangeBiWeekly(biweekly) {\n      _.set(this.state.BIWEEKLY, 'by', biweekly)\n    }\n\n    handleChangeWeekly(weekday) {\n      _.set(this.state.WEEKLY, 'by', [ weekday ]);\n    }\n\n    showWeekDay(day) {\n      return ({\n        MO: 'Monday',\n        TU: 'Tuesday',\n        WE: 'Wednesday',\n        TH: 'Thursday',\n        FR: 'Friday',\n        SA: 'Saturday',\n        SU: 'Sunday'\n      })[day];\n    }\n  }\n\n  const cnScheduleComponent = {\n    bindings: {\n      form: '<'\n    },\n    controller: CnSchedule,\n    controllerAs: 'schedule',\n    require: {\n      ngModel: '^ngModel'\n    },\n    template: `\n      <div class=\"form-group\">\n        <div class=\"btn-group clearfix\">\n\n          <label class=\"radio radio-block\">\n            <input type=\"radio\"\n                   ng-model=\"schedule.model\"\n                   ng-value=\"schedule.state.WEEKLY\">\n              Every\n              &nbsp;\n              <div class=\"btn-group\"\n                   uib-dropdown\n                   is-open=\"weeklyIsOpen\">\n                <button type=\"button\"\n                        class=\"btn btn-primary\"\n                        uib-dropdown-toggle\n                        ng-disabled=\"schedule.model._option !== 'WEEKLY'\"\n                        style=\"background-color: #DEDEDE; color: black;\">\n                  {{ schedule.showWeekDay(schedule.state.WEEKLY.by[0]) }}\n                  &nbsp;\n                  <span class=\"caret\"></span>\n                </button>\n                <ul class=\"dropdown-menu\"\n                    uib-dropdown-menu\n                    role=\"menu\"\n                    aria-labelledby=\"single-button\">\n                  <li role=\"menuitem\"\n                      ng-click=\"schedule.handleChangeWeekly(wd.value)\"\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\n                    <a>{{ wd.name }}</a>\n                  </li>\n                </ul>\n              </div>\n            </input>\n          </label>\n\n          <label class=\"radio radio-block\">\n            <input type=\"radio\"\n                   ng-model=\"schedule.model\"\n                   ng-value=\"schedule.state.BIWEEKLY\">\n              Every\n              &nbsp;\n              <div class=\"btn-group\"\n                   uib-dropdown\n                   is-open=\"biWeeklyXIsOpen\">\n                <button type=\"button\"\n                        class=\"btn btn-primary\"\n                        uib-dropdown-toggle\n                        ng-disabled=\"schedule.model._option !== 'BIWEEKLY'\"\n                        style=\"background-color: #DEDEDE; color: black;\">\n                  {{ schedule.showWeekDay(schedule.state.BIWEEKLY.by[0]) }}\n                  &nbsp;\n                  <span class=\"caret\"></span>\n                </button>\n                <ul class=\"dropdown-menu\"\n                    uib-dropdown-menu\n                    role=\"menu\"\n                    aria-labelledby=\"single-button\">\n                  <li role=\"menuitem\"\n                      ng-hide=\"wd.value === schedule.state.BIWEEKLY.by[1]\"\n                      ng-click=\"schedule.handleChangeBiWeekly([wd.value, schedule.state.BIWEEKLY.by[1]])\"\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\n                    <a>{{ wd.name }}</a>\n                  </li>\n                </ul>\n              </div>\n              &nbsp;\n              and\n              &nbsp;\n              <div class=\"btn-group\"\n                   uib-dropdown\n                   is-open=\"biWeeklyYIsOpen\">\n                <button type=\"button\"\n                        class=\"btn btn-primary\"\n                        uib-dropdown-toggle\n                        ng-disabled=\"schedule.model._option !== 'BIWEEKLY'\"\n                        style=\"background-color: #DEDEDE; color: black;\">\n                  {{ schedule.showWeekDay(schedule.state.BIWEEKLY.by[1]) }}\n                  &nbsp;\n                  <span class=\"caret\"></span>\n                </button>\n                <ul class=\"dropdown-menu\"\n                    uib-dropdown-menu\n                    role=\"menu\"\n                    aria-labelledby=\"single-button\">\n                  <li role=\"menuitem\"\n                      ng-hide=\"wd.value === schedule.state.BIWEEKLY.by[0]\"\n                      ng-click=\"schedule.handleChangeBiWeekly([schedule.state.BIWEEKLY.by[0], wd.value])\"\n                      ng-repeat=\"wd in schedule.keyedWeekDays track by wd.value\">\n                    <a>{{ wd.name }}</a>\n                  </li>\n                </ul>\n              </div>\n            </input>\n          </label>\n\n          <label class=\"radio radio-block\">\n            <input type=\"radio\"\n                   ng-model=\"schedule.model\"\n                   ng-value=\"schedule.state.WORKDAY\">\n              Weekdays\n            </input>\n          </label>\n\n          <label class=\"radio radio-block\">\n            <input type=\"radio\"\n                   ng-model=\"schedule.model\"\n                   ng-value=\"schedule.state.DAILY\">\n              Daily\n            </input>\n          </label>\n\n          <label class=\"radio radio-block\">\n            <input type=\"radio\"\n                   ng-model=\"schedule.model\"\n                   ng-value=\"schedule.state.BOM\">\n              Beginning of Month\n            </input>\n          </label>\n\n          <label class=\"radio radio-block\">\n            <input type=\"radio\"\n                   ng-model=\"schedule.model\"\n                   ng-value=\"schedule.state.EOM\">\n              End of Month\n            </input>\n          </label>\n\n          <label class=\"radio radio-block\">\n            <input type=\"radio\"\n                   ng-model=\"schedule.model\"\n                   ng-value=\"schedule.state.MONTHLY\">\n              Every\n              &nbsp;\n              <input max=\"31\"\n                     min=\"1\"\n                     ng-disabled=\"schedule.model._option !== 'MONTHLY'\"\n                     ng-model-options=\"{ debounce: 300 }\"\n                     ng-model=\"schedule.state.MONTHLY.by[0]\"\n                     step=\"1\"\n                     style=\"width: 50px; text-align: center;\"\n                     type=\"number\"\n                     class=\"form-control\" />\n              &nbsp;\n              of the month\n            </input>\n          </label>\n        </div>\n      </div>\n    `\n  };\n\n  angular\n    .module('cn.ui')\n    .component('cnSchedule', cnScheduleComponent)\n\n})();\n","(function() {\n  'use strict';\n  angular\n      .module('cn.ui')\n      .directive('cnSelectOr', cnSelectOr);\n\n  function cnSelectOr() {\n    return {\n      restrict: 'E',\n      template: function(elem, attrs) {\n        console.log('template:', elem, attrs);\n        var tpl = '\\\n          <div class=\"cn-select-or\" ng-disabled=\"vm.disabled\">\\\n            <p ng-show=\"vm.selectFrom.length\" class=\"toggle-view\">\\\n              <a ng-click=\"vm.toggleView()\">\\\n                {{vm.view === \\'list\\' ? vm.toggleText.list : vm.toggleText.new}}\\\n              </a>\\\n            </p>\\\n            <div ng-show=\"vm.form.view === \\'new\\'\" ng-transclude/>\\\n            <div ng-show=\"vm.form.view === \\'list\\'\" class=\"cn-list\">\\\n              <table class=\"list-group table card-flex\">\\\n                <tr ng-repeat=\"item in vm.selectFrom\"\\\n                    selection-model\\\n                    selection-model-type=\"checkbox\"\\\n                    selection-model-cleanup-strategy=\"deselect\"\\\n                    selection-model-selected-items=\"vm.selected\">\\\n                  <td class=\"col-sm-1 text-center\">\\\n                    <span class=\"checkbox\">\\\n                      <input type=\"checkbox\" id=\"checkbox{{ item.id }}\" selection-model-ignore=\"false\"/>\\\n                    </span>\\\n                  </td>\\\n                  <td class=\"col-sm-11\" ng-bind-html=\"vm.processTemplate(item)\"></td>\\\n                </tr>\\\n              </table>\\\n            </div>\\\n          </div>\\\n        ';\n        return tpl;\n      },\n      transclude: true,\n      scope: {\n        selectFrom: '=',\n        ngModel: '=',\n        form: '=ffForm',\n        directiveId: '=',\n        toggleText: '=',\n        disabled: '=',\n        itemTemplate: '='\n      },\n      require: 'ngModel',\n      link: Link,\n      controller: SelectOr,\n      controllerAs: 'vm',\n      bindToController: true\n    };\n  }\n\n  function Link($scope, elem, attrs, ctrl) {\n    function cnSelectOrTag() {}\n    $scope.__tag = new cnSelectOrTag();\n\n    var vm = $scope.vm;\n\n    $scope.$watch('vm.ngModel', validate, true);\n\n    //////////\n\n    function validate(cur, prev) {\n      if(!angular.equals(cur, prev)) {\n        ctrl.$setDirty();\n\n        if(vm.form.required) {\n          ctrl.$setValidity('tv4-302', !!(cur));\n        }\n      }\n    }\n  }\n\n  SelectOr.$inject = ['$scope', '$sce', '$interpolate'];\n  function SelectOr($scope, $sce, $interpolate) {\n    var vm = this;\n    vm.selected = [];\n    vm.form.view = vm.form.view || 'new';\n    vm.activate = activate;\n    vm.onSelectionChange = onSelectionChange;\n    vm.processTemplate = processTemplate;\n    vm.setValue = setValue;\n    vm.toggleView = toggleView;\n\n    $scope.$watch('vm.selected.length', vm.onSelectionChange);\n\n    vm.activate();\n\n    ///////////\n\n    function activate() {\n      vm.form.schema._required = _.clone(vm.form.schema.required);\n    }\n\n    function processTemplate(item) {\n      return $sce.trustAsHtml($interpolate(vm.itemTemplate)(item));\n    }\n\n    function onSelectionChange() {\n      vm.setValue(_.first(vm.selected) || null);\n    }\n\n    function setValue(val) {\n      if(val) {\n        val = vm.form.schema.type === 'object' ? val : val[vm.form.valueProperty || 'value'];\n      }\n      vm.ngModel = val;\n    }\n\n    function toggleView() {\n      vm.form.view = vm.form.view === 'new' ? 'list' : 'new';\n      if(vm.selected[0]) {\n        vm.selected[0].selected = false;\n        vm.selected.length = 0;\n      }\n    }\n\n  }\n\n})();\n","(function() {\n  'use strict';\n\n  class CnShelf {\n    constructor($element, $timeout, $scope) {\n      'ngInject';\n\n      function cnShelfTag() {}\n      $scope.__tag = new cnShelfTag();\n\n      this.$element = $element;\n      this.$timeout = $timeout;\n    }\n\n    $onInit() {\n      this.$element.addClass('animated fast animated-width');\n      this.toggleShow();\n    }\n\n    $onChanges(changes) {\n      if(changes.show) {\n        this.toggleShow();\n      }\n    }\n\n    toggleShow() {\n      if(this.show) {\n        this.$timeout(() => {\n          this.$element.removeClass(this.hideClass).addClass(this.showClass);\n        }, this.showDelay || 0);\n      }\n      else {\n        this.$timeout(() => {\n          this.$element.removeClass(this.showClass).addClass(this.hideClass);\n        }, this.hideDelay || 0);\n      }\n    }\n  }\n\n  const cnShelf = {\n    controller: CnShelf,\n    controllerAs: 'shelf',\n    bindings: {\n      show: '<',\n      showClass: '@',\n      hideClass: '@',\n      showDelay: '<',\n      hideDelay: '<'\n    }\n  };\n\n  angular\n    .module('cn.ui')\n    .component('cnShelf', cnShelf);\n})();\n","(function() {\n  'use strict';\n\n  toastController.$inject = ['$rootScope', 'toaster', '$scope'];\n\n  function toastController($rootScope, toaster, $scope) {\n    function toastTag() {}\n    $scope.__tag = new toastTag();\n\n    const defaults = {\n      timeout: 5000,\n      toasterId: 'simple',\n      body: 'simple-toast',\n      bodyOutputType: 'directive',\n      tapToDismiss: false,\n      closeHtml: '<a>Dismiss</a>'\n    };\n\n    const rslistener = $rootScope.$on(\"citizenNet:toastEvent\", function(event, options) {\n      if (_.isObject(options)) {\n        options.directiveData.icon = mapType(options.directiveData.type);\n        if (Array.isArray(options.directiveData.body)) {\n           options.directiveData.body = options.directiveData.body.join('<br />')\n        }\n        toaster.pop({ ...defaults, ...options });\n      } else {\n        toaster.pop({ ...defaults, directiveData: { body: options } });\n      }\n    });\n\n    function mapType(type) {\n      switch (type) {\n        case \"success\": return \"icn-thumbsup\";\n        case \"warning\": return \"icn-error\";\n        case \"danger\": return \"icn-error\";\n        case \"error\": return \"icn-error\";\n        default: return \"icn-info\";\n      }\n    }\n\n    $scope.$on('$destroy', () => {\n      rslistener();\n    });\n  }\n\n  const simpleToast = () => ({\n    template: `\n      <div class='flex-box align-items-center'>\n        <div class=\"padding-right-20\">\n          <i ng-class=\"directiveData.icon || 'icn-info'\"></i>\n        </div>\n        <div class=\"padding-right-20 flex-1\">\n          <span ng-bind-html='directiveData.body'>{{directiveData.body}}</span>\n        </div>\n      </div>\n    `\n  });\n\n  const actionToast = () => ({\n    template: `\n      <div class='flex-box align-items-center'>\n        <div class='padding-right-20'>\n          <i ng-class='directiveData.icon || \"icn-info\"'></i>\n        </div>\n        <div class='padding-right-20 flex-1'>\n          <span>{{directiveData.body}}</span>\n        </div>\n        <div class='btn-group'>\n          <span ng-repeat='action in directiveData.actions'>\n            <a class='btn btn-primary' ng-click='action.click()'>{{action.text}}</a>\n          </span>\n        </div>\n      </div>\n    `\n  });\n\n  const listToast = () => ({\n    template: `\n      <div class=\"flex-box align-items-center\">\n        <div class=\"padding-right-40\">\n          <span class=\"label\">{{directiveData.selected.length}}</span>\n          {{directiveData.type}} Selected\n        </div>\n        <div class=\"padding-right-20 flex-5 btn-group\">\n          <span ng-repeat=\"action in directiveData.actions\">\n            <a\n              class=\"btn btn-default margin-right-10\"\n              ng-click=\"action.click()\"\n              ng-disabled=\"action.disabled && action.disabled()\"\n            >{{action.text}}</a>\n            <i class=\"fa fa-question\"\n               style=\"color:lightgrey; cursor:pointer;padding:5px;\"\n               ng-if=\"action.tooltip && action.disabled && action.disabled()\"\n               tooltip=\"{{action.tooltip}}\"\n            ></i>\n          </span>\n          <span>\n            <a class=\"btn btn-transparent\" ng-click=\"directiveData.deselect()\">Deselect All</a>\n          </span>\n        </div>\n      </div>\n    `\n  });\n\n  angular\n    .module('cn.ui')\n    .controller('toastController', toastController)\n    .directive(\"simpleToast\", simpleToast)\n    .directive(\"actionToast\", actionToast)\n    .directive(\"listToast\", listToast);\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('cnToggleSwitch', function() {\n        return {\n          restrict: 'E',\n          replace: true,\n          template: `\n            <div class=\"cn-toggle\"\n                  ng-class=\"currentCssState()\"\n                  ng-click=\"toggle($event)\">\n              <i class=\"icn-toggle\"\n                  ng-class=\"currentCssState()\"></i>\n            </div>\n          `,\n          require: '^ngModel',\n          scope: {\n            'ngModel': '=',     // property used to determine on / off state\n            'onValue': '=?',\n            'offValue': '=?',\n            'undefinedClass': '=?',\n            'readOnly': '=',\n            'required': '=',\n            'onChange': '&'     // callback when toggle changes\n          },\n          link: function($scope, elem, attrs, ctrl) {\n            function cnToggleSwitchTag() {}\n            $scope.__tag = new cnToggleSwitchTag();\n\n            $scope.onValue = _.isUndefined($scope.onValue) ? true : $scope.onValue;\n            $scope.offValue = _.isUndefined($scope.offValue) ? false : $scope.offValue;\n            $scope.undefinedClass = $scope.undefinedClass || 'schrodinger';\n\n            $scope.currentCssState = function() {\n              let classes = [];\n              if($scope.readOnly) classes.push('readonly');\n              if($scope.ngModel == $scope.onValue) { }\n              else if($scope.ngModel == $scope.offValue) classes.push('disabled');\n              else classes.push($scope.undefinedClass);\n              return classes.join(' ');\n            };\n\n            $scope.toggle = function($event) {\n              $event.preventDefault();\n              $event.stopImmediatePropagation();\n\n              // Using evil twins to do string to number type conversion comparison\n              if($scope.ngModel == $scope.onValue) {\n                $scope.ngModel = $scope.offValue;\n              }\n              else {\n                $scope.ngModel = $scope.onValue;\n              }\n\n              ctrl.$setDirty();\n\n              if($scope.onChange) {\n                $scope.onChange();\n              }\n            };\n\n            $scope.$watch('ngModel', (val, pre) => {\n              ctrl.$setValidity('schemaForm', true);\n              ctrl.$setValidity('tv4-302', !$scope.required || !(angular.isUndefined(val)));\n            })\n          }\n        };\n      });\n})();\n","(function() {\n  'use strict';\n\n  angular\n      .module('cn.ui')\n      .directive('truncate', function() {\n        return {\n          restrict: 'AE',\n          scope: {\n            text: '=truncateText',\n            size: '=truncateSize',\n            show: '@truncateShow'\n          },\n          link: function($scope, elem) {\n            function truncateTag() {}\n            $scope.__tag = new truncateTag();\n\n            $scope.$on('$destroy', () => {\n              if ($scope.show) {\n                elem.off($scope.show, truncate);\n              }\n            });\n\n            var ogText = $scope.text || '',\n                shortText = ogText.length > $scope.size ?\n                  ogText.substr(0, $scope.size) + '\\u2026' : ogText,\n                truncated = false;\n\n            function truncate() {\n              elem.text(truncated ? ogText : shortText);\n              truncated = !truncated;\n            }\n\n            truncate();\n\n            if($scope.show) {\n              elem.on($scope.show, truncate);\n            }\n          }\n        };\n      });\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('cn.ui')\n    .directive('cnUrlFormat', cnUrlFormat);\n\n  function cnUrlFormat() {\n    return {\n      require: '?ngModel',\n      link: link\n    };\n\n    function link($scope, elem, attrs, vm) {\n      if(!vm) return;\n\n      // Clean up event handlers\n      $scope.$on('$destroy', function() {\n        elem.off('input', handleChange);\n      });\n\n      activate();\n\n      //////////\n\n      function activate() {\n        elem.on('input', handleChange);\n      }\n\n      function handleChange(el) {\n        if(el.target.value.length < 5) { }\n        else if (!el.target.value.startsWith(\"http\")) {\n          el.target.value = \"https://\" + el.target.value;\n        }\n      }\n    }\n  }\n})();\n"]}